/*! For license information please see main.9e09fee9.js.LICENSE.txt */
(()=>{"use strict";var e={49(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,i)&&!k.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:E.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+A(l,0):s,x(a)?(i="",null!=e&&(i=e.replace(N,"$&/")+"/"),T(a,t,i,"",function(e){return e})):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(N,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+A(o=e[c],c);l+=T(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=T(o=o.value,t,i,u=s+A(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",function(e){return t.call(n,e,i++)}),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:E};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},119(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(345)},226(e,t,n){n.d(t,{$b:()=>i,Vy:()=>c});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},a=i.INFO,o={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=o[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}},306(e,t,n){n.d(t,{collection:()=>$o,kd:()=>zl,H9:()=>Xo,x7:()=>Ml,GG:()=>Vl,aU:()=>nl,onSnapshot:()=>Bl,BN:()=>Ul});var r,i,s=n(555),a=n(741),o=n(863),l=n(226),c=n(498),u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},h={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,a=e.g[3];s=t+(a^n&(i^a))+r[0]+3614090360&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[3]+3250441966&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[4]+4118548399&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[7]+4249261313&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[8]+1770035416&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[11]+2304563134&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[12]+1804603682&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[15]+1236535329&4294967295,s=t+(i^a&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[11]+643717713&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[0]+3921069994&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[15]+3634488961&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[4]+3889429448&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[3]+4107603335&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[8]+1163531501&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[7]+1735328473&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^a)+r[5]+4294588738&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[11]+1839030562&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[1]+2763975236&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[7]+4139469664&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[13]+681279174&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[3]+3572445317&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[9]+3654602809&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[15]+530742520&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~a))+r[0]+4096336452&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[14]+2878612391&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[12]+1700485571&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[10]+4293915773&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[8]+1873313359&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[6]+2734768916&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[4]+4149444226&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[2]+718787259&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function s(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,a=0;for(;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var a={};function o(e){return-128<=e&&e<128?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new s([0|e],e<0?-1:0)}):new s([0|e],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(e<0)return m(l(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new s(t,0)}var c=o(0),u=o(1),d=o(16777216);function f(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function p(e){return-1==e.h}function m(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new s(n,~e.h).add(u)}function g(e,t){return e.add(m(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(f(t))throw Error("division by zero");if(f(e))return new y(c,c);if(p(e))return t=b(m(e),t),new y(m(t.g),m(t.h));if(p(t))return t=b(e,m(t)),new y(m(t.g),t.h);if(e.g.length>30){if(p(e)||p(t))throw Error("slowDivide_ only works with positive integers.");for(var n=u,r=t;r.l(e)<=0;)n=w(n),r=w(r);var i=x(n,1),s=x(r,1);for(r=x(r,2),n=x(n,2);!f(r);){var a=s.add(r);a.l(e)<=0&&(i=i.add(n),s=a),r=x(r,1),n=x(n,1)}return t=g(e,i.j(t)),new y(i,t)}for(i=c;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),a=(s=l(n)).j(t);p(a)||a.l(e)>0;)a=(s=l(n-=r)).j(t);f(s)&&(s=u),i=i.add(s),e=g(e,a)}return new y(i,e)}function w(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new s(n,e.h)}function x(e,t){const n=t>>5;t%=32;const r=e.g.length-n,i=[];for(let s=0;s<r;s++)i[s]=t>0?e.i(s+n)>>>t|e.i(s+n+1)<<32-t:e.i(s+n);return new s(i,e.h)}(e=s.prototype).m=function(){if(p(this))return-m(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(p(this))return"-"+m(this).toString(e);const t=l(Math.pow(e,6));var n=this;let r="";for(;;){const i=b(n,t).g;let s=(((n=g(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(f(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return p(e=g(this,e))?-1:f(e)?0:1},e.abs=function(){return p(this)?m(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let r=0;for(let i=0;i<=t;i++){let t=r+(65535&this.i(i))+(65535&e.i(i)),s=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=s>>>16,t&=65535,s&=65535,n[i]=s<<16|t}return new s(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(f(this)||f(e))return c;if(p(this))return p(e)?m(this).j(m(e)):m(m(this).j(e));if(p(e))return m(this.j(m(e)));if(this.l(d)<0&&e.l(d)<0)return l(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){const i=this.i(r)>>>16,s=65535&this.i(r),a=e.i(t)>>>16,o=65535&e.i(t);n[2*r+2*t]+=s*o,v(n,2*r+2*t),n[2*r+2*t+1]+=i*o,v(n,2*r+2*t+1),n[2*r+2*t+1]+=s*a,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*a,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new s(n,0)},e.B=function(e){return b(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new s(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new s(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new s(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,i=h.Md5=t,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return m(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=l(Math.pow(n,8));let i=c;for(let a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+s),n);s<8?(s=l(Math.pow(n,s)),i=i.j(s).add(l(e))):(i=i.j(r),i=i.add(l(e)))}return i},r=h.Integer=s}).apply("undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var d,f,p,m,g,v,y,b,w="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},x={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof w&&w];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=o).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var h="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function S(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function k(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function _(e){s.setTimeout(()=>{throw e},0)}function C(){var e=j;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var N=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new A,e=>e.reset());class A{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,I=!1,j=new class{constructor(){this.h=this.g=null}add(e,t){const n=N.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},D=()=>{const e=Promise.resolve(void 0);T=()=>{e.then(P)}};function P(){for(var e;e=C();){try{e.h.call(e.g)}catch(n){_(n)}var t=N;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}I=!1}function R(){this.u=this.u,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function M(e){return/^[\s\xa0]*$/.test(e)}function F(e,t){O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(F,O),F.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var V="closure_listenable_"+(1e6*Math.random()|0),U=0;function z(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function B(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function q(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function H(e){const t={};for(const n in e)t[n]=e[n];return t}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<K.length;t++)n=K[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Q(e){this.src=e,this.g={},this.h=0}function G(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(B(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}Q.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const a=$(e,t,r,i);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new z(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var X="closure_lm_"+(1e6*Math.random()|0),Y={};function J(e,t,n,r,i){if(r&&r.once)return te(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)J(e,t[s],n,r,i);return null}return n=le(n),e&&e[V]?e.J(t,n,a(r)?!!r.capture:!!r,i):ee(e,t,n,!1,r,i)}function ee(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const o=a(i)?!!i.capture:!!i;let l=ae(e);if(l||(e[X]=l=new Q(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=se;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)L||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ie(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function te(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)te(e,t[s],n,r,i);return null}return n=le(n),e&&e[V]?e.K(t,n,a(r)?!!r.capture:!!r,i):ee(e,t,n,!0,r,i)}function ne(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)ne(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=le(n),e&&e[V]?(e=e.i,(s=String(t).toString())in e.g&&((n=$(t=e.g[s],n,r,i))>-1&&(B(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=ae(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=e>-1?t[e]:null)&&re(n))}function re(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[V])G(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ie(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ae(t))?(G(n,e),0==n.h&&(n.src=null,t[X]=null)):B(e)}}}function ie(e){return e in Y?Y[e]:Y[e]="on"+e}function se(e,t){if(e.da)e=!0;else{t=new F(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&re(e),e=n.call(r,t)}return e}function ae(e){return(e=e[X])instanceof Q?e:null}var oe="__closure_events_fn_"+(1e9*Math.random()>>>0);function le(e){return"function"===typeof e?e:(e[oe]||(e[oe]=function(t){return e.handleEvent(t)}),e[oe])}function ce(){R.call(this),this.i=new Q(this),this.M=this,this.G=null}function ue(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;W(t=new O(r,e),i)}let s,a;if(i=!0,n)for(a=n.length-1;a>=0;a--)s=t.g=n[a],i=he(s,r,!0,t)&&i;if(s=t.g=e,i=he(s,r,!0,t)&&i,i=he(s,r,!1,t)&&i,n)for(a=0;a<n.length;a++)s=t.g=n[a],i=he(s,r,!1,t)&&i}function he(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const a=t[s];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&G(e.i,a),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function de(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,de(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(ce,R),ce.prototype[V]=!0,ce.prototype.removeEventListener=function(e,t,n,r){ne(this,e,t,n,r)},ce.prototype.N=function(){if(ce.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)B(n[e]);delete e.g[t],e.h--}}this.G=null},ce.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ce.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class fe extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:de(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pe(e){R.call(this),this.h=e,this.g={}}u(pe,R);var me=[];function ge(e){q(e.g,function(e,t){this.g.hasOwnProperty(t)&&re(e)},e),e.g={}}pe.prototype.N=function(){pe.Z.N.call(this),ge(this)},pe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ve=s.JSON.stringify,ye=s.JSON.parse,be=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function we(){}function xe(){}var Se={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ee(){O.call(this,"d")}function ke(){O.call(this,"c")}u(Ee,O),u(ke,O);var _e={},Ce=null;function Ne(){return Ce=Ce||new ce}function Ae(e){O.call(this,_e.Ia,e)}function Te(e){const t=Ne();ue(t,new Ae(t))}function Ie(e,t){O.call(this,_e.STAT_EVENT,e),this.stat=t}function je(e){const t=Ne();ue(t,new Ie(t,e))}function De(e,t){O.call(this,_e.Ja,e),this.size=t}function Pe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Re(){this.g=!0}function Oe(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return ve(s)}catch(s){return t}}(e,n)+(r?" "+r:"")})}_e.Ia="serverreachability",u(Ae,O),_e.STAT_EVENT="statevent",u(Ie,O),_e.Ja="timingevent",u(De,O),Re.prototype.ua=function(){this.g=!1},Re.prototype.info=function(){};var Le,Me={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fe={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ve(){}function Ue(e){return encodeURIComponent(String(e))}function ze(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Be(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new pe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qe}function qe(){this.i=null,this.g="",this.h=!1}u(Ve,we),Ve.prototype.g=function(){return new XMLHttpRequest},Le=new Ve;var He={},Ke={};function We(e,t,n){e.M=1,e.A=vt(dt(t)),e.u=n,e.R=!0,Qe(e,null)}function Qe(e,t){e.F=Date.now(),Xe(e),e.B=dt(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),jt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new qe,e.g=yn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new fe(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(me[0]=i.toString()),i=me);for(let s=0;s<i.length;s++){const e=J(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?H(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),Te(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var a="",o=s.split("&");for(let e=0;e<o.length;e++){var l=o[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+l+"&":a+(e+"=redacted&")}}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Ge(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function $e(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ke:(n=Number(t.substring(n,r)),isNaN(n)?He:(r+=1)+n>t.length?Ke:(t=t.slice(r,r+n),e.C=r+n,t))}function Xe(e){e.T=Date.now()+e.H,Ye(e,e.H)}function Ye(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=Pe(l(e.aa,e),t)}function Je(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function Ze(e){0==e.j.I||e.K||fn(e.j,e)}function et(e){Je(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ge(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function tt(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||at(n.h,e)))if(!e.L&&at(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;dn(n),tn(n)}cn(n),je(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=Pe(l(n.Va,n),6e3));st(n.h)<=1&&n.ta&&(n.ta=void 0)}else mn(n,11)}else if((e.L||n.g==e)&&dn(n),!M(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ot(s,s.h),s.h=null))}if(r.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,gt(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=vn(r,r.L?r.ba:null,r.W),a.L){lt(r.h,a);var o=a,c=r.O;c&&(o.H=c),o.D&&(Je(o),Xe(o)),r.g=a}else ln(r);n.i.length>0&&rn(n)}else"stop"!=l[0]&&"close"!=l[0]||mn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?mn(n,7):en(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}Te()}catch(u){}}Be.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Xt(e)?t.j():this.Y(e)},Be.prototype.Y=function(e){try{if(e==this.g)e:{const l=Xt(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||4!=l||7==c||Te(),Je(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Ge(e))return e.g.la();const t=Yt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Xt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return et(e),Ze(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,je(12),et(this),Ze(this);break e}Oe(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tt(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=$e(this,n),t==Ke){4==l&&(this.m=4,je(14),e=!1),Oe(this.i,this.l,null,"[Incomplete Response]");break}if(t==He){this.m=4,je(15),Oe(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Oe(this.i,this.l,t,null),tt(this,t)}if(Ge(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,je(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),un(o),o.P=!0,je(11))}}else Oe(this.i,this.l,n,"[Invalid Chunked Response]"),et(this),Ze(this)}else Oe(this.i,this.l,n,null),tt(this,n);4==l&&et(this),this.o&&!this.K&&(4==l?fn(this.j,this):(this.o=!1,Xe(this)))}else(function(e){const t={};e=(e.g&&Xt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(M(e[r]))continue;var n=ze(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,je(12)):(this.m=0,je(13)),et(this),Ze(this)}}}catch(Z){}},Be.prototype.cancel=function(){this.K=!0,et(this)},Be.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(Te(),je(17)),et(this),this.m=2,Ze(this)):Ye(this,this.T-e)};var nt=class{constructor(e,t){this.g=e,this.map=t}};function rt(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function it(e){return!!e.h||!!e.g&&e.g.size>=e.j}function st(e){return e.h?1:e.g?e.g.size:0}function at(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ot(e,t){e.g?e.g.add(t):e.h=t}function lt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ct(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return S(e.i)}rt.prototype.cancel=function(){if(this.i=ct(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ht(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof ht?(this.l=e.l,ft(this,e.j),this.o=e.o,this.g=e.g,pt(this,e.u),this.h=e.h,mt(this,Dt(e.i)),this.m=e.m):e&&(t=String(e).match(ut))?(this.l=!1,ft(this,t[1]||"",!0),this.o=yt(t[2]||""),this.g=yt(t[3]||"",!0),pt(this,t[4]),this.h=yt(t[5]||"",!0),mt(this,t[6]||"",!0),this.m=yt(t[7]||"")):(this.l=!1,this.i=new Ct(null,this.l))}function dt(e){return new ht(e)}function ft(e,t,n){e.j=n?yt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function pt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function mt(e,t,n){t instanceof Ct?(e.i=t,function(e,t){t&&!e.j&&(Nt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(At(this,t),jt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=bt(t,kt)),e.i=new Ct(t,e.l))}function gt(e,t,n){e.i.set(t,n)}function vt(e){return gt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function yt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function bt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,wt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function wt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ht.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(bt(t,xt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(bt(t,xt,!0),"@"),e.push(Ue(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(bt(n,"/"==n.charAt(0)?Et:St,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",bt(n,_t)),e.join("")},ht.prototype.resolve=function(e){const t=dt(this);let n=!!e.j;n?ft(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)pt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?mt(t,Dt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var xt=/[#\/\?@]/g,St=/[#\?:]/g,Et=/[#\?]/g,kt=/[#\?@]/g,_t=/#/g;function Ct(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Nt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function At(e,t){Nt(e),t=Pt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Tt(e,t){return Nt(e),t=Pt(e,t),e.g.has(t)}function It(e,t){Nt(e);let n=[];if("string"===typeof t)Tt(e,t)&&(n=n.concat(e.g.get(Pt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function jt(e,t,n){At(e,t),n.length>0&&(e.i=null,e.g.set(Pt(e,t),S(n)),e.h+=n.length)}function Dt(e){const t=new Ct;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function Pt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Rt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ot(){this.g=new be}function Lt(e){this.i=e.Sb||null,this.h=e.ab||!1}function Mt(e,t){ce.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Ft(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Vt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Ut(e)}function Ut(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function zt(e){let t="";return q(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Bt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=zt(n),"string"===typeof e?null!=n&&Ue(n):gt(e,t,n))}function qt(e){ce.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=Ct.prototype).add=function(e,t){Nt(this),this.i=null,e=Pt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Nt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return Nt(this),this.i=null,Tt(this,e=Pt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=It(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ue(n);n=It(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ue(n[t])),e.push(r)}}return this.i=e.join("&")},u(Lt,we),Lt.prototype.g=function(){return new Mt(this.i,this.h)},u(Mt,ce),(e=Mt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Ut(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Vt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ut(this)),this.g&&(this.readyState=3,Ut(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ft(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Vt(this):Ut(this),3==this.readyState&&Ft(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Vt(this))},e.Na=function(e){this.g&&(this.response=e,Vt(this))},e.ga=function(){this.g&&Vt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Mt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(qt,ce);var Ht=/^https?$/i,Kt=["POST","PUT"];function Wt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Qt(e),$t(e)}function Qt(e){e.A||(e.A=!0,ue(e,"complete"),ue(e,"error"))}function Gt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Xt(e))setTimeout(e.Ca.bind(e),0);else if(ue(e,"readystatechange"),4==Xt(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(ut)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!Ht.test(t?t.toLowerCase():"")}n=r}if(n)ue(e,"complete"),ue(e,"success");else{e.o=6;try{var a=Xt(e)>2?e.g.statusText:""}catch(o){a=""}e.l=a+" ["+e.ca()+"]",Qt(e)}}finally{$t(e)}}}function $t(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||ue(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Xt(e){return e.g?e.g.readyState:0}function Yt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Jt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Zt(e){this.za=0,this.i=[],this.j=new Re,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Jt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Jt("baseRetryDelayMs",5e3,e),this.Za=Jt("retryDelaySeedMs",1e4,e),this.Ta=Jt("forwardChannelMaxRetries",2,e),this.va=Jt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new rt(e&&e.concurrentRequestLimit),this.Ba=new Ot,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function en(e){if(nn(e),3==e.I){var t=e.V++,n=dt(e.J);if(gt(n,"SID",e.M),gt(n,"RID",t),gt(n,"TYPE","terminate"),an(e,n),(t=new Be(e,e.j,t)).M=2,t.A=vt(dt(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=yn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Xe(t)}gn(e)}function tn(e){e.g&&(un(e),e.g.cancel(),e.g=null)}function nn(e){tn(e),e.v&&(s.clearTimeout(e.v),e.v=null),dn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function rn(e){if(!it(e.h)&&!e.m){e.m=!0;var t=e.Ea;T||D(),I||(T(),I=!0),j.add(t,e),e.D=0}}function sn(e,t){var n;n=t?t.l:e.V++;const r=dt(e.J);gt(r,"SID",e.M),gt(r,"RID",n),gt(r,"AID",e.K),an(e,r),e.u&&e.o&&Bt(r,e.u,e.o),n=new Be(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=on(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),ot(e.h,n),We(n,r,t)}function an(e,t){e.H&&q(e.H,function(e,n){gt(t,n,e)}),e.l&&q({},function(e,n){gt(t,n,e)})}function on(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=i[c].g;const n=i[c].map;if((s-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;a(n)&&(r=ve(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(E){throw e.push(s+"type="+encodeURIComponent("_badmap")),E}}catch(E){r&&r(n)}}if(l){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function ln(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;T||D(),I||(T(),I=!0),j.add(t,e),e.A=0}}function cn(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=Pe(l(e.Da,e),pn(e,e.A)),e.A++,!0)}function un(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function hn(e){e.g=new Be(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=dt(e.na);gt(t,"RID","rpc"),gt(t,"SID",e.M),gt(t,"AID",e.K),gt(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&gt(t,"TO",e.ia),gt(t,"TYPE","xmlhttp"),an(e,t),e.u&&e.o&&Bt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=vt(dt(t)),n.u=null,n.R=!0,Qe(n,e)}function dn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function fn(e,t){var n=null;if(e.g==t){dn(e),un(e),e.g=null;var r=2}else{if(!at(e.h,t))return;n=t.G,lt(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;ue(r=Ne(),new De(r,n)),rn(e)}else ln(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(st(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=Pe(l(e.Ea,e,t),pn(e,e.D)),e.D++,!0))}(e,t)||2==r&&cn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:mn(e,5);break;case 4:mn(e,10);break;case 3:mn(e,6);break;default:mn(e,2)}}function pn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function mn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new ht(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ft(r,"https"),vt(r),t?function(e,t){const n=new Re;if(s.Image){const r=new Image;r.onload=c(Rt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Rt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Rt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Rt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Re;const n=new AbortController,r=setTimeout(()=>{n.abort(),Rt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Rt(0,0,!0,t):Rt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Rt(0,0,!1,t)})}(r.toString(),n)}else je(2);e.I=0,e.l&&e.l.pa(t),gn(e),nn(e)}function gn(e){if(e.I=0,e.ja=[],e.l){const t=ct(e.h);0==t.length&&0==e.i.length||(k(e.ja,t),k(e.ja,e.i),e.h.i.length=0,S(e.i),e.i.length=0),e.l.oa()}}function vn(e,t,n){var r=n instanceof ht?dt(n):new ht(n);if(""!=r.g)t&&(r.g=t+"."+r.g),pt(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new ht(null);r&&ft(e,r),t&&(e.g=t),i&&pt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&gt(r,n,t),gt(r,"VER",e.ka),an(e,r),r}function yn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new qt(new Lt({ab:n})):new qt(e.ma)).Fa(e.L),t}function bn(){}function wn(){}function xn(e,t){ce.call(this),this.g=new Zt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!M(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!M(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new kn(this)}function Sn(e){Ee.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function En(){ke.call(this),this.status=1}function kn(e){this.g=e}(e=qt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Le.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Wt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Kt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){Wt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,ue(this,"complete"),ue(this,"abort"),$t(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$t(this,!0)),qt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Gt(this):this.Xa())},e.Xa=function(){Gt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Xt(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ye(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Zt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){je(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=vn(this,null,this.W),rn(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Be(this,this.j,e);let s=this.o;if(this.U&&(s?(s=H(s),W(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=on(this,i,t),gt(n=dt(this.J),"RID",e),gt(n,"CVER",22),this.G&&gt(n,"X-HTTP-Session-Id",this.G),an(this,n),s&&(this.R?t="headers="+Ue(zt(s))+"&"+t:this.u&&Bt(n,this.u,s)),ot(this.h,i),this.Ra&&gt(n,"TYPE","init"),this.S?(gt(n,"$req",t),gt(n,"SID","null"),i.U=!0,We(i,n,null)):We(i,n,t),this.I=2}}else 3==this.I&&(e?sn(this,e):0==this.i.length||it(this.h)||sn(this))},e.Da=function(){if(this.v=null,hn(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=Pe(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,je(10),tn(this),hn(this))},e.Va=function(){null!=this.C&&(this.C=null,tn(this),cn(this),je(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=bn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},wn.prototype.g=function(e,t){return new xn(e,t)},u(xn,ce),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){en(this.g)},xn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ve(e),e=n);t.i.push(new nt(t.Ya++,e)),3==t.I&&rn(t)},xn.prototype.N=function(){this.g.l=null,delete this.j,en(this.g),delete this.g,xn.Z.N.call(this)},u(Sn,Ee),u(En,ke),u(kn,bn),kn.prototype.ra=function(){ue(this.g,"a")},kn.prototype.qa=function(e){ue(this.g,new Sn(e))},kn.prototype.pa=function(e){ue(this.g,new En)},kn.prototype.oa=function(){ue(this.g,"b")},wn.prototype.createWebChannel=wn.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,b=x.createWebChannelTransport=function(){return new wn},y=x.getStatEventTarget=function(){return Ne()},v=x.Event=_e,g=x.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Me.NO_ERROR=0,Me.TIMEOUT=8,Me.HTTP_ERROR=6,m=x.ErrorCode=Me,Fe.COMPLETE="complete",p=x.EventType=Fe,xe.EventType=Se,Se.OPEN="a",Se.CLOSE="b",Se.ERROR="c",Se.MESSAGE="d",ce.prototype.listen=ce.prototype.J,f=x.WebChannel=xe,x.FetchXmlHttpFactory=Lt,qt.prototype.listenOnce=qt.prototype.K,qt.prototype.getLastError=qt.prototype.Ha,qt.prototype.getLastErrorCode=qt.prototype.ya,qt.prototype.getStatus=qt.prototype.ca,qt.prototype.getResponseJson=qt.prototype.La,qt.prototype.getResponseText=qt.prototype.la,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Fa,d=x.XhrIo=qt}).apply("undefined"!==typeof w?w:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const S="@firebase/firestore",E="4.9.3";class k{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}k.UNAUTHENTICATED=new k(null),k.GOOGLE_CREDENTIALS=new k("google-credentials-uid"),k.FIRST_PARTY=new k("first-party-uid"),k.MOCK_USER=new k("mock-user");let _="12.7.0";const C=new l.Vy("@firebase/firestore");function N(){return C.logLevel}function A(e){if(C.logLevel<=l.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(j);C.debug("Firestore (".concat(_,"): ").concat(e),...i)}}function T(e){if(C.logLevel<=l.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(j);C.error("Firestore (".concat(_,"): ").concat(e),...i)}}function I(e){if(C.logLevel<=l.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(j);C.warn("Firestore (".concat(_,"): ").concat(e),...i)}}function j(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function D(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,P(e,r,n)}function P(e,t,n){let r="FIRESTORE (".concat(_,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw T(r),new Error(r)}function R(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||P(t,i,r)}function O(e,t){return e}const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends c.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class F{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class V{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class U{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(k.UNAUTHENTICATED))}shutdown(){}}class z{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class B{constructor(e){this.t=e,this.currentUser=k.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){R(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new F;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new F,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{A("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(A("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new F)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(A("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(R("string"==typeof t.accessToken,31837,{l:t}),new V(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return R(null===e||"string"==typeof e,2055,{h:e}),new k(e)}}class q{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=k.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class H{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new q(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(k.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class K{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,a.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){R(void 0===this.o,3512);const n=e=>{null!=e.error&&A("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,A("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{A("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):A("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new K(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(R("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new K(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Q(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class G{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Q(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function $(e,t){return e<t?-1:e>t?1:0}function X(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return Y(n)===Y(i)?$(n,i):Y(n)?1:-1}return $(e.length,t.length)}function Y(e){const t=e.charCodeAt(0);return t>=55296&&t<=57343}function J(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Z="__name__";class ee{constructor(e,t,n){void 0===t?t=0:t>e.length&&D(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&D(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ee.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ee?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=ee.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return $(e.length,t.length)}static compareSegments(e,t){const n=ee.isNumericId(e),r=ee.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ee.extractNumericId(e).compare(ee.extractNumericId(t)):X(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class te extends ee{construct(e,t,n){return new te(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new M(L.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new te(e)}static emptyPath(){return new te([])}}const ne=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class re extends ee{construct(e,t,n){return new re(e,t,n)}static isValidIdentifier(e){return ne.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),re.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Z}static keyField(){return new re([Z])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new M(L.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new M(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new M(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new M(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new re(t)}static emptyPath(){return new re([])}}class ie{constructor(e){this.path=e}static fromPath(e){return new ie(te.fromString(e))}static fromName(e){return new ie(te.fromString(e).popFirst(5))}static empty(){return new ie(te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===te.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return te.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new te(e.slice()))}}function se(e,t,n){if(!n)throw new M(L.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ae(e){if(!ie.isDocumentKey(e))throw new M(L.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function oe(e){if(ie.isDocumentKey(e))throw new M(L.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function le(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function ce(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":D(12329,{type:typeof e})}function ue(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new M(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ce(e);throw new M(L.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function he(e,t){const n={typeString:e};return t&&(n.value=t),n}function de(e,t){if(!le(e))throw new M(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&a!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new M(L.INVALID_ARGUMENT,n);return!0}const fe=-62135596800,pe=1e6;class me{static now(){return me.fromMillis(Date.now())}static fromDate(e){return me.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*pe);return new me(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new M(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new M(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<fe)throw new M(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pe}_compareTo(e){return this.seconds===e.seconds?$(this.nanoseconds,e.nanoseconds):$(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(de(e,me._jsonSchema))return new me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fe;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}me._jsonSchemaVersion="firestore/timestamp/1.0",me._jsonSchema={type:he("string",me._jsonSchemaVersion),seconds:he("number"),nanoseconds:he("number")};class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new me(0,0))}static max(){return new ge(new me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ve=-1;class ye{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ye.UNKNOWN_ID=-1;function be(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(1e9===r?new me(n+1,0):new me(n,r));return new xe(i,ie.empty(),t)}function we(e){return new xe(e.readTime,e.key,ve)}class xe{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new xe(ge.min(),ie.empty(),ve)}static max(){return new xe(ge.max(),ie.empty(),ve)}}function Se(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ie.comparator(e.documentKey,t.documentKey),0!==n?n:$(e.largestBatchId,t.largestBatchId))}const Ee="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ke{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function _e(e){if(e.code!==L.FAILED_PRECONDITION||e.message!==Ee)throw e;A("LocalStore","Unexpectedly lost primary lease")}class Ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&D(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ce((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ce?t:Ce.resolve(t)}catch(e){return Ce.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.reject(t)}static resolve(e){return new Ce((t,n)=>{t(e)})}static reject(e){return new Ce((t,n)=>{n(e)})}static waitFor(e){return new Ce((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Ce.resolve(!1);for(const n of e)t=t.next(e=>e?Ce.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Ce((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Ce((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Ne(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ae(e){return"IndexedDbTransactionError"===e.name}class Te{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Te.ce=-1;const Ie=-1;function je(e){return null==e}function De(e){return 0===e&&1/e==-1/0}function Pe(e){return"number"==typeof e&&Number.isInteger(e)&&!De(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Re="\x01";function Oe(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Me(t)),t=Le(e.get(n),t);return Me(t)}function Le(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Re:n+="\x01\x11";break;default:n+=t}}return n}function Me(e){return e+Re+"\x01"}const Fe="remoteDocuments",Ve="owner",Ue="mutationQueues",ze="mutations";const Be="documentMutations",qe="remoteDocumentsV14",He="remoteDocumentGlobal",Ke="targets",We="targetDocuments",Qe="targetGlobal",Ge="collectionParents",$e="clientMetadata",Xe="bundles",Ye="namedQueries",Je="indexConfiguration",Ze="indexState",et="indexEntries",tt="documentOverlays",nt="globals",rt=[Ue,ze,Be,Fe,Ke,Ve,Qe,We,$e,He,Ge,Xe,Ye],it=[Ue,ze,Be,qe,Ke,Ve,Qe,We,$e,He,Ge,Xe,Ye,tt],st=it,at=[...st,Je,Ze,et];function ot(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function lt(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ct(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ut{constructor(e,t){this.comparator=e,this.root=t||dt.EMPTY}insert(e,t){return new ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ht(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ht(this.root,e,this.comparator,!1)}getReverseIterator(){return new ht(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ht(this.root,e,this.comparator,!0)}}class ht{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:dt.RED,this.left=null!=r?r:dt.EMPTY,this.right=null!=i?i:dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new dt(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return dt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw D(43730,{key:this.key,value:this.value});if(this.right.isRed())throw D(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw D(27949);return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1,dt.EMPTY=new class{constructor(){this.size=0}get key(){throw D(57766)}get value(){throw D(16141)}get color(){throw D(16727)}get left(){throw D(29726)}get right(){throw D(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ft{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pt(this.data.getIterator())}getIteratorFrom(e){return new pt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof ft))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ft(this.comparator);return t.data=e,t}}class pt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class mt{constructor(e){this.fields=e,e.sort(re.comparator)}static empty(){return new mt([])}unionWith(e){let t=new ft(re.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new mt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return J(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class gt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new gt("Invalid base64 string: "+e):e}}(e);return new vt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const yt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bt(e){if(R(!!e,39018),"string"==typeof e){let t=0;const n=yt.exec(e);if(R(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:wt(e.seconds),nanos:wt(e.nanos)}}function wt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function xt(e){return"string"==typeof e?vt.fromBase64String(e):vt.fromUint8Array(e)}const St="server_timestamp",Et="__type__",kt="__previous_value__",_t="__local_write_time__";function Ct(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Et])||void 0===t?void 0:t.stringValue)===St}function Nt(e){const t=e.mapValue.fields[kt];return Ct(t)?Nt(t):t}function At(e){const t=bt(e.mapValue.fields[_t].timestampValue);return new me(t.seconds,t.nanos)}class Tt{constructor(e,t,n,r,i,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const It="(default)";class jt{constructor(e,t){this.projectId=e,this.database=t||It}static empty(){return new jt("","")}get isDefaultDatabase(){return this.database===It}isEqual(e){return e instanceof jt&&e.projectId===this.projectId&&e.database===this.database}}const Dt="__type__",Pt="__max__",Rt={mapValue:{fields:{__type__:{stringValue:Pt}}}},Ot="__vector__",Lt="value";function Mt(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ct(e)?4:Zt(e)?9007199254740991:Yt(e)?10:11:D(28295,{value:e})}function Ft(e,t){if(e===t)return!0;const n=Mt(e);if(n!==Mt(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return At(e).isEqual(At(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=bt(e.timestampValue),r=bt(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return xt(e.bytesValue).isEqual(xt(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return wt(e.geoPointValue.latitude)===wt(t.geoPointValue.latitude)&&wt(e.geoPointValue.longitude)===wt(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return wt(e.integerValue)===wt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=wt(e.doubleValue),r=wt(t.doubleValue);return n===r?De(n)===De(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return J(e.arrayValue.values||[],t.arrayValue.values||[],Ft);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ot(n)!==ot(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ft(n[i],r[i])))return!1;return!0}(e,t);default:return D(52216,{left:e})}}function Vt(e,t){return void 0!==(e.values||[]).find(e=>Ft(e,t))}function Ut(e,t){if(e===t)return 0;const n=Mt(e),r=Mt(t);if(n!==r)return $(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=wt(e.integerValue||e.doubleValue),r=wt(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return zt(e.timestampValue,t.timestampValue);case 4:return zt(At(e),At(t));case 5:return X(e.stringValue,t.stringValue);case 6:return function(e,t){const n=xt(e),r=xt(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=$(n[i],r[i]);if(0!==e)return e}return $(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=$(wt(e.latitude),wt(t.latitude));return 0!==n?n:$(wt(e.longitude),wt(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Bt(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a[Lt])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Lt])||void 0===r?void 0:r.arrayValue,u=$((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Bt(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Rt.mapValue&&t===Rt.mapValue)return 0;if(e===Rt.mapValue)return 1;if(t===Rt.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=X(r[a],s[a]);if(0!==e)return e;const t=Ut(n[r[a]],i[s[a]]);if(0!==t)return t}return $(r.length,s.length)}(e.mapValue,t.mapValue);default:throw D(23264,{he:n})}}function zt(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return $(e,t);const n=bt(e),r=bt(t),i=$(n.seconds,r.seconds);return 0!==i?i:$(n.nanos,r.nanos)}function Bt(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ut(n[i],r[i]);if(e)return e}return $(n.length,r.length)}function qt(e){return Ht(e)}function Ht(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=bt(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return xt(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ie.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ht(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Ht(e.fields[i]));return n+"}"}(e.mapValue):D(61005,{value:e})}function Kt(e){switch(Mt(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Nt(e);return t?16+Kt(t):16;case 5:return 2*e.stringValue.length;case 6:return xt(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Kt(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return lt(e.fields,(e,n)=>{t+=e.length+Kt(n)}),t}(e.mapValue);default:throw D(13486,{value:e})}}function Wt(e){return!!e&&"integerValue"in e}function Qt(e){return!!e&&"arrayValue"in e}function Gt(e){return!!e&&"nullValue"in e}function $t(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Xt(e){return!!e&&"mapValue"in e}function Yt(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Dt])||void 0===t?void 0:t.stringValue)===Ot}function Jt(e){if(e.geoPointValue)return{geoPointValue:(0,s.A)({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:(0,s.A)({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return lt(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Jt(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Jt(e.arrayValue.values[n]);return t}return(0,s.A)({},e)}function Zt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Pt}class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Xt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jt(t)}setAll(e){let t=re.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Jt(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Xt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ft(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Xt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){lt(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new en(Jt(this.value))}}function tn(e){const t=[];return lt(e.fields,(e,n)=>{const r=new re([e]);if(Xt(n)){const e=tn(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new mt(t)}class nn{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new nn(e,0,ge.min(),ge.min(),ge.min(),en.empty(),0)}static newFoundDocument(e,t,n,r){return new nn(e,1,t,ge.min(),n,r,0)}static newNoDocument(e,t){return new nn(e,2,t,ge.min(),ge.min(),en.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,ge.min(),ge.min(),en.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ge.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class rn{constructor(e,t){this.position=e,this.inclusive=t}}function sn(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?ie.comparator(ie.fromName(a.referenceValue),n.key):Ut(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function an(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ft(e.position[n],t.position[n]))return!1;return!0}class on{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ln(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class cn{}class un extends cn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new yn(e,t,n):"array-contains"===t?new Sn(e,n):"in"===t?new En(e,n):"not-in"===t?new kn(e,n):"array-contains-any"===t?new _n(e,n):new un(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new bn(e,n):new wn(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Ut(t,this.value)):null!==t&&Mt(this.value)===Mt(t)&&this.matchesComparison(Ut(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return D(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hn extends cn{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new hn(e,t)}matches(e){return dn(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dn(e){return"and"===e.op}function fn(e){return pn(e)&&dn(e)}function pn(e){for(const t of e.filters)if(t instanceof hn)return!1;return!0}function mn(e){if(e instanceof un)return e.field.canonicalString()+e.op.toString()+qt(e.value);if(fn(e))return e.filters.map(e=>mn(e)).join(",");{const t=e.filters.map(e=>mn(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function gn(e,t){return e instanceof un?function(e,t){return t instanceof un&&e.op===t.op&&e.field.isEqual(t.field)&&Ft(e.value,t.value)}(e,t):e instanceof hn?function(e,t){return t instanceof hn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&gn(n,t.filters[r]),!0)}(e,t):void D(19439)}function vn(e){return e instanceof un?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(qt(e.value))}(e):e instanceof hn?function(e){return e.op.toString()+" {"+e.getFilters().map(vn).join(" ,")+"}"}(e):"Filter"}class yn extends un{constructor(e,t,n){super(e,t,n),this.key=ie.fromName(n.referenceValue)}matches(e){const t=ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class bn extends un{constructor(e,t){super(e,"in",t),this.keys=xn("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class wn extends un{constructor(e,t){super(e,"not-in",t),this.keys=xn("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function xn(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ie.fromName(e.referenceValue))}class Sn extends un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qt(t)&&Vt(t.arrayValue,this.value)}}class En extends un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Vt(this.value.arrayValue,t)}}class kn extends un{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Vt(this.value.arrayValue,t)}}class _n extends un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Vt(this.value.arrayValue,e))}}class Cn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Te=null}}function Nn(e){return new Cn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function An(e){const t=O(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>mn(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),je(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>qt(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>qt(e)).join(",")),t.Te=e}return t.Te}function Tn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ln(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!gn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!an(e.startAt,t.startAt)&&an(e.endAt,t.endAt)}function In(e){return ie.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class jn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Dn(e,t,n,r,i,s,a,o){return new jn(e,t,n,r,i,s,a,o)}function Pn(e){return new jn(e)}function Rn(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function On(e){return null!==e.collectionGroup}function Ln(e){const t=O(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new ft(re.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new on(r,n))}),e.has(re.keyField().canonicalString())||t.Ie.push(new on(re.keyField(),n))}return t.Ie}function Mn(e){const t=O(e);return t.Ee||(t.Ee=Fn(t,Ln(e))),t.Ee}function Fn(e,t){if("F"===e.limitType)return Nn(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new on(e.field,t)});const n=e.endAt?new rn(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new rn(e.startAt.position,e.startAt.inclusive):null;return Nn(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Vn(e,t,n){return new jn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Un(e,t){return Tn(Mn(e),Mn(t))&&e.limitType===t.limitType}function zn(e){return"".concat(An(Mn(e)),"|lt:").concat(e.limitType)}function Bn(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>vn(e)).join(", "),"]")),je(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>qt(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>qt(e)).join(",")),"Target(".concat(t,")")}(Mn(e)),"; limitType=").concat(e.limitType,")")}function qn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ie.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ln(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=sn(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ln(e),t))&&!(e.endAt&&!function(e,t,n){const r=sn(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ln(e),t))}(e,t)}function Hn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Kn(e){return(t,n)=>{let r=!1;for(const i of Ln(e)){const e=Wn(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Wn(e,t,n){const r=e.field.isKeyField()?ie.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ut(r,i):D(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return D(19790,{direction:e.dir})}}class Qn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){lt(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return ct(this.inner)}size(){return this.innerSize}}const Gn=new ut(ie.comparator);function $n(){return Gn}const Xn=new ut(ie.comparator);function Yn(){let e=Xn;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Jn(e){let t=Xn;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Zn(){return tr()}function er(){return tr()}function tr(){return new Qn(e=>e.toString(),(e,t)=>e.isEqual(t))}const nr=new ut(ie.comparator),rr=new ft(ie.comparator);function ir(){let e=rr;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const sr=new ft($);function ar(){return sr}function or(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:De(t)?"-0":t}}function lr(e){return{integerValue:""+e}}function cr(e,t){return Pe(t)?lr(t):or(e,t)}class ur{constructor(){this._=void 0}}function hr(e,t,n){return e instanceof pr?function(e,t){const n={fields:{[Et]:{stringValue:St},[_t]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ct(t)&&(t=Nt(t)),t&&(n.fields[kt]=t),{mapValue:n}}(n,t):e instanceof mr?gr(e,t):e instanceof vr?yr(e,t):function(e,t){const n=fr(e,t),r=wr(n)+wr(e.Ae);return Wt(n)&&Wt(e.Ae)?lr(r):or(e.serializer,r)}(e,t)}function dr(e,t,n){return e instanceof mr?gr(e,t):e instanceof vr?yr(e,t):n}function fr(e,t){return e instanceof br?function(e){return Wt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class pr extends ur{}class mr extends ur{constructor(e){super(),this.elements=e}}function gr(e,t){const n=xr(t);for(const r of e.elements)n.some(e=>Ft(e,r))||n.push(r);return{arrayValue:{values:n}}}class vr extends ur{constructor(e){super(),this.elements=e}}function yr(e,t){let n=xr(t);for(const r of e.elements)n=n.filter(e=>!Ft(e,r));return{arrayValue:{values:n}}}class br extends ur{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function wr(e){return wt(e.integerValue||e.doubleValue)}function xr(e){return Qt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Sr{constructor(e,t){this.version=e,this.transformResults=t}}class Er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Er}static exists(e){return new Er(void 0,e)}static updateTime(e){return new Er(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class _r{}function Cr(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Lr(e.key,Er.none()):new jr(e.key,e.data,Er.none());{const n=e.data,r=en.empty();let i=new ft(re.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Dr(e.key,r,new mt(i.toArray()),Er.none())}}function Nr(e,t,n){e instanceof jr?function(e,t,n){const r=e.value.clone(),i=Rr(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Dr?function(e,t,n){if(!kr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Rr(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Pr(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ar(e,t,n,r){return e instanceof jr?function(e,t,n,r){if(!kr(e.precondition,t))return n;const i=e.value.clone(),s=Or(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Dr?function(e,t,n,r){if(!kr(e.precondition,t))return n;const i=Or(e.fieldTransforms,r,t),s=t.data;return s.setAll(Pr(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return kr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Tr(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=fr(r.transform,e||null);null!=i&&(null===n&&(n=en.empty()),n.set(r.field,i))}return n||null}function Ir(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&J(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof mr&&t instanceof mr||e instanceof vr&&t instanceof vr?J(e.elements,t.elements,Ft):e instanceof br&&t instanceof br?Ft(e.Ae,t.Ae):e instanceof pr&&t instanceof pr}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class jr extends _r{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Dr extends _r{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Pr(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Rr(e,t,n){const r=new Map;R(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,dr(a,o,n[i]))}return r}function Or(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,hr(e,s,t))}return r}class Lr extends _r{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Mr extends _r{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Fr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Nr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ar(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ar(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=er();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Cr(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(ge.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ir())}isEqual(e){return this.batchId===e.batchId&&J(this.mutations,e.mutations,(e,t)=>Ir(e,t))&&J(this.baseMutations,e.baseMutations,(e,t)=>Ir(e,t))}}class Vr{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){R(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=nr;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Vr(e,t,n,r)}}class Ur{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class zr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Br,qr;function Hr(e){switch(e){case L.OK:return D(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return D(15467,{code:e})}}function Kr(e){if(void 0===e)return T("GRPC error has no .code"),L.UNKNOWN;switch(e){case Br.OK:return L.OK;case Br.CANCELLED:return L.CANCELLED;case Br.UNKNOWN:return L.UNKNOWN;case Br.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Br.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Br.INTERNAL:return L.INTERNAL;case Br.UNAVAILABLE:return L.UNAVAILABLE;case Br.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Br.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Br.NOT_FOUND:return L.NOT_FOUND;case Br.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Br.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Br.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Br.ABORTED:return L.ABORTED;case Br.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Br.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Br.DATA_LOSS:return L.DATA_LOSS;default:return D(39323,{code:e})}}(qr=Br||(Br={}))[qr.OK=0]="OK",qr[qr.CANCELLED=1]="CANCELLED",qr[qr.UNKNOWN=2]="UNKNOWN",qr[qr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qr[qr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qr[qr.NOT_FOUND=5]="NOT_FOUND",qr[qr.ALREADY_EXISTS=6]="ALREADY_EXISTS",qr[qr.PERMISSION_DENIED=7]="PERMISSION_DENIED",qr[qr.UNAUTHENTICATED=16]="UNAUTHENTICATED",qr[qr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qr[qr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qr[qr.ABORTED=10]="ABORTED",qr[qr.OUT_OF_RANGE=11]="OUT_OF_RANGE",qr[qr.UNIMPLEMENTED=12]="UNIMPLEMENTED",qr[qr.INTERNAL=13]="INTERNAL",qr[qr.UNAVAILABLE=14]="UNAVAILABLE",qr[qr.DATA_LOSS=15]="DATA_LOSS";let Wr=null;function Qr(){return new TextEncoder}const Gr=new r([4294967295,4294967295],0);function $r(e){const t=Qr().encode(e),n=new i;return n.update(t),new Uint8Array(n.digest())}function Xr(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new r([n,i],0),new r([s,a],0)]}class Yr{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Jr("Invalid padding: ".concat(t));if(n<0)throw new Jr("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Jr("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Jr("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=r.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(r.fromNumber(n)));return 1===i.compare(Gr)&&(i=new r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=$r(e),[n,r]=Xr(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Yr(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=$r(e),[n,r]=Xr(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Jr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zr{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ei.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Zr(ge.min(),r,new ut($),$n(),ir())}}class ei{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ei(n,t,ir(),ir(),ir())}}class ti{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class ni{constructor(e,t){this.targetId=e,this.Ce=t}}class ri{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vt.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ii{constructor(){this.ve=0,this.Fe=oi(),this.Me=vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ir(),t=ir(),n=ir();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:D(38017,{changeType:i})}}),new ei(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=oi()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,R(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class si{constructor(e){this.Ge=e,this.ze=new Map,this.je=$n(),this.Je=ai(),this.He=ai(),this.Ye=new ut($)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:D(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(In(s))if(0===n){const e=new ie(s.path);this.et(t,e,nn.newNoDocument(e,ge.min()))}else R(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=Wr)||void 0===i||i.lt(function(e,t,n,r,i){var s,a,o,l,c;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===h||void 0===h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(a=null===h||void 0===h||null===(o=h.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===h||void 0===h||null===(c=h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=xt(n).toUint8Array()}catch(e){if(e instanceof gt)return I("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Yr(s,r,i)}catch(e){return I(e instanceof Jr?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&In(i.target)){const t=new ie(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,nn.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=ir();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Zr(e,t,this.Ye,this.je,n);return this.je=$n(),this.Je=ai(),this.He=ai(),this.Ye=new ut($),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ii,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ft($),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ft($),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||A("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ii),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ai(){return new ut(ie.comparator)}function oi(){return new ut(ie.comparator)}const li={asc:"ASCENDING",desc:"DESCENDING"},ci={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ui={and:"AND",or:"OR"};class hi{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function di(e,t){return e.useProto3Json||je(t)?t:{value:t}}function fi(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function pi(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function mi(e,t){return fi(e,t.toTimestamp())}function gi(e){return R(!!e,49232),ge.fromTimestamp(function(e){const t=bt(e);return new me(t.seconds,t.nanos)}(e))}function vi(e,t){return yi(e,t).canonicalString()}function yi(e,t){const n=function(e){return new te(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function bi(e){const t=te.fromString(e);return R(Vi(t),10190,{key:t.toString()}),t}function wi(e,t){return vi(e.databaseId,t.path)}function xi(e,t){const n=bi(t);if(n.get(1)!==e.databaseId.projectId)throw new M(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new M(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ie(_i(n))}function Si(e,t){return vi(e.databaseId,t)}function Ei(e){const t=bi(e);return 4===t.length?te.emptyPath():_i(t)}function ki(e){return new te(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function _i(e){return R(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Ci(e,t,n){return{name:wi(e,t),fields:n.value.mapValue.fields}}function Ni(e,t){let n;if(t instanceof jr)n={update:Ci(e,t.key,t.value)};else if(t instanceof Lr)n={delete:wi(e,t.key)};else if(t instanceof Dr)n={update:Ci(e,t.key,t.data),updateMask:Fi(t.fieldMask)};else{if(!(t instanceof Mr))return D(16599,{Vt:t.type});n={verify:wi(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof pr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof mr)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof vr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof br)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw D(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:mi(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:D(27497)}(e,t.precondition)),n}function Ai(e,t){return{documents:[Si(e,t.path)]}}function Ti(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Si(e,i);const s=function(e){if(0!==e.length)return Mi(hn.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Oi(e.field),direction:Di(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=di(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Ii(e){let t=Ei(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){R(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=ji(e);return t instanceof hn&&fn(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new on(Li(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,je(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new rn(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new rn(n,t)}(n.endAt)),Dn(t,i,a,s,o,"F",l,c)}function ji(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Li(e.unaryFilter.field);return un.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Li(e.unaryFilter.field);return un.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Li(e.unaryFilter.field);return un.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Li(e.unaryFilter.field);return un.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return D(61313);default:return D(60726)}}(e):void 0!==e.fieldFilter?function(e){return un.create(Li(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return D(58110);default:return D(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return hn.create(e.compositeFilter.filters.map(e=>ji(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return D(1026)}}(e.compositeFilter.op))}(e):D(30097,{filter:e})}function Di(e){return li[e]}function Pi(e){return ci[e]}function Ri(e){return ui[e]}function Oi(e){return{fieldPath:e.canonicalString()}}function Li(e){return re.fromServerFormat(e.fieldPath)}function Mi(e){return e instanceof un?function(e){if("=="===e.op){if($t(e.value))return{unaryFilter:{field:Oi(e.field),op:"IS_NAN"}};if(Gt(e.value))return{unaryFilter:{field:Oi(e.field),op:"IS_NULL"}}}else if("!="===e.op){if($t(e.value))return{unaryFilter:{field:Oi(e.field),op:"IS_NOT_NAN"}};if(Gt(e.value))return{unaryFilter:{field:Oi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oi(e.field),op:Pi(e.op),value:e.value}}}(e):e instanceof hn?function(e){const t=e.getFilters().map(e=>Mi(e));return 1===t.length?t[0]:{compositeFilter:{op:Ri(e.op),filters:t}}}(e):D(54877,{filter:e})}function Fi(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Vi(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ui{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ge.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ge.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vt.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Ui(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ui(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class zi{constructor(e){this.yt=e}}function Bi(e){const t=Ii({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Vn(t,t.limit,"L"):t}class qi{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(wt(e.integerValue));else if("doubleValue"in e){const n=wt(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),De(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=bt(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(xt(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Zt(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Yt(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):D(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Lt,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(wt(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),ie.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}qi.Kt=new qi;class Hi{constructor(){this.Cn=new Ki}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ce.resolve()}getCollectionParents(e,t){return Ce.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ce.resolve()}deleteFieldIndex(e,t){return Ce.resolve()}deleteAllFieldIndexes(e){return Ce.resolve()}createTargetIndexes(e,t){return Ce.resolve()}getDocumentsMatchingTarget(e,t){return Ce.resolve(null)}getIndexType(e,t){return Ce.resolve(0)}getFieldIndexes(e,t){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}getMinOffset(e,t){return Ce.resolve(xe.min())}getMinOffsetFromCollectionGroup(e,t){return Ce.resolve(xe.min())}updateCollectionGroup(e,t,n){return Ce.resolve()}updateIndexEntries(e,t){return Ce.resolve()}}class Ki{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ft(te.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ft(te.comparator)).toArray()}}new Uint8Array(0);const Wi={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qi=41943040;class Gi{static withCacheSize(e){return new Gi(e,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Gi.DEFAULT_COLLECTION_PERCENTILE=10,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gi.DEFAULT=new Gi(Qi,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gi.DISABLED=new Gi(-1,0,0);class $i{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new $i(0)}static cr(){return new $i(-1)}}const Xi="LruGarbageCollector",Yi=1048576;function Ji(e,t){let[n,r]=e,[i,s]=t;const a=$(n,i);return 0===a?$(r,s):a}class Zi{constructor(e){this.Ir=e,this.buffer=new ft(Ji),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Ji(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class es{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){A(Xi,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ae(e)?A(Xi,"Ignoring IndexedDB error during garbage collection: ",e):await _e(e)}await this.Vr(3e5)})}}class ts{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Ce.resolve(Te.ce);const n=new Zi(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(A("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(Wi)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(A("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Wi):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,a,o,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(A("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),N()<=l.$b.DEBUG&&A("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-o)+"ms\n"+"Total Duration: ".concat(c-u,"ms")),Ce.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function ns(e,t){return new ts(e,t)}class rs{constructor(){this.changes=new Qn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ce.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class is{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ss{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ar(n.mutation,e,mt.empty(),me.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ir()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ir();const r=Zn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Yn();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Zn();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ir()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=$n();const s=tr(),a=tr();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Dr)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Ar(a.mutation,t,a.mutation.getFieldMask(),me.now())):s.set(t.key,mt.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new is(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=tr();let r=new ut((e,t)=>e-t),i=ir();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||mt.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||ir()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=er();l.forEach(e=>{if(!i.has(e)){const r=Cr(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Ce.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ie.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):On(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ce.resolve(Zn());let a=ve,o=i;return s.next(t=>Ce.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Ce.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,ir())).next(e=>({batchId:a,changes:Jn(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ie(t)).next(e=>{let t=Yn();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Yn();return this.indexManager.getCollectionParents(e,i).next(a=>Ce.forEach(a,a=>{const o=function(e,t){return new jn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,nn.newInvalidDocument(r)))});let n=Yn();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Ar(s.mutation,r,mt.empty(),me.now()),qn(t,r)&&(n=n.insert(e,r))}),n})}}class as{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ce.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:gi(e.createTime)}}(t)),Ce.resolve()}getNamedQuery(e,t){return Ce.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Bi(e.bundledQuery),readTime:gi(e.readTime)}}(t)),Ce.resolve()}}class os{constructor(){this.overlays=new ut(ie.comparator),this.qr=new Map}getOverlay(e,t){return Ce.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Zn();return Ce.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Ce.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Ce.resolve()}getOverlaysForCollection(e,t,n){const r=Zn(),i=t.length+1,s=new ie(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ce.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ut((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Zn(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Zn(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Ce.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ur(t,n));let i=this.qr.get(t);void 0===i&&(i=ir(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class ls{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return Ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ce.resolve()}}class cs{constructor(){this.Qr=new ft(us.$r),this.Ur=new ft(us.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new us(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new us(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new ie(new te([])),n=new us(t,e),r=new us(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ie(new te([])),n=new us(t,e),r=new us(t,e+1);let i=ir();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new us(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class us{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ie.comparator(e.key,t.key)||$(e.Yr,t.Yr)}static Kr(e,t){return $(e.Yr,t.Yr)||ie.comparator(e.key,t.key)}}class hs{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ft(us.$r)}checkEmpty(e){return Ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Fr(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Zr=this.Zr.add(new us(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ce.resolve(s)}lookupMutationBatch(e,t){return Ce.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Ce.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(0===this.mutationQueue.length?Ie:this.tr-1)}getAllMutationBatches(e){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new us(t,0),r=new us(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Ce.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ft($);return t.forEach(e=>{const t=new us(e,0),r=new us(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Ce.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ie.isDocumentKey(i)||(i=i.child(""));const s=new us(new ie(i),0);let a=new ft($);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},s),Ce.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){R(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Ce.forEach(t.mutations,r=>{const i=new us(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new us(t,0),r=this.Zr.firstAfterOrEqual(n);return Ce.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ce.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ds{constructor(e){this.ri=e,this.docs=new ut(ie.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ce.resolve(n?n.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let n=$n();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():nn.newInvalidDocument(e))}),Ce.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=$n();const s=t.path,a=new ie(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Se(we(a),n)<=0||(r.has(a.key)||qn(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Ce.resolve(i)}getAllFromCollectionGroup(e,t,n,r){D(9500)}ii(e,t){return Ce.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new fs(this)}getSize(e){return Ce.resolve(this.size)}}class fs extends rs{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Ce.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class ps{constructor(e){this.persistence=e,this.si=new Qn(e=>An(e),Tn),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.oi=0,this._i=new cs,this.targetCount=0,this.ai=$i.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ce.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new $i(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ce.resolve()}updateTargetData(e,t){return this.Pr(t),Ce.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Ce.waitFor(i).next(()=>r)}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ce.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ce.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Ce.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ce.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ce.resolve(n)}containsKey(e,t){return Ce.resolve(this._i.containsKey(t))}}class ms{constructor(e,t){this.ui={},this.overlays={},this.ci=new Te(0),this.li=!1,this.li=!0,this.hi=new ls,this.referenceDelegate=e(this),this.Pi=new ps(this),this.indexManager=new Hi,this.remoteDocumentCache=function(e){return new ds(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new zi(t),this.Ii=new as(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new os,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new hs(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){A("MemoryPersistence","Starting transaction:",e);const r=new gs(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Ce.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class gs extends ke{constructor(e){super(),this.currentSequenceNumber=e}}class vs{constructor(e){this.persistence=e,this.Ri=new cs,this.Vi=null}static mi(e){return new vs(e)}get fi(){if(this.Vi)return this.Vi;throw D(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ce.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ce.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ce.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.fi,n=>{const r=ie.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ge.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ce.or([()=>Ce.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ys{constructor(e,t){this.persistence=e,this.pi=new Qn(e=>Oe(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=ns(this,t)}static mi(e,t){return new ys(e,t)}Ei(){}di(e){return Ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Ce.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Ce.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,ge.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ce.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ce.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ce.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ce.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kt(e.data.value)),t}br(e,t,n){return Ce.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Ce.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class bs{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=ir(),r=ir();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new bs(e,t.fromCache,n,r)}}class ws{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class xs{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(0,c.nr)()?8:Ne((0,c.ZQ)())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new ws;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(N()<=l.$b.DEBUG&&A("QueryEngine","SDK will not create cache indexes for query:",Bn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ce.resolve()):(N()<=l.$b.DEBUG&&A("QueryEngine","Query:",Bn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(N()<=l.$b.DEBUG&&A("QueryEngine","The SDK decides to create cache indexes for query:",Bn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mn(t))):Ce.resolve())}ys(e,t){if(Rn(t))return Ce.resolve(null);let n=Mn(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Vn(t,null,"F"),n=Mn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=ir(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,Vn(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return Rn(t)||r.isEqual(ge.min())?Ce.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?Ce.resolve(null):(N()<=l.$b.DEBUG&&A("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Bn(t)),this.vs(e,s,t,be(r,ve)).next(e=>e))})}Ds(e,t){let n=new ft(Kn(e));return t.forEach((t,r)=>{qn(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return N()<=l.$b.DEBUG&&A("QueryEngine","Using full collection scan to execute query:",Bn(t)),this.ps.getDocumentsMatchingQuery(e,t,xe.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Ss="LocalStore";class Es{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new ut($),this.xs=new Qn(e=>An(e),Tn),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ss(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function ks(e,t,n,r){return new Es(e,t,n,r)}async function _s(e,t){const n=O(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=ir();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function Cs(e){const t=O(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Ns(e,t,n){let r=ir(),i=ir();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=$n();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ge.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):A(Ss,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{ks:r,qs:i}})}function As(e,t){const n=O(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Ie),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Ts(e,t){const n=O(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Ce.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Ui(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Is(e,t,n){const r=O(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Ae(e))throw e;A(Ss,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function js(e,t,n){const r=O(e);let i=ge.min(),s=ir();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=O(e),i=r.xs.get(n);return void 0!==i?Ce.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Mn(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:ge.min(),n?s:ir())).next(e=>(Ds(r,Hn(t),e),{documents:e,Qs:s})))}function Ds(e,t,n){let r=e.Os.get(t)||ge.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Ps{constructor(){this.activeTargetIds=ar()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rs{constructor(){this.Mo=new Ps,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ps,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Os{Oo(e){}shutdown(){}}const Ls="ConnectivityMonitor";class Ms{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){A(Ls,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){A(Ls,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Fs=null;function Vs(){return null===Fs?Fs=268435456+Math.round(2147483648*Math.random()):Fs++,"0x"+Fs.toString(16)}const Us="RestConnection",zs={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bs{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===It?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=Vs(),a=this.zo(e,t.toUriEncodedString());A(Us,"Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,i);const{host:l}=new URL(a),u=(0,c.zJ)(l);return this.Jo(e,a,o,n,u).then(t=>(A(Us,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw I(Us,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=zs[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class qs{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Hs="WebChannelConnection";class Ks extends Bs{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=Vs();return new Promise((i,a)=>{const o=new d;o.setWithCredentials(!0),o.listenOnce(p.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case m.NO_ERROR:const n=o.getResponseJson();A(Hs,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case m.TIMEOUT:A(Hs,"RPC '".concat(e,"' ").concat(s," timed out")),a(new M(L.DEADLINE_EXCEEDED,"Request time out"));break;case m.HTTP_ERROR:const r=o.getStatus();if(A(Hs,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(t)>=0?t:L.UNKNOWN}(n.status);a(new M(e,n.message))}else a(new M(L.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new M(L.UNAVAILABLE,"Connection failed."));break;default:D(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{A(Hs,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);A(Hs,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Vs(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=b(),a=y(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");A(Hs,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=s.createWebChannel(c,o);this.I_(u);let h=!1,d=!1;const p=new qs({Yo:t=>{d?A(Hs,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(A(Hs,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),A(Hs,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,f.EventType.OPEN,()=>{d||(A(Hs,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),p.o_())}),m(u,f.EventType.CLOSE,()=>{d||(d=!0,A(Hs,"RPC '".concat(e,"' stream ").concat(r," transport closed")),p.a_(),this.E_(u))}),m(u,f.EventType.ERROR,t=>{d||(d=!0,I(Hs,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),p.a_(new M(L.UNAVAILABLE,"The operation could not be completed")))}),m(u,f.EventType.MESSAGE,t=>{if(!d){var n;const i=t.data[0];R(!!i,16349);const s=i,a=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){A(Hs,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Br[e];if(void 0!==t)return Kr(t)}(t),i=a.message;void 0===n&&(n=L.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),d=!0,p.a_(new M(n,i)),u.close()}else A(Hs,"RPC '".concat(e,"' stream ").concat(r," received:"),i),p.u_(i)}}),m(a,v.STAT_EVENT,t=>{t.stat===g.PROXY?A(Hs,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===g.NOPROXY&&A(Hs,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Ws(){return"undefined"!=typeof document?document:null}function Qs(e){return new hi(e,!0)}class Gs{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&A("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const $s="PersistentStream";class Xs{constructor(e,t,n,r,i,s,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Gs(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(T(t.toString()),T("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===L.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new M(L.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return A($s,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(A($s,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ys extends Xs{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:D(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(R(void 0===t||"string"==typeof t,58123),vt.fromBase64String(t||"")):(R(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),vt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?L.UNKNOWN:Kr(e.code);return new M(t,e.message||"")}(a);n=new ri(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=xi(e,r.document.name),s=gi(r.document.updateTime),a=r.document.createTime?gi(r.document.createTime):ge.min(),o=new en({mapValue:{fields:r.document.fields}}),l=nn.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ti(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=xi(e,r.document),s=r.readTime?gi(r.readTime):ge.min(),a=nn.newNoDocument(i,s),o=r.removedTargetIds||[];n=new ti([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=xi(e,r.document),s=r.removedTargetIds||[];n=new ti([],s,i,null)}else{if(!("filter"in t))return D(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new zr(r,i),a=e.targetId;n=new ni(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ge.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ge.min():t.readTime?gi(t.readTime):ge.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=ki(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=In(r)?{documents:Ai(e,r)}:{query:Ti(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=pi(e,t.resumeToken);const r=di(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ge.min())>0){n.readTime=fi(e,t.snapshotVersion.toTimestamp());const r=di(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return D(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=ki(this.serializer),t.removeTarget=e,this.q_(t)}}class Js extends Xs{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return R(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,R(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){R(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(R(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?gi(e.updateTime):gi(t);return n.isEqual(ge.min())&&(n=gi(t)),new Sr(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=gi(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=ki(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ni(this.serializer,e))};this.q_(t)}}class Zs{}class ea extends Zs{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new M(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Go(e,yi(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new M(L.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Ho(e,yi(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new M(L.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ta{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(T(t),this.aa=!1):A("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const na="RemoteStore";class ra{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{da(this)&&(A(na,"Restarting streams for network reachability change."),await async function(e){const t=O(e);t.Ea.add(4),await sa(t),t.Ra.set("Unknown"),t.Ea.delete(4),await ia(t)}(this))})}),this.Ra=new ta(n,r)}}async function ia(e){if(da(e))for(const t of e.da)await t(!0)}async function sa(e){for(const t of e.da)await t(!1)}function aa(e,t){const n=O(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),ha(n)?ua(n):ja(n).O_()&&la(n,t))}function oa(e,t){const n=O(e),r=ja(n);n.Ia.delete(t),r.O_()&&ca(n,t),0===n.Ia.size&&(r.O_()?r.L_():da(n)&&n.Ra.set("Unknown"))}function la(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ge.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ja(e).Y_(t)}function ca(e,t){e.Va.Ue(t),ja(e).Z_(t)}function ua(e){e.Va=new si({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),ja(e).start(),e.Ra.ua()}function ha(e){return da(e)&&!ja(e).x_()&&e.Ia.size>0}function da(e){return 0===O(e).Ea.size}function fa(e){e.Va=void 0}async function pa(e){e.Ra.set("Online")}async function ma(e){e.Ia.forEach((t,n)=>{la(e,t)})}async function ga(e,t){fa(e),ha(e)?(e.Ra.ha(t),ua(e)):e.Ra.set("Unknown")}async function va(e,t,n){if(e.Ra.set("Online"),t instanceof ri&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){A(na,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ya(e,n)}else if(t instanceof ti?e.Va.Ze(t):t instanceof ni?e.Va.st(t):e.Va.tt(t),!n.isEqual(ge.min()))try{const t=await Cs(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(vt.EMPTY_BYTE_STRING,r.snapshotVersion)),ca(e,t);const i=new Ui(r.target,t,n,r.sequenceNumber);la(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){A(na,"Failed to raise snapshot:",t),await ya(e,t)}}async function ya(e,t,n){if(!Ae(t))throw t;e.Ea.add(1),await sa(e),e.Ra.set("Offline"),n||(n=()=>Cs(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{A(na,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await ia(e)})}function ba(e,t){return t().catch(n=>ya(e,n,t))}async function wa(e){const t=O(e),n=Da(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ie;for(;xa(t);)try{const e=await As(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Sa(t,e)}catch(e){await ya(t,e)}Ea(t)&&ka(t)}function xa(e){return da(e)&&e.Ta.length<10}function Sa(e,t){e.Ta.push(t);const n=Da(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Ea(e){return da(e)&&!Da(e).x_()&&e.Ta.length>0}function ka(e){Da(e).start()}async function _a(e){Da(e).ra()}async function Ca(e){const t=Da(e);for(const n of e.Ta)t.ea(n.mutations)}async function Na(e,t,n){const r=e.Ta.shift(),i=Vr.from(r,t,n);await ba(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await wa(e)}async function Aa(e,t){t&&Da(e).X_&&await async function(e,t){if(function(e){return Hr(e)&&e!==L.ABORTED}(t.code)){const n=e.Ta.shift();Da(e).B_(),await ba(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await wa(e)}}(e,t),Ea(e)&&ka(e)}async function Ta(e,t){const n=O(e);n.asyncQueue.verifyOperationInProgress(),A(na,"RemoteStore received new credentials");const r=da(n);n.Ea.add(3),await sa(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await ia(n)}async function Ia(e,t){const n=O(e);t?(n.Ea.delete(2),await ia(n)):t||(n.Ea.add(2),await sa(n),n.Ra.set("Unknown"))}function ja(e){return e.ma||(e.ma=function(e,t,n){const r=O(e);return r.sa(),new Ys(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:pa.bind(null,e),t_:ma.bind(null,e),r_:ga.bind(null,e),H_:va.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),ha(e)?ua(e):e.Ra.set("Unknown")):(await e.ma.stop(),fa(e))})),e.ma}function Da(e){return e.fa||(e.fa=function(e,t,n){const r=O(e);return r.sa(),new Js(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:_a.bind(null,e),r_:Aa.bind(null,e),ta:Ca.bind(null,e),na:Na.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await wa(e)):(await e.fa.stop(),e.Ta.length>0&&(A(na,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Pa{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new F,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Pa(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new M(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ra(e,t){if(T("AsyncQueue","".concat(t,": ").concat(e)),Ae(e))return new M(L.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Oa{static emptySet(e){return new Oa(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ie.comparator(t.key,n.key):(e,t)=>ie.comparator(e.key,t.key),this.keyedMap=Yn(),this.sortedSet=new ut(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Oa))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Oa;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class La{constructor(){this.ga=new ut(ie.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):D(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Ma{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Ma(e,t,Oa.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Un(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Fa{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Va{constructor(){this.queries=Ua(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=O(e),r=n.queries;n.queries=Ua(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new M(L.ABORTED,"Firestore shutting down"))}}function Ua(){return new Qn(e=>zn(e),Un)}async function za(e,t){const n=O(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new Fa,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Ra(e,"Initialization of query '".concat(Bn(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&Ka(n)}async function Ba(e,t){const n=O(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function qa(e,t){const n=O(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&Ka(n)}function Ha(e,t,n){const r=O(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function Ka(e){e.Ca.forEach(e=>{e.next()})}var Wa,Qa;(Qa=Wa||(Wa={})).Ma="default",Qa.Cache="cache";class Ga{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ma(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Wa.Cache}}class $a{constructor(e){this.key=e}}class Xa{constructor(e){this.key=e}}class Ya{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ir(),this.mutatedKeys=ir(),this.eu=Kn(e),this.tu=new Oa(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new La,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=qn(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return D(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==s.length||l?{snapshot:new Ma(this.query,e.tu,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new La,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ir(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Xa(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new $a(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=ir();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ma.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Ja="SyncEngine";class Za{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class eo{constructor(e){this.key=e,this.hu=!1}}class to{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Qn(e=>zn(e),Un),this.Iu=new Map,this.Eu=new Set,this.du=new ut(ie.comparator),this.Au=new Map,this.Ru=new cs,this.Vu={},this.mu=new Map,this.fu=$i.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function no(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=ko(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await io(r,t,n,!0),i}async function ro(e,t){const n=ko(e);await io(n,t,!0,!1)}async function io(e,t,n,r){const i=await Ts(e.localStore,Mn(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await so(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&aa(e.remoteStore,i),o}async function so(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await js(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return yo(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const s=await js(e.localStore,t,!0),a=new Ya(t,s.Qs),o=a.ru(s.documents),l=ei.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);yo(e,n,c.au);const u=new Za(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function ao(e,t,n){const r=O(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!Un(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Is(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&oa(r.remoteStore,i.targetId),go(r,i.targetId)}).catch(_e)):(go(r,i.targetId),await Is(r.localStore,i.targetId,!0))}async function oo(e,t){const n=O(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),oa(n.remoteStore,r.targetId))}async function lo(e,t){const n=O(e);try{const e=await function(e,t){const n=O(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(vt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&a.push(n.Pi.updateTargetData(e,c))});let o=$n(),l=ir();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Ns(e,s,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(ge.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Ce.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(R(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?R(r.hu,14607):e.removedDocuments.size>0&&(R(r.hu,42227),r.hu=!1))}),await xo(n,e,t)}catch(e){await _e(e)}}function co(e,t,n){const r=O(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=O(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&Ka(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function uo(e,t,n){const r=O(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new ut(ie.comparator);e=e.insert(s,nn.newNoDocument(s,ge.min()));const n=ir().add(s),i=new Zr(ge.min(),new Map,new ut($),e,n);await lo(r,i),r.du=r.du.remove(s),r.Au.delete(t),wo(r)}else await Is(r.localStore,t,!1).then(()=>go(r,t,n)).catch(_e)}async function ho(e,t){const n=O(e),r=t.batch.batchId;try{const e=await function(e,t){const n=O(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Ce.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);R(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ir();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);mo(n,r,null),po(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xo(n,e)}catch(e){await _e(e)}}async function fo(e,t,n){const r=O(e);try{const e=await function(e,t){const n=O(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(R(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);mo(r,t,n),po(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await xo(r,e)}catch(n){await _e(n)}}function po(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function mo(e,t,n){const r=O(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function go(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||vo(e,t)})}function vo(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(oa(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),wo(e))}function yo(e,t,n){for(const r of n)r instanceof $a?(e.Ru.addReference(r.key,t),bo(e,r)):r instanceof Xa?(A(Ja,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||vo(e,r.key)):D(19791,{wu:r})}function bo(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(A(Ja,"New document in limbo: "+n),e.Eu.add(r),wo(e))}function wo(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ie(te.fromString(t)),r=e.fu.next();e.Au.set(r,new eo(n)),e.du=e.du.insert(n,r),aa(e.remoteStore,new Ui(Mn(Pn(n.path)),r,"TargetPurposeLimboResolution",Te.ce))}}async function xo(e,t,n){const r=O(e),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=bs.As(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=O(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ce.forEach(t,t=>Ce.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Ce.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ae(e))throw e;A(Ss,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function So(e,t){const n=O(e);if(!n.currentUser.isEqual(t)){A(Ja,"User change. New user:",t.toKey());const e=await _s(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new M(L.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await xo(n,e.Ls)}}function Eo(e,t){const n=O(e),r=n.Au.get(t);if(r&&r.hu)return ir().add(r.key);{let e=ir();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function ko(e){const t=O(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=lo.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Eo.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=uo.bind(null,t),t.Pu.H_=qa.bind(null,t.eventManager),t.Pu.yu=Ha.bind(null,t.eventManager),t}function _o(e){const t=O(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ho.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=fo.bind(null,t),t}class Co{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qs(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ks(this.persistence,new xs,e.initialUser,this.serializer)}Cu(e){return new ms(vs.mi,this.serializer)}Du(e){return new Rs}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Co.provider={build:()=>new Co};class No extends Co{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){R(this.persistence.referenceDelegate instanceof ys,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new es(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Gi.withCacheSize(this.cacheSizeBytes):Gi.DEFAULT;return new ms(e=>ys.mi(e,t),this.serializer)}}class Ao{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>co(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=So.bind(null,this.syncEngine),await Ia(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Va}createDatastore(e){const t=Qs(e.databaseInfo.databaseId),n=function(e){return new Ks(e)}(e.databaseInfo);return function(e,t,n,r){return new ea(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new ra(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>co(this.syncEngine,e,0),Ms.v()?new Ms:new Os)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new to(e,t,n,r,i,s);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=O(e);A(na,"RemoteStore shutting down."),t.Ea.add(5),await sa(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Ao.provider={build:()=>new Ao};class To{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):T("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Io="FirestoreClient";class jo{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=k.UNAUTHENTICATED,this.clientId=G.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{A(Io,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(A(Io,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new F;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ra(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Do(e,t){e.asyncQueue.verifyOperationInProgress(),A(Io,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await _s(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Po(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ro(e);A(Io,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ta(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ta(t.remoteStore,n)),e._onlineComponents=t}async function Ro(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){A(Io,"Using user provided OfflineComponentProvider");try{await Do(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===L.FAILED_PRECONDITION||e.code===L.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;I("Error using user provided cache. Falling back to memory cache: "+n),await Do(e,new Co)}}else A(Io,"Using default OfflineComponentProvider"),await Do(e,new No(void 0));return e._offlineComponents}async function Oo(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(A(Io,"Using user provided OnlineComponentProvider"),await Po(e,e._uninitializedComponentsProvider._online)):(A(Io,"Using default OnlineComponentProvider"),await Po(e,new Ao))),e._onlineComponents}function Lo(e){return Oo(e).then(e=>e.syncEngine)}async function Mo(e){const t=await Oo(e),n=t.eventManager;return n.onListen=no.bind(null,t.syncEngine),n.onUnlisten=ao.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ro.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=oo.bind(null,t.syncEngine),n}function Fo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new F;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new To({next:o=>{s.Nu(),t.enqueueAndForget(()=>Ba(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new M(L.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new M(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new Ga(Pn(n.path),s,{includeMetadataChanges:!0,qa:!0});return za(e,a)}(await Mo(e),e.asyncQueue,t,n,r)),r.promise}function Vo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new F;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new To({next:n=>{s.Nu(),t.enqueueAndForget(()=>Ba(e,a)),n.fromCache&&"server"===r.source?i.reject(new M(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Ga(n,s,{includeMetadataChanges:!0,qa:!0});return za(e,a)}(await Mo(e),e.asyncQueue,t,n,r)),r.promise}function Uo(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const zo=new Map,Bo="firestore.googleapis.com",qo=!0;class Ho{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new M(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Bo,this.ssl=qo}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:qo;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Qi;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Yi)throw new M(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new M(L.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Uo(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new M(L.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new M(L.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new M(L.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ko{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ho({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new M(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new M(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ho(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new U;switch(e.type){case"firstParty":return new H(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new M(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zo.get(e);t&&(A("ComponentProvider","Removing Datastore"),zo.delete(e),t.terminate())}(this),Promise.resolve()}}class Wo{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Wo(this.firestore,e,this._query)}}class Qo{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qo(this.firestore,e,this._key)}toJSON(){return{type:Qo._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(de(t,Qo._jsonSchema))return new Qo(e,n||null,new ie(te.fromString(t.referencePath)))}}Qo._jsonSchemaVersion="firestore/documentReference/1.0",Qo._jsonSchema={type:he("string",Qo._jsonSchemaVersion),referencePath:he("string")};class Go extends Wo{constructor(e,t,n){super(e,t,Pn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qo(this.firestore,null,new ie(e))}withConverter(e){return new Go(this.firestore,e,this._path)}}function $o(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,c.Ku)(e),se("collection","path",t),e instanceof Ko){const n=te.fromString(t,...r);return oe(n),new Go(e,null,n)}{if(!(e instanceof Qo||e instanceof Go))throw new M(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(te.fromString(t,...r));return oe(n),new Go(e.firestore,null,n)}}function Xo(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,c.Ku)(e),1===arguments.length&&(t=G.newId()),se("doc","path",t),e instanceof Ko){const n=te.fromString(t,...r);return ae(n),new Qo(e,null,new ie(n))}{if(!(e instanceof Qo||e instanceof Go))throw new M(L.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(te.fromString(t,...r));return ae(n),new Qo(e.firestore,e instanceof Go?e.converter:null,new ie(n))}}const Yo="AsyncQueue";class Jo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Gs(this,"async_queue_retry"),this._c=()=>{const e=Ws();e&&A(Yo,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Ws();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ws();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new F;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ae(e))throw e;A(Yo,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,T("INTERNAL UNHANDLED ERROR: ",Zo(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Pa.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&D(47125,{Pc:Zo(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Zo(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function el(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class tl extends Ko{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Jo,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jo(e),this._firestoreClient=void 0,await e}}}function nl(e,t){const n="object"==typeof e?e:(0,a.Sx)(),r="string"==typeof e?e:t||It,i=(0,a.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(0,c.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=ue(e,Ko);const i=(0,c.zJ)(t),a=e._getSettings(),o=(0,s.A)((0,s.A)({},a),{},{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);i&&((0,c.gE)("https://".concat(l)),(0,c.P1)("Firestore",!0)),a.host!==Bo&&a.host!==l&&I("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=(0,s.A)((0,s.A)({},a),{},{host:l,ssl:i,emulatorOptions:r});if(!(0,c.bD)(u,o)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=k.MOCK_USER;else{var h;t=(0,c.Fy)(r.mockUserToken,null===(h=e._app)||void 0===h?void 0:h.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new M(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new k(i)}e._authCredentials=new z(new V(t,n))}}(i,...e)}return i}function rl(e){if(e._terminated)throw new M(L.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||il(e),e._firestoreClient}function il(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Tt(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Uo(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new jo(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class sl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sl(vt.fromBase64String(e))}catch(e){throw new M(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new sl(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(de(e,sl._jsonSchema))return sl.fromBase64String(e.bytes)}}sl._jsonSchemaVersion="firestore/bytes/1.0",sl._jsonSchema={type:he("string",sl._jsonSchemaVersion),bytes:he("string")};class al{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new M(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new re(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ol{constructor(e){this._methodName=e}}class ll{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new M(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $(this._lat,e._lat)||$(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ll._jsonSchemaVersion}}static fromJSON(e){if(de(e,ll._jsonSchema))return new ll(e.latitude,e.longitude)}}ll._jsonSchemaVersion="firestore/geoPoint/1.0",ll._jsonSchema={type:he("string",ll._jsonSchemaVersion),latitude:he("number"),longitude:he("number")};class cl{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:cl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(de(e,cl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new cl(e.vectorValues);throw new M(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}cl._jsonSchemaVersion="firestore/vectorValue/1.0",cl._jsonSchema={type:he("string",cl._jsonSchemaVersion),vectorValues:he("object")};const ul=/^__.*__$/;class hl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Dr(e,this.data,this.fieldMask,t,this.fieldTransforms):new jr(e,this.data,t,this.fieldTransforms)}}function dl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw D(40011,{Ac:e})}}class fl{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new fl((0,s.A)((0,s.A)({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return kl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(dl(this.Ac)&&ul.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class pl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Qs(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new fl({Ac:e,methodName:t,Dc:n,path:re.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ml(e){const t=e._freezeSettings(),n=Qs(e._databaseId);return new pl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function gl(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);wl("Data must be an object, but it was:",a,r);const o=yl(r,a);let l,c;if(s.merge)l=new mt(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=xl(t,r,n);if(!a.contains(i))throw new M(L.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));_l(e,i)||e.push(i)}l=new mt(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new hl(new en(o),l,c)}function vl(e,t){if(bl(e=(0,c.Ku)(e)))return wl("Unsupported field value:",t,e),yl(e,t);if(e instanceof ol)return function(e,t){if(!dl(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=vl(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,c.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return cr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=me.fromDate(e);return{timestampValue:fi(t.serializer,n)}}if(e instanceof me){const n=new me(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:fi(t.serializer,n)}}if(e instanceof ll)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof sl)return{bytesValue:pi(t.serializer,e._byteString)};if(e instanceof Qo){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:vi(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof cl)return function(e,t){return{mapValue:{fields:{[Dt]:{stringValue:Ot},[Lt]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return or(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(ce(e)))}(e,t)}function yl(e,t){const n={};return ct(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):lt(e,(e,r)=>{const i=vl(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function bl(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof me||e instanceof ll||e instanceof sl||e instanceof Qo||e instanceof ol||e instanceof cl)}function wl(e,t,n){if(!bl(n)||!le(n)){const r=ce(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function xl(e,t,n){if((t=(0,c.Ku)(t))instanceof al)return t._internalPath;if("string"==typeof t)return El(e,t);throw kl("Field path arguments must be of type string or ",e,!1,void 0,n)}const Sl=new RegExp("[~\\*/\\[\\]]");function El(e,t,n){if(t.search(Sl)>=0)throw kl("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new al(...t.split("."))._internalPath}catch(r){throw kl("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function kl(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new M(L.INVALID_ARGUMENT,o+e+l)}function _l(e,t){return e.some(e=>e.isEqual(t))}class Cl{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Nl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Al("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Nl extends Cl{data(){return super.data()}}function Al(e,t){return"string"==typeof t?El(e,t):t instanceof al?t._internalPath:t._delegate._internalPath}function Tl(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new M(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Il{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Mt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw D(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return lt(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Lt].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>wt(e.doubleValue));return new cl(n)}convertGeoPoint(e){return new ll(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Nt(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(At(e));default:return null}}convertTimestamp(e){const t=bt(e);return new me(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=te.fromString(e);R(Vi(n),9688,{name:e});const r=new jt(n.get(1),n.get(3)),i=new ie(n.popFirst(5));return r.isEqual(t)||T("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function jl(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Dl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pl extends Cl{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Rl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Al("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new M(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Pl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Pl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Pl._jsonSchema={type:he("string",Pl._jsonSchemaVersion),bundleSource:he("string","DocumentSnapshot"),bundleName:he("string"),bundle:he("string")};class Rl extends Pl{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Ol{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Dl(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Rl(this._firestore,this._userDataWriter,n.key,n,new Dl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new M(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Rl(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Dl(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Rl(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Dl(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Ll(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new M(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ol._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=G.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ll(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return D(61501,{type:e})}}function Ml(e){e=ue(e,Qo);const t=ue(e.firestore,tl);return Fo(rl(t),e._key).then(n=>Hl(t,e,n))}Ol._jsonSchemaVersion="firestore/querySnapshot/1.0",Ol._jsonSchema={type:he("string",Ol._jsonSchemaVersion),bundleSource:he("string","QuerySnapshot"),bundleName:he("string"),bundle:he("string")};class Fl extends Il{constructor(e){super(),this.firestore=e}convertBytes(e){return new sl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qo(this.firestore,null,t)}}function Vl(e){e=ue(e,Wo);const t=ue(e.firestore,tl),n=rl(t),r=new Fl(t);return Tl(e._query),Vo(n,e._query).then(n=>new Ol(t,r,e,n))}function Ul(e,t,n){e=ue(e,Qo);const r=ue(e.firestore,tl),i=jl(e.converter,t,n);return ql(r,[gl(ml(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Er.none())])}function zl(e){return ql(ue(e.firestore,tl),[new Lr(e._key,Er.none())])}function Bl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=(0,c.Ku)(e);let i={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof n[s]||el(n[s])||(i=n[s++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(el(n[s])){var o,l,u;const e=n[s];n[s]=null===(o=e.next)||void 0===o?void 0:o.bind(e),n[s+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[s+2]=null===(u=e.complete)||void 0===u?void 0:u.bind(e)}let h,d,f;if(e instanceof Qo)d=ue(e.firestore,tl),f=Pn(e._key.path),h={next:t=>{n[s]&&n[s](Hl(d,e,t))},error:n[s+1],complete:n[s+2]};else{const t=ue(e,Wo);d=ue(t.firestore,tl),f=t._query;const r=new Fl(d);h={next:e=>{n[s]&&n[s](new Ol(d,r,t,e))},error:n[s+1],complete:n[s+2]},Tl(e._query)}return function(e,t,n,r){const i=new To(r),s=new Ga(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>za(await Mo(e),s)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>Ba(await Mo(e),s))}}(rl(d),f,a,h)}function ql(e,t){return function(e,t){const n=new F;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=_o(e);try{const e=await function(e,t){const n=O(e),r=me.now(),i=t.reduce((e,t)=>e.add(t.key),ir());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=$n(),l=ir();return n.Ns.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=Tr(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Dr(e.key,t,tn(t.value.mapValue),Er.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Jn(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new ut($)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await xo(r,e.changes),await wa(r.remoteStore)}catch(e){const t=Ra(e,"Failed to persist write");n.reject(t)}}(await Lo(e),t,n)),n.promise}(rl(e),t)}function Hl(e,t,n){const r=n.docs.get(t._key),i=new Fl(e);return new Pl(e,i,t._key,r,new Dl(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){_=e}(a.MF),(0,a.om)(new o.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const a=e.getProvider("app").getImmediate(),o=new tl(new B(e.getProvider("auth-internal")),new W(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new M(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jt(e.options.projectId,t)}(a,r),a);return i=(0,s.A)({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),(0,a.KO)(S,E,e),(0,a.KO)(S,E,"esm2020")}()},340(e,t,n){e.exports=n(761)},345(e,t,n){var r=n(950),i=n(340);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),N=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var V=!1;function U(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case _:return"Profiler";case k:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ee=null,ke=null;function _e(e){if(e=bi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),Se(e.stateNode,e.type,t))}}function Ce(e){Ee?ke?ke.push(e):ke=[e]:Ee=e}function Ne(){if(Ee){var e=Ee,t=ke;if(ke=Ee=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ae(e,t){return e(t)}function Te(){}var Ie=!1;function je(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Ae(e,t,n)}finally{Ie=!1,(null!==Ee||null!==ke)&&(Te(),Ne())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Pe=!1}function Oe(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,Ve=null,Ue={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,i,s,a,o,l){Le=!1,Me=null,Oe.apply(Ue,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(s(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Qe=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Ye=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ht(o):0!==(s&=a)&&(r=ht(s))}else 0!==(a=n&~i)?r=ht(a):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,St,Et,kt,_t,Ct=!1,Nt=[],At=null,Tt=null,It=null,jt=new Map,Dt=new Map,Pt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void _t(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Ct=!1,null!==At&&Ft(At)&&(At=null),null!==Tt&&Ft(Tt)&&(Tt=null),null!==It&&Ft(It)&&(It=null),jt.forEach(Vt),Dt.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return zt(t,e)}if(0<Nt.length){zt(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&zt(At,e),null!==Tt&&zt(Tt,e),null!==It&&zt(It,e),jt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var qt=w.ReactCurrentBatchConfig,Ht=!0;function Kt(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=1,Qt(e,t,n,r)}finally{bt=i,qt.transition=s}}function Wt(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=4,Qt(e,t,n,r)}finally{bt=i,qt.transition=s}}function Qt(e,t,n,r){if(Ht){var i=$t(e,t,n,r);if(null===i)Hr(e,t,r,Gt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Lt(At,e,t,n,r,i),!0;case"dragenter":return Tt=Lt(Tt,e,t,n,r,i),!0;case"mouseover":return It=Lt(It,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return jt.set(s,Lt(jt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dt.set(s,Lt(Dt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&xt(s),null===(s=$t(e,t,n,r))&&Hr(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Gt=null;function $t(e,t,n,r){if(Gt=null,null!==(e=yi(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=M({},cn,{view:0,detail:0}),dn=sn(hn),fn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},hn,{relatedTarget:0})),vn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(yn),wn=sn(M({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function _n(){return kn}var Cn=M({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=sn(Cn),An=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=sn(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),In=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(jn),Pn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Mn=u&&(!Rn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Vn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ce(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Qn=null;function Gn(e){Fr(e,0)}function $n(e){if(Q(wi(e)))return e}function Xn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Qn=Wn=null)}function nr(e){if("value"===e.propertyName&&$n(Qn)){var t=[];Kn(t,Qn,e,xe(e)),je(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Qn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Qn)}function sr(e,t){if("click"===e)return $n(t)}function ar(e,t){if("input"===e||"change"===e)return $n(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Er={},kr={};function _r(e){if(Er[e])return Er[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Er[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Cr=_r("animationend"),Nr=_r("animationiteration"),Ar=_r("animationstart"),Tr=_r("transitionend"),Ir=new Map,jr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ir.set(e,t),l(t,[e])}for(var Pr=0;Pr<jr.length;Pr++){var Rr=jr[Pr];Dr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Dr(Cr,"onAnimationEnd"),Dr(Nr,"onAnimationIteration"),Dr(Ar,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,o,c),s=l}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function Vr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Ur("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Kt;break;case 4:i=Wt;break;default:i=Qt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}je(function(){var r=s,i=xe(n),a=[];e:{var o=Ir.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Cr:case Nr:case Ar:l=vn;break;case Tr:l=In;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=De(p,d))&&u.push(Kr(p,m,f)))),h)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:wi(l),f=null==c?o:wi(c),(o=new u(m,p+"leave",l,n,i)).target=h,o.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Qr(f))p++;for(f=0,m=d;m;m=Qr(m))f++;for(;0<p-f;)u=Qr(u),p--;for(;0<f-p;)d=Qr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Qr(u),d=Qr(d)}u=null}else u=null;null!==l&&Gr(a,o,l,u,!1),null!==c&&null!==h&&Gr(a,h,c,u,!0)}if("select"===(l=(o=r?wi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(Hn(o))if(Yn)g=ar;else{g=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Kn(a,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?wi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(a,n,i)}var y;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(y=en()):(Jt="value"in(Yt=i)?Yt.value:Yt.textContent,Bn=!0)),0<(v=Wr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:v}),y?b.data=y:null!==(y=zn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Rn&&Un(e,t)?(e=en(),Zt=Jt=Yt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Fr(a,t)})}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=De(e,n))&&r.unshift(Kr(e,s,i)),null!=(s=De(e,t))&&r.push(Kr(e,s,i))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=De(n,s))&&a.unshift(Kr(n,l,o)):i||null!=(l=De(n,s))&&a.push(Kr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var $r=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[fi]||null}var Si=[],Ei=-1;function ki(e){return{current:e}}function _i(e){0>Ei||(e.current=Si[Ei],Si[Ei]=null,Ei--)}function Ci(e,t){Ei++,Si[Ei]=e.current,e.current=t}var Ni={},Ai=ki(Ni),Ti=ki(!1),Ii=Ni;function ji(e,t){var n=e.type.contextTypes;if(!n)return Ni;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){_i(Ti),_i(Ai)}function Ri(e,t,n){if(Ai.current!==Ni)throw Error(s(168));Ci(Ai,t),Ci(Ti,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ni,Ii=Ai.current,Ci(Ai,e),Ci(Ti,Ti.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Oi(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,_i(Ti),_i(Ai),Ci(Ai,e)):_i(Ti),Ci(Ti,n)}var Fi=null,Vi=!1,Ui=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!Ui&&null!==Fi){Ui=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Vi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Qe(Ze,Bi),i}finally{bt=t,Ui=!1}}return null}var qi=[],Hi=0,Ki=null,Wi=0,Qi=[],Gi=0,$i=null,Xi=1,Yi="";function Ji(e,t){qi[Hi++]=Wi,qi[Hi++]=Ki,Ki=e,Wi=t}function Zi(e,t,n){Qi[Gi++]=Xi,Qi[Gi++]=Yi,Qi[Gi++]=$i,$i=e;var r=Xi;e=Yi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-at(t)+i|n<<i|r,Yi=s+e}else Xi=1<<s|n<<i|r,Yi=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===Ki;)Ki=qi[--Hi],qi[Hi]=null,Wi=qi[--Hi],qi[Hi]=null;for(;e===$i;)$i=Qi[--Gi],Qi[Gi]=null,Yi=Qi[--Gi],Qi[Gi]=null,Xi=Qi[--Gi],Qi[Gi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=Ic(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Xi,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ic(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&ys(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case S:return(t=Mc(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Rc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:h(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return h(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,o,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,o[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===o.length)return n(i,h),is&&Ji(i,m),c;if(null===h){for(;m<o.length;m++)null!==(h=d(i,o[m],l))&&(s=a(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Ji(i,m),c}for(h=r(i,h);m<o.length;m++)null!==(g=p(h,i,m,o[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(i,e)}),is&&Ji(i,m),c}function g(i,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),o=a(b,o,g),null===h?u=b:h.sibling=b,h=b,m=v}if(y.done)return n(i,m),is&&Ji(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(o=a(y,o,g),null===h?u=y:h.sibling=y,h=y);return is&&Ji(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach(function(e){return t(i,e)}),is&&Ji(i,g),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===E){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&ys(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=gs(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===E?((s=Rc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Pc(a.type,a.key,a.props,null,r.mode,l)).ref=gs(r,s,a),l.return=r,r=l)}return o(r);case S:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Mc(a,r.mode,l)).return=r,r=s}return o(r);case D:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(O(a))return g(r,s,a,l);vs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Lc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var ws=bs(!0),xs=bs(!1),Ss=ki(null),Es=null,ks=null,_s=null;function Cs(){_s=ks=Es=null}function Ns(e){var t=Ss.current;_i(Ss),e._currentValue=t}function As(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ts(e,t){Es=e,_s=ks=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Is(e){var t=e._currentValue;if(_s!==e)if(e={context:e,memoizedValue:t,next:null},null===ks){if(null===Es)throw Error(s(308));ks=e,Es.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var js=null;function Ds(e){null===js?js=[e]:js.push(e)}function Ps(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ds(t)):(n.next=i.next,i.next=n),t.interleaved=n,Rs(e,r)}function Rs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Os=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Rs(e,n)}return null===(i=r.interleaved)?(t.next=t,Ds(r)):(t.next=i.next,i.next=t),r.interleaved=t,Rs(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Os=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(a=0,u=c=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=M({},h,d);break e;case 2:Os=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ol|=a,e.lanes=a,e.memoizedState=h}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},Ks=ki(Hs),Ws=ki(Hs),Qs=ki(Hs);function Gs(e){if(e===Hs)throw Error(s(174));return e}function $s(e,t){switch(Ci(Qs,t),Ci(Ws,e),Ci(Ks,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_i(Ks),Ci(Ks,t)}function Xs(){_i(Ks),_i(Ws),_i(Qs)}function Ys(e){Gs(Qs.current);var t=Gs(Ks.current),n=le(t,e.type);t!==n&&(Ci(Ws,e),Ci(Ks,n))}function Js(e){Ws.current===e&&(_i(Ks),_i(Ws))}var Zs=ki(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=w.ReactCurrentDispatcher,ia=w.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,ha=0,da=0;function fa(){throw Error(s(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Ja:Za,e=n(r,i),ua){a=0;do{if(ua=!1,ha=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(ua)}if(ra.current=Ya,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ga(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((sa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=r):c=c.next=d,aa.lanes|=h,Ol|=h}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Ol|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function Ea(e,t){var n=aa,r=ya(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,bo=!0),r=r.queue,Oa(Ca.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ia(9,_a.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(s(349));0!==(30&sa)||ka(n,t,i)}return i}function ka(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _a(e,t,n,r){t.value=n,t.getSnapshot=r,Na(t)&&Aa(e)}function Ca(e,t,n){return n(function(){Na(t)&&Aa(e)})}function Na(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Aa(e){var t=Rs(e,1);null!==t&&tc(t,e,1,-1)}function Ta(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Qa.bind(null,aa,e),[t.memoizedState,e]}function Ia(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ja(){return ya().memoizedState}function Da(e,t,n,r){var i=va();aa.flags|=e,i.memoizedState=Ia(1|t,n,void 0,void 0===r?null:r)}function Pa(e,t,n,r){var i=ya();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&pa(r,a.deps))return void(i.memoizedState=Ia(t,n,s,r))}aa.flags|=e,i.memoizedState=Ia(1|t,n,s,r)}function Ra(e,t){return Da(8390656,8,e,t)}function Oa(e,t){return Pa(2048,8,e,t)}function La(e,t){return Pa(4,2,e,t)}function Ma(e,t){return Pa(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Va(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4,4,Fa.bind(null,t,e),n)}function Ua(){}function za(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ba(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qa(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),aa.lanes|=n,Ol|=n,e.baseState=!0),t)}function Ha(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{bt=n,ia.transition=r}}function Ka(){return ya().memoizedState}function Wa(e,t,n){var r=ec(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ga(e))$a(t,n);else if(null!==(n=Ps(e,t,n,r))){tc(n,e,r,Zl()),Xa(n,t,r)}}function Qa(e,t,n){var r=ec(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ga(e))$a(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Ds(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ps(e,t,i,r))&&(tc(n,e,r,i=Zl()),Xa(n,t,r))}}function Ga(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function $a(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ya={readContext:Is,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Ja={readContext:Is,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Is,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wa.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ta,useDebugValue:Ua,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ta(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=va();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&sa)||ka(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ra(Ca.bind(null,r,a,e),[e]),r.flags|=2048,Ia(9,_a.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Al.identifierPrefix;if(is){var n=Yi;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=da++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Is,useCallback:za,useContext:Is,useEffect:Oa,useImperativeHandle:Va,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:Ba,useReducer:wa,useRef:ja,useState:function(){return wa(ba)},useDebugValue:Ua,useDeferredValue:function(e){return qa(ya(),oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],ya().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ea,useId:Ka,unstable_isNewReconciler:!1},eo={readContext:Is,useCallback:za,useContext:Is,useEffect:Oa,useImperativeHandle:Va,useInsertionEffect:La,useLayoutEffect:Ma,useMemo:Ba,useReducer:xa,useRef:ja,useState:function(){return xa(ba)},useDebugValue:Ua,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:qa(t,oa.memoizedState,e)},useTransition:function(){return[xa(ba)[0],ya().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ea,useId:Ka,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zl(),i=ec(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(tc(t,e,i,r),Us(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zl(),i=ec(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(tc(t,e,i,r),Us(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zl(),r=ec(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Vs(e,i,r))&&(tc(t,e,r,n),Us(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function so(e,t,n){var r=!1,i=Ni,s=t.contextType;return"object"===typeof s&&null!==s?s=Is(s):(i=Di(t)?Ii:Ai.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?ji(e,i):Ni),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Is(s):(s=Di(t)?Ii:Ai.current,i.context=ji(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Hl=r),uo(0,t)},n}function po(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Vs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=w.ReactCurrentOwner,bo=!1;function wo(e,t,n,r){t.child=null===e?xs(t,null,n,r):ws(t,e.child,n,r)}function xo(e,t,n,r,i){n=n.render;var s=t.ref;return Ts(t,i),r=ma(e,t,n,r,s,i),n=ga(),null===e||bo?(is&&n&&es(t),t.flags|=1,wo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i))}function So(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||jc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Eo(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return qo(e,t,i)}return t.flags|=1,(e=Dc(s,r)).ref=t.ref,e.return=t,t.child=e}function Eo(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,qo(e,t,i);0!==(131072&e.flags)&&(bo=!0)}}return Co(e,t,n,r,i)}function ko(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Dl,jl),jl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Dl,jl),jl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ci(Dl,jl),jl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ci(Dl,jl),jl|=r;return wo(e,t,i,n),t.child}function _o(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,r,i){var s=Di(n)?Ii:Ai.current;return s=ji(t,s),Ts(t,i),n=ma(e,t,n,r,s,i),r=ga(),null===e||bo?(is&&r&&es(t),t.flags|=1,wo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i))}function No(e,t,n,r,i){if(Di(n)){var s=!0;Li(t)}else s=!1;if(Ts(t,i),null===t.stateNode)Bo(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Is(c):c=ji(t,c=Di(n)?Ii:Ai.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Os=!1;var d=t.memoizedState;a.state=d,Bs(t,r,a,i),l=t.memoizedState,o!==r||d!==l||Ti.current||Os?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Os||io(t,n,o,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ms(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Is(l):l=ji(t,l=Di(n)?Ii:Ai.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&ao(t,a,r,l),Os=!1,d=t.memoizedState,a.state=d,Bs(t,r,a,i);var p=t.memoizedState;o!==h||d!==p||Ti.current||Os?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(c=Os||io(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ao(e,t,n,r,s,i)}function Ao(e,t,n,r,i,s){_o(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Mi(t,n,!1),qo(e,t,s);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):wo(e,t,o,s),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function To(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),$s(e,t.containerInfo)}function Io(e,t,n,r,i){return fs(),ps(i),t.flags|=256,wo(e,t,n,r),t.child}var jo,Do,Po,Ro={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,n){var r,i=t.pendingProps,a=Zs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ci(Zs,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Oc(l,i,0,null),e=Rc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oo(n),t.memoizedState=Ro,e):Mo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Oc({mode:"visible",children:r.children},i,0,null),(a=Rc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,o),t.child.memoizedState=Oo(o),t.memoizedState=Ro,a);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fo(e,t,o,r=co(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Al)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Rs(e,i),tc(r,e,i,-1))}return pc(),Fo(e,t,o,r=co(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Qi[Gi++]=Xi,Qi[Gi++]=Yi,Qi[Gi++]=$i,Xi=e.id,Yi=e.overflow,$i=t),t=Mo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Dc(r,o):(o=Rc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Oo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ro,i}return e=(o=e.child).sibling,i=Dc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Mo(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,r){return null!==r&&ps(r),ws(t,e.child,null,n),(e=Mo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),As(e.return,t,n)}function Uo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function zo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vo(e,n,t);else if(19===e.tag)Vo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Uo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Uo(t,!0,n,null,s);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wo(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Di(t.type)&&Pi(),Ko(t),null;case 3:return r=t.stateNode,Xs(),_i(Ti),_i(Ai),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(sc(ss),ss=null))),Ko(t),null;case 5:Js(t);var i=Gs(Qs.current);if(n=t.type,null!==e&&null!=t.stateNode)Do(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ko(t),null}if(e=Gs(Ks.current),hs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[di]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Vr(Or[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":X(r,a),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Vr("invalid",r);break;case"textarea":ie(r,a),Vr("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,jo(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Vr(Or[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":X(e,r),i=$(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Vr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Po(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Gs(Qs.current),Gs(Ks.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ko(t),null;case 13:if(_i(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,a=!1;else if(a=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),a=!1}else null!==ss&&(sc(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Pl&&(Pl=3):pc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Xs(),null===e&&Br(t.stateNode.containerInfo),Ko(t),null;case 10:return Ns(t.type._context),Ko(t),null;case 19:if(_i(Zs),null===(a=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ho(a,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Ho(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==a.tail&&Ye()>zl&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Ko(t),null}else 2*Ye()-a.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ye(),t.sibling=null,n=Zs.current,Ci(Zs,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&jl)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qo(e,t){switch(ts(t),t.tag){case 1:return Di(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),_i(Ti),_i(Ai),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(_i(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _i(Zs),null;case 4:return Xs(),null;case 10:return Ns(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}jo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Do=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gs(Ks.current);var s,a=null;switch(n){case"input":i=$(e,i),r=$(e,r),a=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Po=function(e,t,n,r){n!==r&&(t.flags|=4)};var Go=!1,$o=!1,Xo="function"===typeof WeakSet?WeakSet:Set,Yo=null;function Jo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function Zo(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var el=!1;function tl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&Zo(t,n,s)}i=i.next}while(i!==r)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ol(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ol(e,t,n),e=e.sibling;null!==e;)ol(e,t,n),e=e.sibling}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}var cl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)dl(e,t,n),n=n.sibling}function dl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:$o||Jo(n,t);case 6:var r=cl,i=ul;cl=null,hl(e,t,n),ul=i,null!==(cl=r)&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=ul,cl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),cl=r,ul=i;break;case 0:case 11:case 14:case 15:if(!$o&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&Zo(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!$o&&(Jo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ec(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?($o=(r=$o)||null!==n.memoizedState,hl(e,t,n),$o=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach(function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,ul=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===cl)throw Error(s(160));dl(a,o,i),cl=null,ul=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),gl(e),4&r){try{tl(3,e,e.return),nl(3,e)}catch(g){Ec(e,e.return,g)}try{tl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:pl(t,e),gl(e),512&r&&null!==n&&Jo(n,n.return);break;case 5:if(pl(t,e),gl(e),512&r&&null!==n&&Jo(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Y(i,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,u)}switch(l){case"input":J(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){Ec(e,e.return,g)}}break;case 6:if(pl(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Ec(e,e.return,g)}}break;case 3:if(pl(t,e),gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:pl(t,e),gl(e);break;case 13:pl(t,e),gl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Ye())),4&r&&fl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($o=(u=$o)||h,pl(t,e),$o=u):pl(t,e),gl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Yo=e,h=e.child;null!==h;){for(d=Yo=h;null!==Yo;){switch(p=(f=Yo).child,f.tag){case 0:case 11:case 14:case 15:tl(4,f,f.return);break;case 1:Jo(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:Jo(f,f.return);break;case 22:if(null!==f.memoizedState){wl(d);continue}}null!==p?(p.return=f,Yo=p):wl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Ec(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:pl(t,e),gl(e),4&r&&fl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ll(e,al(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ol(e,al(e),a);break;default:throw Error(s(161))}}catch(o){Ec(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Yo=e,yl(e,t,n)}function yl(e,t,n){for(var r=0!==(1&e.mode);null!==Yo;){var i=Yo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Go;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||$o;o=Go;var c=$o;if(Go=a,($o=l)&&!c)for(Yo=i;null!==Yo;)l=(a=Yo).child,22===a.tag&&null!==a.memoizedState?xl(i):null!==l?(l.return=a,Yo=l):xl(i);for(;null!==s;)Yo=s,yl(s,t,n),s=s.sibling;Yo=i,Go=o,$o=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Yo=s):bl(e)}}function bl(e){for(;null!==Yo;){var t=Yo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$o||nl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$o)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}$o||512&t.flags&&rl(t)}catch(f){Ec(t,t.return,f)}}if(t===e){Yo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Yo=n;break}Yo=t.return}}function wl(e){for(;null!==Yo;){var t=Yo;if(t===e){Yo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Yo=n;break}Yo=t.return}}function xl(e){for(;null!==Yo;){var t=Yo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nl(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ec(t,i,l)}}var s=t.return;try{rl(t)}catch(l){Ec(t,s,l)}break;case 5:var a=t.return;try{rl(t)}catch(l){Ec(t,a,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Yo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Yo=o;break}Yo=t.return}}var Sl,El=Math.ceil,kl=w.ReactCurrentDispatcher,_l=w.ReactCurrentOwner,Cl=w.ReactCurrentBatchConfig,Nl=0,Al=null,Tl=null,Il=0,jl=0,Dl=ki(0),Pl=0,Rl=null,Ol=0,Ll=0,Ml=0,Fl=null,Vl=null,Ul=0,zl=1/0,Bl=null,ql=!1,Hl=null,Kl=null,Wl=!1,Ql=null,Gl=0,$l=0,Xl=null,Yl=-1,Jl=0;function Zl(){return 0!==(6&Nl)?Ye():-1!==Yl?Yl:Yl=Ye()}function ec(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Il?Il&-Il:null!==ms.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function tc(e,t,n,r){if(50<$l)throw $l=0,Xl=null,Error(s(185));vt(e,n,r),0!==(2&Nl)&&e===Al||(e===Al&&(0===(2&Nl)&&(Ll|=n),4===Pl&&ac(e,Il)),nc(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(zl=Ye()+500,Vi&&Bi()))}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=dt(e,e===Al?Il:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(oc.bind(null,e)):zi(oc.bind(null,e)),ai(function(){0===(6&Nl)&&Bi()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Yl=-1,Jl=0,0!==(6&Nl))throw Error(s(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=dt(e,e===Al?Il:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Nl;Nl|=2;var a=fc();for(Al===e&&Il===t||(Bl=null,zl=Ye()+500,hc(e,t));;)try{vc();break}catch(l){dc(e,l)}Cs(),kl.current=a,Nl=i,null!==Tl?t=0:(Al=null,Il=0,t=Pl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ic(e,i))),1===t)throw n=Rl,hc(e,0),ac(e,r),nc(e,Ye()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(a=pt(e))&&(r=a,t=ic(e,a))),1===t))throw n=Rl,hc(e,0),ac(e,r),nc(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Vl,Bl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Ul+500-Ye())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Zl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vl,Bl),t);break}wc(e,Vl,Bl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vl,Bl),r);break}wc(e,Vl,Bl);break;default:throw Error(s(329))}}}return nc(e,Ye()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Vl,Vl=n,null!==t&&sc(t)),e}function sc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function ac(e,t){for(t&=~Ml,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function oc(e){if(0!==(6&Nl))throw Error(s(327));xc();var t=dt(e,0);if(0===(1&t))return nc(e,Ye()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Rl,hc(e,0),ac(e,t),nc(e,Ye()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vl,Bl),nc(e,Ye()),null}function lc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(zl=Ye()+500,Vi&&Bi())}}function cc(e){null!==Ql&&0===Ql.tag&&0===(6&Nl)&&xc();var t=Nl;Nl|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0===(6&(Nl=t))&&Bi()}}function uc(){jl=Dl.current,_i(Dl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Tl)for(n=Tl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Xs(),_i(Ti),_i(Ai),na();break;case 5:Js(r);break;case 4:Xs();break;case 13:case 19:_i(Zs);break;case 10:Ns(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Al=e,Tl=e=Dc(e.current,null),Il=jl=t,Pl=0,Rl=null,Ml=Ll=Ol=0,Vl=Fl=null,null!==js){for(t=0;t<js.length;t++)if(null!==(r=(n=js[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}js=null}return e}function dc(e,t){for(;;){var n=Tl;try{if(Cs(),ra.current=Ya,ca){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,ha=0,_l.current=null,null===n||null===n.return){Pl=1,Rl=t,Tl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Il,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&mo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(a,u,t),pc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ps(lo(c,l));break e}}a=c=lo(c,l),4!==Pl&&(Pl=2),null===Fl?Fl=[a]:Fl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zs(a,fo(0,c,t));break e;case 1:l=c;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,zs(a,po(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(w){t=w,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function fc(){var e=kl.current;return kl.current=Ya,null===e?Ya:e}function pc(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===Al||0===(268435455&Ol)&&0===(268435455&Ll)||ac(Al,Il)}function mc(e,t){var n=Nl;Nl|=2;var r=fc();for(Al===e&&Il===t||(Bl=null,hc(e,t));;)try{gc();break}catch(i){dc(e,i)}if(Cs(),Nl=n,kl.current=r,null!==Tl)throw Error(s(261));return Al=null,Il=0,Pl}function gc(){for(;null!==Tl;)yc(Tl)}function vc(){for(;null!==Tl&&!$e();)yc(Tl)}function yc(e){var t=Sl(e.alternate,e,jl);e.memoizedProps=e.pendingProps,null===t?bc(e):Tl=t,_l.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wo(n,t,jl)))return void(Tl=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Pl=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Pl&&(Pl=5)}function wc(e,t,n){var r=bt,i=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{xc()}while(null!==Ql);if(0!==(6&Nl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Al&&(Tl=Al=null,Il=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,Ac(tt,function(){return xc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=bt;bt=1;var l=Nl;Nl|=4,_l.current=null,function(e,t){if(ei=Ht,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=o+i),d!==a||0!==r&&3!==d.nodeType||(c=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++h===r&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Yo=t;null!==Yo;)if(e=(t=Yo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Yo=e;else for(;null!==Yo;){t=Yo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(x){Ec(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Yo=e;break}Yo=t.return}m=el,el=!1}(e,n),ml(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Xe(),Nl=l,bt=o,Cl.transition=a}else e.current=n;if(Wl&&(Wl=!1,Ql=e,Gl=i),a=e.pendingLanes,0===a&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ql)throw ql=!1,e=Hl,Hl=null,e;0!==(1&Gl)&&0!==e.tag&&xc(),a=e.pendingLanes,0!==(1&a)?e===Xl?$l++:($l=0,Xl=e):$l=0,Bi()}(e,t,n,r)}finally{Cl.transition=i,bt=r}return null}function xc(){if(null!==Ql){var e=wt(Gl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Gl=0,0!==(6&Nl))throw Error(s(331));var i=Nl;for(Nl|=4,Yo=e.current;null!==Yo;){var a=Yo,o=a.child;if(0!==(16&Yo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Yo=u;null!==Yo;){var h=Yo;switch(h.tag){case 0:case 11:case 15:tl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Yo=d;else for(;null!==Yo;){var f=(h=Yo).sibling,p=h.return;if(il(h),h===u){Yo=null;break}if(null!==f){f.return=p,Yo=f;break}Yo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Yo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Yo=o;else e:for(;null!==Yo;){if(0!==(2048&(a=Yo).flags))switch(a.tag){case 0:case 11:case 15:tl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Yo=y;break e}Yo=a.return}}var b=e.current;for(Yo=b;null!==Yo;){var w=(o=Yo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Yo=w;else e:for(o=b;null!==Yo;){if(0!==(2048&(l=Yo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(S){Ec(l,l.return,S)}if(l===o){Yo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Yo=x;break e}Yo=l.return}}if(Nl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function Sc(e,t,n){e=Vs(e,t=fo(0,t=lo(n,t),1),1),t=Zl(),null!==e&&(vt(e,1,t),nc(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Vs(t,e=po(t,e=lo(n,e),1),1),e=Zl(),null!==t&&(vt(t,1,e),nc(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Zl(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Il&n)===n&&(4===Pl||3===Pl&&(130023424&Il)===Il&&500>Ye()-Ul?hc(e,0):Ml|=n),nc(e,t)}function _c(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=Zl();null!==(e=Rs(e,t))&&(vt(e,t,n),nc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),_c(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),_c(e,n)}function Ac(e,t){return Qe(e,t)}function Tc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ic(e,t,n,r){return new Tc(e,t,n,r)}function jc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Ic(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)jc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case E:return Rc(n.children,i,a,t);case k:o=8,i|=8;break;case _:return(e=Ic(12,n,t,2|i)).elementType=_,e.lanes=a,e;case T:return(e=Ic(13,n,t,i)).elementType=T,e.lanes=a,e;case I:return(e=Ic(19,n,t,i)).elementType=I,e.lanes=a,e;case P:return Oc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case N:o=9;break e;case A:o=11;break e;case j:o=14;break e;case D:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ic(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Rc(e,t,n,r){return(e=Ic(7,e,r,t)).lanes=n,e}function Oc(e,t,n,r){return(e=Ic(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Ic(6,e,null,t)).lanes=n,e}function Mc(e,t,n){return(t=Ic(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,a,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ic(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function Uc(e){if(!e)return Ni;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Di(n))return Oi(e,n,t)}return t}function zc(e,t,n,r,i,s,a,o,l){return(e=Vc(n,r,!0,e,0,s,0,o,l)).context=Uc(null),n=e.current,(s=Fs(r=Zl(),i=ec(n))).callback=void 0!==t&&null!==t?t:null,Vs(n,s,i),e.current.lanes=i,vt(e,i,r),nc(e,r),e}function Bc(e,t,n,r){var i=t.current,s=Zl(),a=ec(i);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vs(i,t,a))&&(tc(e,i,a,s),Us(e,i,a)),a}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:To(t),fs();break;case 5:Ys(t);break;case 1:Di(t.type)&&Li(t);break;case 4:$s(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(Ss,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lo(e,t,n):(Ci(Zs,1&Zs.current),null!==(e=qo(e,t,n))?e.sibling:null);Ci(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return qo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bo(e,t),e=t.pendingProps;var i=ji(t,Ai.current);Ts(t,n),i=ma(null,t,r,e,i,n);var a=ga();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=Ao(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),wo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return jc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===j)return 14}return 2}(r),e=to(r,e),i){case 0:t=Co(null,t,r,e,n);break e;case 1:t=No(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=So(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,No(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(To(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Ms(e,t),Bs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Io(e,t,r,n,i=lo(Error(s(423)),t));break e}if(r!==i){t=Io(e,t,r,n,i=lo(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=qo(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return Ys(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),_o(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Lo(e,t,n);case 4:return $s(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ci(Ss,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ti.current){t=qo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),As(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),As(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ts(t,n),r=r(i=Is(i)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),So(e,t,r,i=to(r.type,i),n);case 15:return Eo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),Bo(e,t),t.tag=1,Di(r)?(e=!0,Li(t)):e=!1,Ts(t,n),so(t,r,i),oo(t,r,i,n),Ao(null,t,r,!0,e,n);case 19:return zo(e,t,n);case 22:return ko(e,t,n)}throw Error(s(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Gc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Yc(){}function Jc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=qc(a);o.call(e)}}Bc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=qc(a);s.call(e)}}var a=zc(t,r,e,0,null,!1,0,"",Yc);return e._reactRootContainer=a,e[pi]=a.current,Br(8===e.nodeType?e.parentNode:e),cc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=qc(l);o.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Yc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),cc(function(){Bc(t,l,n,r)}),l}(n,t,e,i,r);return qc(a)}Gc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Bc(e,t,null,null)},Gc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc(function(){Bc(null,e,null,null)}),t[pi]=null}},Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),nc(t,Ye()),0===(6&Nl)&&(zl=Ye()+500,Bi()))}break;case 13:cc(function(){var t=Rs(e,1);if(null!==t){var n=Zl();tc(t,e,1,n)}}),Kc(e,1)}},St=function(e){if(13===e.tag){var t=Rs(e,134217728);if(null!==t)tc(t,e,134217728,Zl());Kc(e,134217728)}},Et=function(e){if(13===e.tag){var t=ec(e),n=Rs(e,t);if(null!==n)tc(n,e,t,Zl());Kc(e,t)}},kt=function(){return bt},_t=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));Q(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=lc,Te=cc;var Zc={usingClientEntryPoint:!1,Events:[bi,wi,xi,Ce,Ne,lc]},eu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{it=nu.inject(tu),st=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(s(299));var n=!1,r="",i=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Wc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,a,o),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Gc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(cc(function(){Jc(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Jc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},352(e,t,n){var r=n(119);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},414(e,t,n){e.exports=n(654)},498(e,t,n){n.d(t,{cY:()=>f,FA:()=>N,g:()=>C,u:()=>l,Uj:()=>o,Fy:()=>g,bD:()=>T,T9:()=>d,yU:()=>h,mS:()=>c,Ku:()=>j,ZQ:()=>w,zJ:()=>p,zW:()=>k,nr:()=>S,Ov:()=>E,gE:()=>m,P1:()=>b,eX:()=>_});var r=n(555);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==l)throw new a;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(e){return function(e){const t=i(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},l=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const u=()=>{try{return c().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/kind-cat",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&l(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},h=e=>{const t=(e=>{var t;return null===(t=u())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},d=()=>{var e;return null===(e=u())||void 0===e?void 0:e.config};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function p(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function m(e){return(await fetch(e,{credentials:"include"})).ok}function g(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=(0,r.A)({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(a)),""].join(".")}const v={};let y=!1;function b(e,t){if("undefined"===typeof window||"undefined"===typeof document||!p(window.location.host)||v[e]===t||v[e]||y)return;function n(e){return"__firebase__banner__".concat(e)}v[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(v))v[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{y=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function w(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function x(){var e;const t=null===(e=u())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function S(){return!x()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E(){return!x()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function k(){try{return"object"===typeof indexedDB}catch(e){return!1}}function _(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class C extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,C.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,N.prototype.create)}}class N{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(A,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new C(n,s,t)}}const A=/\{\$([^}]+)}/g;function T(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(I(n)&&I(s)){if(!T(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function I(e){return null!==e&&"object"===typeof e}function j(e){return e&&e._delegate?e._delegate:e}},555(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>o})},654(e,t,n){var r=n(950),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},741(e,t,n){n.d(t,{MF:()=>he,j6:()=>ae,xZ:()=>oe,om:()=>se,Sx:()=>fe,Wp:()=>de,KO:()=>pe});var r=n(555),i=n(863),s=n(226),a=n(498);let o,l;const c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap;let p={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||h.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return v(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function m(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(y(this),n),v(c.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(e.apply(y(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(y(this),t,...r);return h.set(s,t.sort?t.sort():[t]),v(s)}}function g(e){return"function"===typeof e?m(e):(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});u.set(e,t)}(e),t=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,p):e);var t}function v(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(v(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&c.set(t,e)}).catch(()=>{}),f.set(t,e),t}(e);if(d.has(e))return d.get(e);const t=g(e);return t!==e&&(d.set(e,t),f.set(t,e)),t}const y=e=>f.get(e);const b=["get","getKey","getAll","getAllKeys","count"],w=["put","add","delete","clear"],x=new Map;function S(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(x.get(t))return x.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=w.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!b.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return x.set(t,s),s}p=(e=>(0,r.A)((0,r.A)({},e),{},{get:(t,n,r)=>S(t,n)||e.get(t,n,r),has:(t,n)=>!!S(t,n)||e.has(t,n)}))(p);class E{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const k="@firebase/app",_="0.14.6",C=new s.Vy("@firebase/app"),N="@firebase/app-compat",A="@firebase/analytics-compat",T="@firebase/analytics",I="@firebase/app-check-compat",j="@firebase/app-check",D="@firebase/auth",P="@firebase/auth-compat",R="@firebase/database",O="@firebase/data-connect",L="@firebase/database-compat",M="@firebase/functions",F="@firebase/functions-compat",V="@firebase/installations",U="@firebase/installations-compat",z="@firebase/messaging",B="@firebase/messaging-compat",q="@firebase/performance",H="@firebase/performance-compat",K="@firebase/remote-config",W="@firebase/remote-config-compat",Q="@firebase/storage",G="@firebase/storage-compat",$="@firebase/firestore",X="@firebase/ai",Y="@firebase/firestore-compat",J="firebase",Z="[DEFAULT]",ee={[k]:"fire-core",[N]:"fire-core-compat",[T]:"fire-analytics",[A]:"fire-analytics-compat",[j]:"fire-app-check",[I]:"fire-app-check-compat",[D]:"fire-auth",[P]:"fire-auth-compat",[R]:"fire-rtdb",[O]:"fire-data-connect",[L]:"fire-rtdb-compat",[M]:"fire-fn",[F]:"fire-fn-compat",[V]:"fire-iid",[U]:"fire-iid-compat",[z]:"fire-fcm",[B]:"fire-fcm-compat",[q]:"fire-perf",[H]:"fire-perf-compat",[K]:"fire-rc",[W]:"fire-rc-compat",[Q]:"fire-gcs",[G]:"fire-gcs-compat",[$]:"fire-fst",[Y]:"fire-fst-compat",[X]:"fire-vertex","fire-js":"fire-js",[J]:"fire-js-all"},te=new Map,ne=new Map,re=new Map;function ie(e,t){try{e.container.addComponent(t)}catch(n){C.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function se(e){const t=e.name;if(re.has(t))return C.debug("There were multiple attempts to register component ".concat(t,".")),!1;re.set(t,e);for(const n of te.values())ie(n,e);for(const n of ne.values())ie(n,e);return!0}function ae(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function oe(e){return null!==e&&void 0!==e&&void 0!==e.settings}const le={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ce=new a.FA("app","Firebase",le);class ue{constructor(e,t,n){this._isDeleted=!1,this._options=(0,r.A)({},e),this._config=(0,r.A)({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ce.create("app-deleted",{appName:this._name})}}const he="12.6.0";function de(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const s=(0,r.A)({name:Z,automaticDataCollectionEnabled:!0},t),o=s.name;if("string"!==typeof o||!o)throw ce.create("bad-app-name",{appName:String(o)});if(n||(n=(0,a.T9)()),!n)throw ce.create("no-options");const l=te.get(o);if(l){if((0,a.bD)(n,l.options)&&(0,a.bD)(s,l.config))return l;throw ce.create("duplicate-app",{appName:o})}const c=new i.h1(o);for(const r of re.values())c.addComponent(r);const u=new ue(n,s,c);return te.set(o,u),u}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;const t=te.get(e);if(!t&&e===Z&&(0,a.T9)())return de();if(!t)throw ce.create("no-app",{appName:e});return t}function pe(e,t,n){var r;let s=null!==(r=ee[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),a&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void C.warn(e.join(" "))}se(new i.uA("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const me="firebase-heartbeat-store";let ge=null;function ve(){return ge||(ge=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=v(a);return r&&a.addEventListener("upgradeneeded",e=>{r(v(a.result),e.oldVersion,e.newVersion,v(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(me)}catch(n){console.warn(n)}}}).catch(e=>{throw ce.create("idb-open",{originalErrorMessage:e.message})})),ge}async function ye(e,t){try{const n=(await ve()).transaction(me,"readwrite"),r=n.objectStore(me);await r.put(t,be(e)),await n.done}catch(n){if(n instanceof a.g)C.warn(n.message);else{const e=ce.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});C.warn(e.message)}}}function be(e){return"".concat(e.name,"!").concat(e.options.appId)}class we{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Se(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=xe();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){C.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=xe(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Ee(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ee(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,a.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return C.warn(t),""}}}function xe(){return(new Date).toISOString().substring(0,10)}class Se{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,a.zW)()&&(0,a.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ve()).transaction(me),n=await t.objectStore(me).get(be(e));return await t.done,n}catch(t){if(t instanceof a.g)C.warn(t.message);else{const e=ce.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});C.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ye(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ye(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ee(e){return(0,a.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var ke;ke="",se(new i.uA("platform-logger",e=>new E(e),"PRIVATE")),se(new i.uA("heartbeat",e=>new we(e),"PRIVATE")),pe(k,_,ke),pe(k,_,"esm2020"),pe("fire-js","")},761(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,P(S);else{var t=r(u);null!==t&&R(x,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(C),C=-1),p=!0;var s=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!T());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&R(x,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,k=!1,_=null,C=-1,N=5,A=-1;function T(){return!(t.unstable_now()-A<N)}function I(){if(null!==_){var e=t.unstable_now();A=e;var n=!0;try{n=_(!0,e)}finally{n?E():(k=!1,_=null)}}else k=!1}if("function"===typeof b)E=function(){b(I)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,D=j.port2;j.port1.onmessage=I,E=function(){D.postMessage(null)}}else E=function(){v(I,0)};function P(e){_=e,k||(k=!0,E())}function R(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(C),C=-1):g=!0,R(x,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,P(S))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},863(e,t,n){n.d(t,{h1:()=>o,uA:()=>i});var r=n(498);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===s?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},950(e,t,n){e.exports=n(49)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r,i=n(950),s=n.t(i,2),a=n(352),o=n(119),l=n.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const u="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function v(e,t,n,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:a=!1}=i,o=s.history,l=r.Pop,d=null,g=v();function v(){return(o.state||{idx:null}).idx}function y(){l=r.Pop;let e=v(),t=null==e?null:e-g;g=e,d&&d({action:l,location:w.location,delta:t})}function b(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(c({},o.state,{idx:g}),""));let w={get action(){return l},get location(){return e(s,o)},listen(e){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(u,y),d=e,()=>{s.removeEventListener(u,y),d=null}},createHref:e=>t(s,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=r.Push;let i=p(w.location,e,t);n&&n(i,e),g=v()+1;let c=f(i,g),u=w.createHref(i);try{o.pushState(c,"",u)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;s.location.assign(u)}a&&d&&d({action:l,location:w.location,delta:1})},replace:function(e,t){l=r.Replace;let i=p(w.location,e,t);n&&n(i,e),g=v();let s=f(i,g),c=w.createHref(i);o.replaceState(s,"",c),a&&d&&d({action:l,location:w.location,delta:0})},go:e=>o.go(e)};return w}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),w(e,t,n,!1)}function w(e,t,n,r){let i=R(("string"===typeof t?g(t):t).pathname||"/",n);if(null==i)return null;let s=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=P(i);a=j(s[o],e,r)}return a}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(h(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=B([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),x(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:I(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of S(e.path))i(e,t,r);else i(e,t)}),t}function S(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=S(r.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),i&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const E=/^:[\w-]+$/,k=3,_=2,C=1,N=10,A=-2,T=e=>"*"===e;function I(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=A),t&&(r+=_),n.filter(e=>!T(e)).reduce((e,t)=>e+(E.test(t)?k:""===t?C:N),r)}function j(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=D({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:B([s,u.pathname]),pathnameBase:q(B([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=B([s,u.pathnameBase]))}return a}function D(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:a,pattern:e}}function P(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}const O=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function L(e,t){void 0===t&&(t="/");let n,{pathname:r,search:i="",hash:s=""}="string"===typeof e?g(e):e;if(r)if(a=r,O.test(a))n=r;else{if(r.includes("//")){let e=r;r=r.replace(/\/\/+/g,"/"),d(!1,"Pathnames cannot have embedded double slashes - normalizing "+e+" -> "+r)}n=r.startsWith("/")?M(r.substring(1),"/"):M(r,t)}else n=t;var a;return{pathname:n,search:H(i),hash:K(s)}}function M(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function F(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function V(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function U(e,t){let n=V(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function z(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=g(e):(i=c({},e),h(!i.pathname||!i.pathname.includes("?"),F("?","pathname","search",i)),h(!i.pathname||!i.pathname.includes("#"),F("#","pathname","hash",i)),h(!i.search||!i.search.includes("#"),F("#","search","hash",i)));let s,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=L(i,s),u=o&&"/"!==o&&o.endsWith("/"),d=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}const B=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),H=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",K=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function W(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const Q=["post","put","patch","delete"],G=(new Set(Q),["get",...Q]);new Set(G),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$.apply(this,arguments)}const X=i.createContext(null);const Y=i.createContext(null);const J=i.createContext(null);const Z=i.createContext(null);const ee=i.createContext({outlet:null,matches:[],isDataRoute:!1});const te=i.createContext(null);function ne(){return null!=i.useContext(Z)}function re(){return ne()||h(!1),i.useContext(Z).location}function ie(e){i.useContext(J).static||i.useLayoutEffect(e)}function se(){let{isDataRoute:e}=i.useContext(ee);return e?function(){let{router:e}=ge(pe.UseNavigateStable),t=ye(me.UseNavigateStable),n=i.useRef(!1);return ie(()=>{n.current=!0}),i.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,$({fromRouteId:t},i)))},[e,t])}():function(){ne()||h(!1);let e=i.useContext(X),{basename:t,future:n,navigator:r}=i.useContext(J),{matches:s}=i.useContext(ee),{pathname:a}=re(),o=JSON.stringify(U(s,n.v7_relativeSplatPath)),l=i.useRef(!1);return ie(()=>{l.current=!0}),i.useCallback(function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let s=z(n,JSON.parse(o),a,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:B([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)},[t,r,o,a,e])}()}function ae(){let{matches:e}=i.useContext(ee),t=e[e.length-1];return t?t.params:{}}function oe(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(J),{matches:s}=i.useContext(ee),{pathname:a}=re(),o=JSON.stringify(U(s,r.v7_relativeSplatPath));return i.useMemo(()=>z(e,JSON.parse(o),a,"path"===n),[e,o,a,n])}function le(e,t,n,s){ne()||h(!1);let{navigator:a}=i.useContext(J),{matches:o}=i.useContext(ee),l=o[o.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=re();if(t){var p;let e="string"===typeof t?g(t):t;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||h(!1),d=e}else d=f;let m=d.pathname||"/",v=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=b(e,{pathname:v});let w=fe(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:B([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:B([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,s);return t&&w?i.createElement(Z.Provider,{value:{location:$({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:r.Pop}},w):w}function ce(){let e=function(){var e;let t=i.useContext(te),n=ve(me.UseRouteError),r=ye(me.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=W(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const ue=i.createElement(ce,null);class he extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(ee.Provider,{value:this.props.routeContext},i.createElement(te.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function de(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(X);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(ee.Provider,{value:t},r)}function fe(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||h(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<o.length;i++){let e=o[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,r,s)=>{let a,h=!1,d=null,f=null;var p;n&&(a=l&&r.route.id?l[r.route.id]:void 0,d=r.route.errorElement||ue,c&&(u<0&&0===s?(p="route-fallback",!1||be[p]||(be[p]=!0),h=!0,f=null):u===s&&(h=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,s+1)),g=()=>{let t;return t=a?d:h?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(de,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(he,{location:n.location,revalidation:n.revalidation,component:d,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var pe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(pe||{}),me=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(me||{});function ge(e){let t=i.useContext(X);return t||h(!1),t}function ve(e){let t=i.useContext(Y);return t||h(!1),t}function ye(e){let t=function(){let e=i.useContext(ee);return e||h(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||h(!1),n.route.id}const be={};function we(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function xe(e){h(!1)}function Se(e){let{basename:t="/",children:n=null,location:s,navigationType:a=r.Pop,navigator:o,static:l=!1,future:c}=e;ne()&&h(!1);let u=t.replace(/^\/*/,"/"),d=i.useMemo(()=>({basename:u,navigator:o,static:l,future:$({v7_relativeSplatPath:!1},c)}),[u,c,o,l]);"string"===typeof s&&(s=g(s));let{pathname:f="/",search:p="",hash:m="",state:v=null,key:y="default"}=s,b=i.useMemo(()=>{let e=R(f,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:v,key:y},navigationType:a}},[u,f,p,m,v,y,a]);return null==b?null:i.createElement(J.Provider,{value:d},i.createElement(Z.Provider,{children:n,value:b}))}function Ee(e){let{children:t,location:n}=e;return le(ke(t),n)}new Promise(()=>{});i.Component;function ke(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,ke(e.props.children,s));e.type!==xe&&h(!1),e.props.index&&e.props.children&&h(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=ke(e.props.children,s)),n.push(a)}),n}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(this,arguments)}function Ce(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ne=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Je){}new Map;const Ae=s.startTransition;l.flushSync,s.useId;function Te(e){let{basename:t,children:n,future:r,window:s}=e,a=i.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),v(function(e,t){let{pathname:n="/",search:r="",hash:i=""}=g(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),p("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:m(t))},function(e,t){d("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},o)));let l=a.current,[c,u]=i.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},f=i.useCallback(e=>{h&&Ae?Ae(()=>u(e)):u(e)},[u,h]);return i.useLayoutEffect(()=>l.listen(f),[l,f]),i.useEffect(()=>we(r),[r]),i.createElement(Se,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Ie="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,je=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=i.forwardRef(function(e,t){let n,{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=e,p=Ce(e,Ne),{basename:g}=i.useContext(J),v=!1;if("string"===typeof u&&je.test(u)&&(n=u,Ie))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=R(t.pathname,g);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:v=!0}catch(Je){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;ne()||h(!1);let{basename:r,navigator:s}=i.useContext(J),{hash:a,pathname:o,search:l}=oe(e,{relative:n}),c=o;return"/"!==r&&(c="/"===o?r:B([r,o])),s.createHref({pathname:c,search:l,hash:a})}(u,{relative:s}),b=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=se(),u=re(),h=oe(e,{relative:o});return i.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:m(u)===m(h);c(e,{replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,h,r,s,n,e,a,o,l])}(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});return i.createElement("a",_e({},p,{href:n||y,onClick:v||a?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:c}))});var Pe,Re;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Pe||(Pe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));var Oe=n(555),Le=n(306),Me=n(741);(0,Me.KO)("firebase","12.7.0","app");const Fe=(0,Me.Wp)({apiKey:"AIzaSyBkO_LBcOMF2VOMywDKAP28yW7uiOvMPAs",authDomain:"yuma-f4924.firebaseapp.com",databaseURL:"https://yuma-f4924-default-rtdb.firebaseio.com",projectId:"yuma-f4924",storageBucket:"yuma-f4924.firebasestorage.app",messagingSenderId:"918394185102",appId:"1:918394185102:web:861815765bc32450c3f0df",measurementId:"G-K5R5RV2K60"}),Ve=(0,Le.aU)(Fe);var Ue=n(414);const ze=function(){const e=se(),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)(""),[a,o]=(0,i.useState)([]),[l,c]=(0,i.useState)(!0),[u,h]=(0,i.useState)(null);(0,i.useEffect)(()=>{d()},[]);const d=async()=>{try{console.log("\ud83d\udce1 Firebase \uc5f0\uacb0 \uc2dc\ub3c4...");const e=(0,Le.collection)(Ve,"stories"),t=await(0,Le.GG)(e);if(console.log("\ud83d\udcda Firestore \uc751\ub2f5:",t.size,"\uac1c \ubb38\uc11c"),t.empty)console.log("\u26a0\ufe0f Firestore\uc5d0 \ub370\uc774\ud130 \uc5c6\uc74c"),n([]);else{const e=t.docs.map(e=>(0,Oe.A)({id:e.id},e.data())).filter(e=>!0===e.published).sort((e,t)=>new Date(t.publishedAt||t.savedAt)-new Date(e.publishedAt||e.savedAt));console.log("\u2705 \ubc1c\ud589\ub41c \uc2a4\ud1a0\ub9ac:",e.length,"\uac1c"),n(e)}}catch(e){console.error("\u274c Firebase \uc624\ub958:",e),h(e.message);try{const e=JSON.parse(localStorage.getItem("kind_cat_stories")||"[]").filter(e=>!0===e.published);e.length>0&&(console.log("\ud83d\udce6 localStorage\uc5d0\uc11c \ub85c\ub4dc:",e.length,"\uac1c"),n(e))}catch(Je){console.error("localStorage \uc624\ub958:",Je)}}finally{c(!1)}},f=t.filter(e=>{var t,n,i;const s=(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(r.toLowerCase()))||(null===(n=e.storyTitle)||void 0===n?void 0:n.toLowerCase().includes(r.toLowerCase()))||(null===(i=e.description)||void 0===i?void 0:i.toLowerCase().includes(r.toLowerCase())),o=0===a.length||a.some(t=>{var n,r,i,s,a,o;return(null===(n=e.storyTags)||void 0===n||null===(r=n.genre)||void 0===r?void 0:r.includes(t))||(null===(i=e.storyTags)||void 0===i||null===(s=i.mood)||void 0===s?void 0:s.includes(t))||(null===(a=e.storyTags)||void 0===a||null===(o=a.situation)||void 0===o?void 0:o.includes(t))});return s&&o});return(0,Ue.jsxs)("div",{className:"story-library",children:[(0,Ue.jsxs)("div",{className:"library-header",children:[(0,Ue.jsxs)("div",{className:"logo-section",onClick:()=>e("/"),style:{cursor:"pointer"},children:[(0,Ue.jsx)("img",{src:"".concat("/kind-cat","/cat-icon.png"),alt:"CAT",className:"cat-icon",onError:e=>{e.target.style.display="none"}}),(0,Ue.jsx)("img",{src:"".concat("/kind-cat","/kindcat-typo.png"),alt:"KIND CAT",className:"kindcat-typo",onError:e=>{e.target.style.display="none"}})]}),(0,Ue.jsx)("p",{className:"tagline"})]}),u&&(0,Ue.jsxs)("div",{className:"error-banner",children:[(0,Ue.jsxs)("p",{children:["\u26a0\ufe0f Firebase \uc5f0\uacb0 \uc624\ub958: ",u]}),(0,Ue.jsx)("button",{onClick:d,children:"\ub2e4\uc2dc \uc2dc\ub3c4"})]}),(0,Ue.jsx)("div",{className:"search-section",children:(0,Ue.jsx)("input",{type:"text",className:"search-input",placeholder:"\uc2a4\ud1a0\ub9ac \uac80\uc0c9...",value:r,onChange:e=>s(e.target.value)})}),(0,Ue.jsx)("div",{className:"tag-filters",children:["#\uc624\ud53c\uc2a4","#19\uae08","#\ubcd1\uc6d0","#\ud559\uc6d0","#\uc21c\uc815","#\uac15\uacf5","#\uc5f0\uc0c1\uacf5","#\uc9d1\ucc29\uacf5"].map(e=>(0,Ue.jsx)("button",{className:"tag-btn ".concat(a.includes(e)?"active":""),onClick:()=>(e=>{o(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e),children:e},e))}),(0,Ue.jsx)("div",{className:"story-grid",children:f.length>0?f.map(e=>{var t,n;return(0,Ue.jsxs)(De,{to:"/story/".concat(e.id),className:"story-card",children:[e.thumbnail&&(0,Ue.jsx)("div",{className:"story-thumbnail-container",children:(0,Ue.jsx)("img",{src:e.thumbnail.startsWith("http")?e.thumbnail:"".concat("/kind-cat").concat(e.thumbnail.replace(/^\/kind-cat/,"")),alt:e.title||e.storyTitle,className:"story-thumbnail",loading:"lazy",onError:e=>{e.target.style.display="none"}})}),(0,Ue.jsxs)("div",{className:"story-info",children:[(0,Ue.jsx)("h3",{children:e.title||e.storyTitle}),(0,Ue.jsx)("p",{children:e.description}),e.storyTags&&(0,Ue.jsxs)("div",{className:"story-card-tags",children:[null===(t=e.storyTags.genre)||void 0===t?void 0:t.slice(0,2).map((e,t)=>(0,Ue.jsx)("span",{className:"tag genre",children:e},t)),null===(n=e.storyTags.mood)||void 0===n?void 0:n.slice(0,1).map((e,t)=>(0,Ue.jsx)("span",{className:"tag mood",children:e},t))]})]})]},e.id)}):(0,Ue.jsxs)("div",{className:"no-stories",children:[(0,Ue.jsx)("p",{children:"\ubc1c\ud589\ub41c \uc2a4\ud1a0\ub9ac\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Ue.jsx)("button",{className:"btn-go-admin",onClick:()=>e("/admin"),children:"\uad00\ub9ac\uc790 \ud398\uc774\uc9c0\ub85c \uc774\ub3d9"})]})})]})};const Be=function(){var e,t,n,r,s,a,o,l,c,u,h,d,f,p,m,g;const{storyId:v}=ae(),y=se(),[b,w]=(0,i.useState)(null),[x,S]=(0,i.useState)(!0),[E,k]=(0,i.useState)(!1),[_,C]=(0,i.useState)("gong"),[N,A]=(0,i.useState)(0),T=(0,i.useCallback)(e=>{if(!e)return null;if(e.startsWith("http")||e.startsWith("data:"))return e;const t="/kind-cat";let n=e;for(;n.startsWith(t)&&t;)n=n.substring(9);return n.startsWith("/")||(n="/"+n),"".concat(t).concat(n)},[]),I=(0,i.useCallback)(async()=>{try{const e=(0,Le.H9)(Ve,"stories",String(v)),t=await(0,Le.x7)(e);if(t.exists())return w((0,Oe.A)({id:t.id},t.data())),void S(!1);const n=JSON.parse(localStorage.getItem("kind_cat_stories")||"[]").find(e=>String(e.id)===String(v));n?(w(n),S(!1)):(alert("\uc2a4\ud1a0\ub9ac\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4!"),y("/"))}catch(e){console.error("Error:",e);const t=JSON.parse(localStorage.getItem("kind_cat_stories")||"[]").find(e=>String(e.id)===String(v));t?(w(t),S(!1)):y("/")}},[v,y]);if((0,i.useEffect)(()=>{I()},[I]),(0,i.useEffect)(()=>{A(0)},[_]),x)return(0,Ue.jsx)("div",{className:"story-flow-ridi",children:(0,Ue.jsxs)("div",{className:"loading-screen",children:[(0,Ue.jsx)("div",{className:"loading-spinner"}),(0,Ue.jsx)("p",{children:"\ub85c\ub529 \uc911..."})]})});if(!b)return null;const j="gong"===_?b.characterA:b.characterB,D=(null===j||void 0===j?void 0:j.profileImages)||[],P=(null===j||void 0===j?void 0:j.visibility)||{},R=[...new Set([...(null===(e=b.storyTags)||void 0===e?void 0:e.genre)||[],...(null===(t=b.storyTags)||void 0===t?void 0:t.mood)||[],...(null===(n=b.storyTags)||void 0===n?void 0:n.situation)||[]])];return(0,Ue.jsxs)("div",{className:"story-flow-ridi",children:[(0,Ue.jsxs)("div",{className:"hero-section",children:[(0,Ue.jsxs)("div",{className:"hero-image-wrapper",children:[b.thumbnail?(0,Ue.jsx)("img",{src:T(b.thumbnail),alt:b.title,className:"hero-image",onError:e=>{e.target.style.display="none"}}):(0,Ue.jsx)("div",{className:"hero-placeholder"}),(0,Ue.jsx)("div",{className:"hero-gradient"})]}),(0,Ue.jsxs)("div",{className:"hero-nav",children:[(0,Ue.jsx)("button",{className:"nav-back",onClick:()=>y("/"),children:(0,Ue.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,Ue.jsx)("path",{d:"M15 18L9 12L15 6",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,Ue.jsx)("h1",{className:"nav-title",children:b.title||b.storyTitle}),(0,Ue.jsx)("div",{className:"nav-spacer"})]}),(0,Ue.jsx)("div",{className:"hero-info",children:(0,Ue.jsx)("h2",{className:"hero-title",children:b.title||b.storyTitle})})]}),R.length>0&&(0,Ue.jsx)("div",{className:"tags-section",children:(0,Ue.jsx)("div",{className:"tags-scroll",children:R.map((e,t)=>(0,Ue.jsxs)("span",{className:"story-tag",children:["#",e.replace(/^#/,"")]},t))})}),(0,Ue.jsxs)("div",{className:"section",children:[(0,Ue.jsx)("h3",{className:"section-title",children:"\ucd08\uae30\uc0c1\ud669"}),(0,Ue.jsxs)("div",{className:"description-content ".concat(E?"expanded":""),children:[(0,Ue.jsx)("p",{children:b.description}),(null===(r=b.scenario)||void 0===r?void 0:r.situation)&&(0,Ue.jsxs)("p",{className:"situation-text",children:["\ud83d\udccd ",b.scenario.situation]}),(null===(s=b.scenario)||void 0===s?void 0:s.relationship)&&(0,Ue.jsxs)("p",{className:"relation-text",children:["\ud83d\udc95 \uad00\uacc4: ",b.scenario.relationship]})]}),b.description&&b.description.length>100&&(0,Ue.jsxs)("button",{className:"btn-more",onClick:()=>k(!E),children:[E?"\uc811\uae30":"\ub354\ubcf4\uae30",(0,Ue.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",style:{transform:E?"rotate(180deg)":"none"},children:(0,Ue.jsx)("path",{d:"M6 9L12 15L18 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})]})]}),(0,Ue.jsxs)("div",{className:"section",children:[(0,Ue.jsx)("h3",{className:"section-title",children:"\uce90\ub9ad\ud130"}),(0,Ue.jsxs)("div",{className:"char-tabs",children:[(0,Ue.jsxs)("button",{className:"char-tab ".concat("gong"===_?"active":""),onClick:()=>C("gong"),children:[(0,Ue.jsx)("span",{className:"tab-name",children:null===(a=b.characterA)||void 0===a?void 0:a.name}),(null===(o=b.characterA)||void 0===o||null===(l=o.tags)||void 0===l?void 0:l[0])&&(0,Ue.jsxs)("span",{className:"tab-tag",children:["#",b.characterA.tags[0].replace(/^#/,"")]})]}),(0,Ue.jsxs)("button",{className:"char-tab ".concat("su"===_?"active":""),onClick:()=>C("su"),children:[(0,Ue.jsx)("span",{className:"tab-name",children:null===(c=b.characterB)||void 0===c?void 0:c.name}),(null===(u=b.characterB)||void 0===u||null===(h=u.tags)||void 0===h?void 0:h[0])&&(0,Ue.jsxs)("span",{className:"tab-tag",children:["#",b.characterB.tags[0].replace(/^#/,"")]})]})]}),(0,Ue.jsxs)("div",{className:"character-card-large",children:[(0,Ue.jsxs)("div",{className:"card-image-area",children:[D.length>0?(0,Ue.jsxs)(Ue.Fragment,{children:[D.length>1&&(0,Ue.jsx)("div",{className:"card-indicators",children:D.map((e,t)=>(0,Ue.jsx)("div",{className:"card-indicator ".concat(t===N?"active":""),onClick:()=>A(t)},t))}),(0,Ue.jsx)("img",{src:T(D[N]),alt:null===j||void 0===j?void 0:j.name,className:"card-image",onError:e=>{e.target.src="".concat("/kind-cat","/cat-icon.png")}}),D.length>1&&(0,Ue.jsxs)(Ue.Fragment,{children:[(0,Ue.jsx)("div",{className:"card-nav prev",onClick:e=>{e.stopPropagation(),A(e=>Math.max(0,e-1))}}),(0,Ue.jsx)("div",{className:"card-nav next",onClick:e=>((e,t)=>{e.stopPropagation(),A(e=>Math.min(t,e+1))})(e,D.length-1)})]})]}):(0,Ue.jsx)("div",{className:"card-no-image",children:"\ud83d\udcf7"}),(0,Ue.jsx)("div",{className:"card-gradient"}),(0,Ue.jsx)("span",{className:"card-role-badge ".concat(_),children:"gong"===_?"\uacf5":"\uc218"}),(0,Ue.jsxs)("div",{className:"card-info-overlay",children:[(0,Ue.jsxs)("div",{className:"card-name-row",children:[(0,Ue.jsx)("h3",{className:"card-name",children:null===j||void 0===j?void 0:j.name}),(null===j||void 0===j?void 0:j.age)&&(0,Ue.jsx)("span",{className:"card-age",children:j.age})]}),(0,Ue.jsxs)("p",{className:"card-meta",children:[null===j||void 0===j?void 0:j.occupation,(null===j||void 0===j||null===(d=j.bodyDetails)||void 0===d?void 0:d.height)&&" \xb7 ".concat(j.bodyDetails.height)]})]})]}),(0,Ue.jsxs)("div",{className:"card-content",children:[!1!==P.tags&&(null===j||void 0===j||null===(f=j.tags)||void 0===f?void 0:f.length)>0&&(0,Ue.jsx)("div",{className:"card-tags",children:j.tags.map((e,t)=>(0,Ue.jsxs)("span",{className:"card-tag",children:["#",e.replace(/^#/,"")]},t))}),!1!==P.basicInfo&&(0,Ue.jsxs)("div",{className:"card-section",children:[(0,Ue.jsx)("h4",{children:"\ud83d\udccb \uae30\ubcf8 \uc815\ubcf4"}),(null===j||void 0===j?void 0:j.personality)&&(0,Ue.jsxs)("p",{children:[(0,Ue.jsx)("strong",{children:"\uc131\uaca9:"})," ",j.personality]}),(null===j||void 0===j?void 0:j.appearance)&&(0,Ue.jsxs)("p",{children:[(0,Ue.jsx)("strong",{children:"\uc678\ubaa8:"})," ",j.appearance]}),(null===j||void 0===j||null===(p=j.bodyDetails)||void 0===p?void 0:p.build)&&(0,Ue.jsxs)("p",{children:[(0,Ue.jsx)("strong",{children:"\uccb4\ud615:"})," ",j.bodyDetails.build]}),(null===j||void 0===j?void 0:j.speech)&&(0,Ue.jsxs)("p",{children:[(0,Ue.jsx)("strong",{children:"\ub9d0\ud22c:"})," ",j.speech]})]}),!0===P.sexualDetails&&(null===j||void 0===j?void 0:j.sexualDetails)&&(0,Ue.jsxs)("div",{className:"card-section sensitive",children:[(0,Ue.jsx)("h4",{children:"\ud83d\udd1e \uc131\uc801 \ub514\ud14c\uc77c"}),"gong"===_?(0,Ue.jsxs)(Ue.Fragment,{children:[j.sexualDetails.genital&&(0,Ue.jsxs)("p",{children:[(0,Ue.jsx)("strong",{children:"\uc131\uae30:"})," ",j.sexualDetails.genital]}),j.sexualDetails.body&&(0,Ue.jsxs)("p",{children:[(0,Ue.jsx)("strong",{children:"\uc2e0\uccb4:"})," ",j.sexualDetails.body]})]}):(0,Ue.jsxs)(Ue.Fragment,{children:[j.sexualDetails.hole&&(0,Ue.jsxs)("p",{children:[(0,Ue.jsx)("strong",{children:"\uad6c\uba4d:"})," ",j.sexualDetails.hole]}),j.sexualDetails.reactions&&(0,Ue.jsxs)("p",{children:[(0,Ue.jsx)("strong",{children:"\ubc18\uc751:"})," ",j.sexualDetails.reactions]}),j.sexualDetails.nipple&&(0,Ue.jsxs)("p",{children:[(0,Ue.jsx)("strong",{children:"\uc720\ub450:"})," ",j.sexualDetails.nipple]}),j.sexualDetails.genital&&(0,Ue.jsxs)("p",{children:[(0,Ue.jsx)("strong",{children:"\uc131\uae30:"})," ",j.sexualDetails.genital]})]}),j.sexualDetails.scent&&(0,Ue.jsxs)("p",{children:[(0,Ue.jsx)("strong",{children:"\uccb4\ud5a5:"})," ",j.sexualDetails.scent]}),j.sexualDetails.special&&(0,Ue.jsxs)("p",{children:[(0,Ue.jsx)("strong",{children:"\ud2b9\uc218:"})," ",j.sexualDetails.special]})]}),!0===P.actions&&(0,Ue.jsxs)(Ue.Fragment,{children:[(null===j||void 0===j||null===(m=j.preferredActions)||void 0===m?void 0:m.length)>0&&(0,Ue.jsxs)("div",{className:"card-section",children:[(0,Ue.jsx)("h4",{children:"\u2705 \uc120\ud638 \ud589\ub3d9"}),(0,Ue.jsx)("ul",{children:j.preferredActions.map((e,t)=>(0,Ue.jsx)("li",{children:e},t))})]}),(null===j||void 0===j||null===(g=j.avoidedActions)||void 0===g?void 0:g.length)>0&&(0,Ue.jsxs)("div",{className:"card-section",children:[(0,Ue.jsx)("h4",{children:"\u274c \ube44\uc120\ud638 \ud589\ub3d9"}),(0,Ue.jsx)("ul",{children:j.avoidedActions.map((e,t)=>(0,Ue.jsx)("li",{children:e},t))})]})]})]})]})]}),(0,Ue.jsx)("div",{className:"start-section",children:(0,Ue.jsx)("button",{className:"btn-start",onClick:()=>{const e=localStorage.getItem("gemini_api_key");y(e?"/chat/".concat(v):"/apikey/".concat(v))},children:"\ud83c\udfad \uc2a4\ud1a0\ub9ac \uc2dc\uc791\ud558\uae30"})})]})};const qe=function(){var e;const{storyId:t}=ae(),n=se(),[r,s]=(0,i.useState)(""),[a,o]=(0,i.useState)(null),[l,c]=(0,i.useState)(!0),u=(0,i.useCallback)(async()=>{try{const e=(0,Le.H9)(Ve,"stories",String(t)),r=await(0,Le.x7)(e);if(r.exists())return o((0,Oe.A)({id:r.id},r.data())),void c(!1);const i=JSON.parse(localStorage.getItem("kind_cat_stories")||"[]").find(e=>String(e.id)===String(t));if(i)return o(i),void c(!1);c(!1),alert("\uc2a4\ud1a0\ub9ac\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4! \uba54\uc778 \ud654\uba74\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4."),n("/")}catch(e){console.error("Error loading story:",e);const r=JSON.parse(localStorage.getItem("kind_cat_stories")||"[]").find(e=>String(e.id)===String(t));r?o(r):(alert("\uc2a4\ud1a0\ub9ac\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4! \uba54\uc778 \ud654\uba74\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4."),n("/")),c(!1)}},[t,n]);return(0,i.useEffect)(()=>{u();const e=localStorage.getItem("gemini_api_key");e&&s(e)},[u]),l?(0,Ue.jsx)("div",{className:"apikey-screen",children:(0,Ue.jsxs)("div",{className:"loading",children:[(0,Ue.jsx)("div",{className:"loading-spinner"}),(0,Ue.jsx)("p",{children:"\ub85c\ub529 \uc911..."})]})}):(0,Ue.jsx)("div",{className:"apikey-screen",children:(0,Ue.jsxs)("div",{className:"apikey-container",children:[(0,Ue.jsxs)("div",{className:"apikey-header",children:[(0,Ue.jsx)("img",{src:"".concat("/kind-cat","/cat-icon.png"),alt:"CAT",className:"cat-icon",onError:e=>e.target.style.display="none"}),(0,Ue.jsx)("h1",{children:"API \ud0a4 \uc124\uc815"}),(0,Ue.jsx)("p",{children:"Gemini API \ud0a4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694"})]}),a&&(0,Ue.jsxs)("div",{className:"story-preview",children:[(0,Ue.jsxs)("h3",{children:["\ud83d\udcd6 ",a.title||a.storyTitle]}),(0,Ue.jsxs)("p",{children:[null===(e=a.description)||void 0===e?void 0:e.substring(0,100),"..."]})]}),(0,Ue.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r.trim()?(localStorage.setItem("gemini_api_key",r.trim()),n("/chat/".concat(t))):alert("API \ud0a4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694!")},className:"apikey-form",children:[(0,Ue.jsxs)("div",{className:"input-group",children:[(0,Ue.jsx)("label",{htmlFor:"apiKey",children:"Gemini API Key"}),(0,Ue.jsx)("input",{type:"password",id:"apiKey",value:r,onChange:e=>s(e.target.value),placeholder:"AIzaSy...",autoComplete:"off"})]}),(0,Ue.jsxs)("div",{className:"help-text",children:[(0,Ue.jsx)("p",{children:"\ud83d\udd11 API \ud0a4\ub294 \ube0c\ub77c\uc6b0\uc800\uc5d0 \ub85c\uceec \uc800\uc7a5\ub429\ub2c8\ub2e4."}),(0,Ue.jsx)("p",{children:(0,Ue.jsx)("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",children:"\ud83d\udc49 Gemini API \ud0a4 \ubc1c\uae09\ubc1b\uae30"})})]}),(0,Ue.jsxs)("div",{className:"button-group",children:[(0,Ue.jsx)("button",{type:"submit",className:"btn-primary",children:"\ud83c\udfad \uc2a4\ud1a0\ub9ac \uc2dc\uc791\ud558\uae30"}),localStorage.getItem("gemini_api_key")&&(0,Ue.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>{localStorage.getItem("gemini_api_key")?n("/chat/".concat(t)):alert("\uc800\uc7a5\ub41c API \ud0a4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. API \ud0a4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694!")},children:"\uc800\uc7a5\ub41c \ud0a4\ub85c \uacc4\uc18d\ud558\uae30"})]})]}),(0,Ue.jsx)("button",{className:"btn-back",onClick:()=>n("/story/".concat(t)),children:"\u2190 \uc2a4\ud1a0\ub9ac\ub85c \ub3cc\uc544\uac00\uae30"})]})})};const He=function(){var e;const{storyId:t}=ae(),n=se(),[r,s]=(0,i.useState)(null),[a,o]=(0,i.useState)([]),[l,c]=(0,i.useState)(""),[u,h]=(0,i.useState)(0),[d,f]=(0,i.useState)(0),[p,m]=(0,i.useState)(!1),[g,v]=(0,i.useState)(!0),[y,b]=(0,i.useState)(null),w=(0,i.useRef)(null),x=(0,i.useCallback)(e=>{if(!e)return null;if(e.startsWith("http")||e.startsWith("data:"))return e;const t="/kind-cat";let n=e;for(;n.startsWith(t)&&t;)n=n.substring(9);return n.startsWith("/")||(n="/"+n),"".concat(t).concat(n)},[]);(0,i.useEffect)(()=>{(()=>{var e;null===(e=w.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()},[a]);const S=(0,i.useCallback)(async()=>{console.log("\ud83d\udd0d Loading story for chat with ID:",t);try{const e=(0,Le.H9)(Ve,"stories",String(t)),r=await(0,Le.x7)(e);if(r.exists()){const e=(0,Oe.A)({id:r.id},r.data());return console.log("\u2705 Story found in Firebase:",e.title),void E(e)}const i=JSON.parse(localStorage.getItem("kind_cat_stories")||"[]").find(e=>String(e.id)===String(t));if(i)return console.log("\u2705 Story found in localStorage:",i.title),void E(i);console.error("\u274c Story not found:",t),v(!1),alert("\uc2a4\ud1a0\ub9ac\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4! \uba54\uc778 \ud654\uba74\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4."),n("/")}catch(e){console.error("\u274c Error loading story:",e);try{const e=JSON.parse(localStorage.getItem("kind_cat_stories")||"[]").find(e=>String(e.id)===String(t));if(e)return console.log("\u2705 Fallback to localStorage:",e.title),void E(e)}catch(Je){console.error("localStorage error:",Je)}v(!1),alert("\uc2a4\ud1a0\ub9ac \ub85c\ub529 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),n("/")}},[t,n]),E=e=>{var t;s(e),o([{role:"system",content:(null===(t=e.scenario)||void 0===t?void 0:t.situation)||"\ub450 \uc0ac\ub78c\uc774 \ub9c8\uc8fc\ucce4\ub2e4.",type:"narration"}]),v(!1)};(0,i.useEffect)(()=>{S()},[S]);const k=(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(r){if(e&&r.keywordImages){const t=r.keywordImages.find(t=>t.keyword&&e.toLowerCase().includes(t.keyword.toLowerCase()));if(null!==t&&void 0!==t&&t.image)return console.log("\ud83d\uddbc\ufe0f \ud0a4\uc6cc\ub4dc \ubc30\uacbd \ubcc0\uacbd:",e),void b(t.image)}if(r.backgroundImages){let e=[];if(e=u<=20?r.backgroundImages[0]||r.backgroundImages[0]||[]:u<=40?r.backgroundImages[20]||r.backgroundImages[20]||[]:u<=60?r.backgroundImages[40]||r.backgroundImages[40]||[]:u<=80?r.backgroundImages[60]||r.backgroundImages[60]||[]:r.backgroundImages[80]||r.backgroundImages[80]||[],e.length>0){const t=Math.floor(u%20/20*e.length),n=e[Math.min(t,e.length-1)];console.log("\ud83d\uddbc\ufe0f \ud638\uac10\ub3c4 \ubc30\uacbd \ubcc0\uacbd:",u,n),b(n)}}}},[r,u]);(0,i.useEffect)(()=>{null!==r&&void 0!==r&&r.backgroundImages&&k()},[u,r,k]);const _=()=>{var e,t,n,i,s,a,o,l,c,h;if(!r)return"";const f=r.characterA,p=r.characterB,m=(e,t)=>e?t<=20?e.affection_0_20||"\ub2f9\uc2e0":t<=40?e.affection_21_40||"\ub2f9\uc2e0":t<=60?e.affection_41_60||"\ub2f9\uc2e0":t<=80?e.affection_61_80||"\ub2f9\uc2e0":e.affection_81_100||"\ub2f9\uc2e0":"\ub2f9\uc2e0",g=m(null===f||void 0===f?void 0:f.callingSystem,u),v=m(null===p||void 0===p?void 0:p.callingSystem,u);return"\ub2f9\uc2e0\uc740 \ud55c\uad6d BL \uc778\ud130\ub799\ud2f0\ube0c \ud53d\uc158\uc758 AI\uc785\ub2c8\ub2e4.\n\n[\uce90\ub9ad\ud130 \uc815\ubcf4]\n\uacf5(\u653b): ".concat((null===f||void 0===f?void 0:f.name)||"\uce90\ub9ad\ud130A"," (").concat((null===f||void 0===f?void 0:f.age)||"?","\uc138, ").concat((null===f||void 0===f?void 0:f.occupation)||"?",")\n- \uc131\uaca9: ").concat((null===f||void 0===f?void 0:f.personality)||"?","\n- \uc678\ubaa8: ").concat((null===f||void 0===f?void 0:f.appearance)||"?","\n- \ub9d0\ud22c: ").concat((null===f||void 0===f?void 0:f.speech)||"?","\n\n\uc218(\u53d7): ").concat((null===p||void 0===p?void 0:p.name)||"\uce90\ub9ad\ud130B"," (").concat((null===p||void 0===p?void 0:p.age)||"?","\uc138, ").concat((null===p||void 0===p?void 0:p.occupation)||"?",")\n- \uc131\uaca9: ").concat((null===p||void 0===p?void 0:p.personality)||"?","\n- \uc678\ubaa8: ").concat((null===p||void 0===p?void 0:p.appearance)||"?","\n- \ub9d0\ud22c: ").concat((null===p||void 0===p?void 0:p.speech)||"?","\n\n[\uce90\ub9ad\ud130 \ud0dc\uadf8]\n\uacf5: ").concat((null===f||void 0===f||null===(e=f.tags)||void 0===e?void 0:e.join(", "))||"\uc5c6\uc74c","\n\uc218: ").concat((null===p||void 0===p||null===(t=p.tags)||void 0===t?void 0:t.join(", "))||"\uc5c6\uc74c","\n\n[\uc120\ud638 \ud589\ub3d9]\n\uacf5: ").concat((null===f||void 0===f||null===(n=f.preferredActions)||void 0===n?void 0:n.join(", "))||"\uc5c6\uc74c","\n\uc218: ").concat((null===p||void 0===p||null===(i=p.preferredActions)||void 0===i?void 0:i.join(", "))||"\uc5c6\uc74c","\n\n[\ube44\uc120\ud638 \ud589\ub3d9 - \uc808\ub300 \uc0ac\uc6a9 \uae08\uc9c0]\n\uacf5: ").concat((null===f||void 0===f||null===(s=f.avoidedActions)||void 0===s?void 0:s.join(", "))||"\uc5c6\uc74c","\n\uc218: ").concat((null===p||void 0===p||null===(a=p.avoidedActions)||void 0===a?void 0:a.join(", "))||"\uc5c6\uc74c","\n\n[\ud638\uce6d \uc2dc\uc2a4\ud15c - \ud604\uc7ac \ud638\uac10\ub3c4: ").concat(u,"\uc810]\n\uacf5\uc774 \uc218\ub97c \ubd80\ub974\ub294 \ud638\uce6d: ").concat(g,"\n\uc218\uac00 \uacf5\uc744 \ubd80\ub974\ub294 \ud638\uce6d: ").concat(v,"\n\n[\uc2dc\ub098\ub9ac\uc624]\n- \uad00\uacc4: ").concat((null===(o=r.scenario)||void 0===o?void 0:o.relationship)||"?","\n- \uc7a5\uc18c: ").concat((null===(l=r.scenario)||void 0===l?void 0:l.location)||"?","\n- \uc0c1\ud669: ").concat((null===(c=r.scenario)||void 0===c?void 0:c.situation)||"?","\n- \uc2dc\uac04: ").concat((null===(h=r.scenario)||void 0===h?void 0:h.time)||"?","\n\n[\ud604\uc7ac \uc0c1\ud0dc]\n- \ud638\uac10\ub3c4: ").concat(u,"\uc810 (0-100)\n- \ud765\ubd84\ub3c4: ").concat(d,'\uc810 (0-100)\n\n[\ud575\uc2ec \uaddc\uce59]\n1. \uc751\ub2f5\uc740 \ubc18\ub4dc\uc2dc JSON \ud615\uc2dd\uc73c\ub85c\ub9cc \ucd9c\ub825\n2. \uc9c0\ubb38\uacfc \ub300\uc0ac \uba85\ud655\ud788 \uad6c\ubd84\n3. \uce90\ub9ad\ud130 \uc131\uaca9\uacfc \ud0dc\uadf8 \ubc18\uc601\n4. \ud638\uac10\ub3c4 \uc810\uc9c4\uc801 \uc99d\uac00 (-10 ~ +15)\n5. \uc120\ud638 \ud589\ub3d9 \uc6b0\uc120, \ube44\uc120\ud638 \ud589\ub3d9 \ud68c\ud53c\n6. \ud604\uc7ac \ud638\uac10\ub3c4\uc5d0 \ub9de\ub294 \ud638\uce6d \uc0ac\uc6a9\n7. \uc9c0\ubb38\uc740 200-300\uc790, \ub300\uc0ac\ub294 \uc790\uc5f0\uc2a4\ub7fd\uac8c\n\n[\uc751\ub2f5 \ud615\uc2dd]\n{\n  "narration": "\uc9c0\ubb38 (200-300\uc790, \uac10\uac01\uc801\uc774\uace0 \uad6c\uccb4\uc801\uc73c\ub85c)",\n  "dialogues": [\n    {"character": "').concat((null===f||void 0===f?void 0:f.name)||"\uacf5",'", "text": "\ub300\uc0ac (\ud604\uc7ac \ud638\uce6d \uc0ac\uc6a9)"},\n    {"character": "').concat((null===p||void 0===p?void 0:p.name)||"\uc218",'", "text": "\ub300\uc0ac (\ud604\uc7ac \ud638\uce6d \uc0ac\uc6a9)"}\n  ],\n  "affection_change": -10\uc5d0\uc11c +15 \uc0ac\uc774 \uc815\uc218,\n  "excitement_change": 0\uc5d0\uc11c +10 \uc0ac\uc774 \uc815\uc218,\n  "choices": ["\uc120\ud0dd\uc9c01", "\uc120\ud0dd\uc9c02", "\uc120\ud0dd\uc9c03", "\uc120\ud0dd\uc9c04"]\n}')},C=e=>{const t=(e=>{try{let t=e.trim();return t=t.replace(/^```json\s*/i,""),t=t.replace(/^```\s*/i,""),t=t.replace(/```\s*$/i,""),t=t.trim(),JSON.parse(t)}catch(t){return console.error("JSON \ud30c\uc2f1 \uc2e4\ud328:",t),console.log("\uc6d0\ubcf8 \uc751\ub2f5:",e),null}})(e);if(t){"number"===typeof t.affection_change&&h(e=>Math.max(0,Math.min(100,e+t.affection_change))),"number"===typeof t.excitement_change&&f(e=>Math.max(0,Math.min(100,e+t.excitement_change)));const e=[];t.narration&&e.push({role:"assistant",content:t.narration,type:"narration"}),t.dialogues&&Array.isArray(t.dialogues)&&t.dialogues.forEach(t=>{t.character&&t.text&&e.push({role:"assistant",content:"".concat(t.character,': "').concat(t.text,'"'),type:"dialogue",character:t.character})}),t.choices&&Array.isArray(t.choices)&&t.choices.length>0&&e.push({role:"choices",content:t.choices,type:"choices"}),o(t=>[...t,...e])}else o(t=>[...t,{role:"assistant",content:e,type:"text"}])},N=async()=>{if(!l.trim()||p||!r)return;const e={role:"user",content:l,type:"user"};o(t=>[...t,e]),(e=>{if(null!==r&&void 0!==r&&r.keywordImages)for(const t of r.keywordImages)if(t.keyword&&e.toLowerCase().includes(t.keyword.toLowerCase())){k(t.keyword);break}})(l),c(""),m(!0);try{const e=localStorage.getItem("gemini_api_key");if(!e)return alert("API \ud0a4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4! \ub2e4\uc2dc \uc124\uc815\ud574\uc8fc\uc138\uc694."),n("/apikey/".concat(t)),void m(!1);const r=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:_()+"\n\n\uc0ac\uc6a9\uc790 \uc120\ud0dd: "+l}]}],generationConfig:{temperature:.9,topK:40,topP:.95,maxOutputTokens:1024}})});if(429===r.status){var i,s,a,u,h;o(e=>[...e,{role:"system",content:"\u23f3 API \uc694\uccad \ud55c\ub3c4 \ucd08\uacfc... 10\ucd08 \ud6c4 \uc790\ub3d9 \uc7ac\uc2dc\ub3c4\ud569\ub2c8\ub2e4.",type:"info"}]),await new Promise(e=>setTimeout(e,1e4));const t=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:_()+"\n\n\uc0ac\uc6a9\uc790 \uc120\ud0dd: "+l}]}],generationConfig:{temperature:.9,topK:40,topP:.95,maxOutputTokens:1024}})});if(!t.ok)throw new Error("\uc7ac\uc2dc\ub3c4 \uc2e4\ud328: ".concat(t.status));const n=await t.json();return null!==(i=n.candidates)&&void 0!==i&&null!==(s=i[0])&&void 0!==s&&null!==(a=s.content)&&void 0!==a&&null!==(u=a.parts)&&void 0!==u&&null!==(h=u[0])&&void 0!==h&&h.text&&C(n.candidates[0].content.parts[0].text),void m(!1)}if(!r.ok){const e=await r.json();throw console.error("API \uc751\ub2f5 \uc624\ub958:",e),new Error("API \uc624\ub958: ".concat(r.status))}const c=await r.json();if(console.log("AI \uc751\ub2f5:",c),!c.candidates||0===c.candidates.length)throw new Error("AI \uc751\ub2f5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");const d=c.candidates[0].content.parts[0].text;console.log("AI \ud14d\uc2a4\ud2b8:",d),C(d)}catch(d){console.error("AI \uc751\ub2f5 \uc624\ub958:",d),alert("AI \uc751\ub2f5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.\n\n".concat(d.message,"\n\nAPI \ud0a4\ub97c \ud655\uc778\ud574\uc8fc\uc138\uc694.")),o(e=>[...e,{role:"system",content:"\u26a0\ufe0f \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.",type:"error"}])}m(!1)};return g?(0,Ue.jsx)("div",{className:"chat-interface",children:(0,Ue.jsxs)("div",{className:"loading",children:[(0,Ue.jsx)("div",{className:"loading-spinner"}),(0,Ue.jsx)("p",{children:"\uc2a4\ud1a0\ub9ac\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."})]})}):r?(0,Ue.jsxs)("div",{className:"chat-interface",style:{backgroundImage:y?"url(".concat(x(y),")"):"none"},children:[(0,Ue.jsxs)("div",{className:"chat-header",children:[(0,Ue.jsx)("button",{className:"btn-back",onClick:()=>n("/"),children:"\u2190 \ud648"}),(0,Ue.jsx)("div",{className:"header-logo",onClick:()=>n("/"),style:{cursor:"pointer"},children:(0,Ue.jsx)("img",{src:"".concat("/kind-cat","/cat-icon.png"),alt:"CAT",className:"header-cat-icon",onError:e=>e.target.style.display="none"})}),(0,Ue.jsxs)("div",{className:"header-info",children:[(0,Ue.jsx)("h3",{children:(null===(e=r.characterA)||void 0===e?void 0:e.name)||"\uce90\ub9ad\ud130"}),(0,Ue.jsxs)("div",{className:"affection-bar",children:[(0,Ue.jsx)("div",{className:"affection-fill",style:{width:"".concat(u,"%")}}),(0,Ue.jsxs)("span",{className:"affection-text",children:["\ud638\uac10\ub3c4 ",u,"%"]})]})]})]}),(0,Ue.jsxs)("div",{className:"messages-container",children:[a.map((e,t)=>"choices"===e.type?(0,Ue.jsx)("div",{className:"choices-container",children:e.content.map((e,t)=>(0,Ue.jsx)("button",{className:"choice-btn",onClick:()=>(e=>{c(e)})(e),children:e},t))},t):(0,Ue.jsx)("div",{className:"message ".concat(e.role," ").concat(e.type||""),children:(0,Ue.jsx)("p",{children:e.content})},t)),p&&(0,Ue.jsx)("div",{className:"message loading",children:(0,Ue.jsxs)("div",{className:"typing-indicator",children:[(0,Ue.jsx)("span",{}),(0,Ue.jsx)("span",{}),(0,Ue.jsx)("span",{})]})}),(0,Ue.jsx)("div",{ref:w})]}),(0,Ue.jsxs)("div",{className:"input-container",children:[(0,Ue.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),N())},placeholder:"\uc120\ud0dd\ud558\uac70\ub098 \uc9c1\uc811 \uc785\ub825\ud558\uc138\uc694...",disabled:p}),(0,Ue.jsx)("button",{onClick:N,disabled:p||!l.trim(),children:"\uc804\uc1a1"})]})]}):(0,Ue.jsx)("div",{className:"chat-interface",children:(0,Ue.jsxs)("div",{className:"error-container",children:[(0,Ue.jsx)("h2",{children:"\u26a0\ufe0f \uc2a4\ud1a0\ub9ac\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,Ue.jsxs)("p",{children:["\uc2a4\ud1a0\ub9ac ID: ",t]}),(0,Ue.jsx)("button",{className:"btn-back",onClick:()=>n("/"),children:"\ud648\uc73c\ub85c \ub3cc\uc544\uac00\uae30"})]})})},Ke="\uc724\uac04\ud638\uc0ac \uc6b8\ub9ac\uae30",We="\uc724\uac04\ud638\uc0ac\uc758 \uc57d\uc810\uc744 \ucc3e\uc544\uc11c \uc6b8\ub824\ubcf4\uc138\uc694",Qe={name:"\uac15\uc8fc\ud601",age:"35",role:"\uacf5",personality:"\ub0c9\ud608\ud568, \uc644\ubcbd\uc8fc\uc758/\uac15\ubc15\uc801, \uc9d1\ucc29\uc801",occupation:"\uc678\uacfc \uc758\uc0ac (\ubcd1\uc6d0\uc7a5 \uc544\ub4e4)",appearance:"\uae4a\uc740 \uc544\uc774\ud640\uacfc \uc9d9\uc740 \ud751\ubc1c, \ud478\ub978 \ub208\ub3d9\uc790, \ub0a0\uce74\ub85c\uc6b4 \ud131\uc120. 188cm\uc758 \uc555\ub3c4\uc801 \ud0a4\uc640 \uac70\ub300\ud55c \uadfc\uc721\uc9c8 \uccb4\ud615, \ub5a1 \ubc8c\uc5b4\uc9c4 \uc5b4\uae68\uc640 \ud0c4\ud0c4\ud55c \uac00\uc2b4 \uadfc\uc721. \uae54\ub054\ud558\uac8c \ub118\uae34 \ud751\ubc1c, \ud608\uad00\uc774 \ub3c4\ub4dc\ub77c\uc9c4 \ud314\ub69d",bodyDetails:{height:"188cm",build:"\uac70\ub300\ud55c \uadfc\uc721\uc9c8",features:"\ub5a1 \ubc8c\uc5b4\uc9c4 \uc5b4\uae68, \ud0c4\ud0c4\ud55c \uac00\uc2b4 \uadfc\uc721, \ud608\uad00\uc774 \ub3c4\ub4dc\ub77c\uc9c4 \ud314\ub69d, \ub113\uc740 \uc190"},speech:"\uc9e7\uace0 \ub2e8\uc815\uc801\uc774\uba70 \uad8c\uc704\uc801. \uac10\uc815\uc744 \uc228\uae34 \ucc44 \uad00\ucc30\ud558\ub4ef \ub9d0\ud558\uba70 \ud1b5\uc81c\uc801\uc778 \uba85\ub839\uc870",callingSystem:{affection_0_20:"\uc724\uac04\ud638\uc0ac",affection_21_40:"\uc724\uac04\ud638\uc0ac,\uc724\ud0dc\uc774",affection_41_60:"\uc724\ud0dc\uc774,\ud0dc\uc774,\uc724\uac04\ud638\uc0ac",affection_61_80:"\uc724\ud0dc\uc774,\ud0dc\uc774",affection_81_100:"\ub0b4\uaebc,\ud0dc\uc774"},avatar:null,avatarPreview:null,sexualDetails:{genital:"\uad75\uace0 \uc555\ub3c4\uc801\uc778 \ud615\ud0dc, \ub728\uac70\uc6b4 \uccb4\uc628, \ud0c4\ud0c4\ud55c \uadfc\uc721",body:"\uac70\ub300\ud55c \uadfc\uc721\uc9c8, \ub113\uc740 \uc190, \uac15\ud55c \uc545\ub825",scent:"\uc9c4\ud55c \uc0ac\ud5a5/\uba38\uc2a4\ud06c",special:"\uc54c\ud30c \ud398\ub85c\ubaac \ubd84\ube44, \uad50\ubbf8 \ubcf8\ub2a5, \ub9e4\ub4ed \ud615\uc131"},tags:["#\uc54c\ud30c\uacf5","#\ub0c9\ud608\uacf5","#\ub5a1\ub300\uacf5","#\uc5f0\uc0c1\uacf5"],preferredActions:["\uc218\uce58\uc2ec\uc744 \uc720\ubc1c\ud558\ub294 \uc9c0\uc2dc","\ubc1c\uc815\uae30 \uc911 \ud0dc\uc774\uc758 \uc2e0\uc74c","\uc720\ub450\ub098 \ubaa9\ub35c\ubbf8\uc5d0 \ud754\uc801 \ub0a8\uae30\uae30","\uc815\uc2e0\uc801\uc778 \uc555\ubc15","\uc218\uc220\ubcf5\uc744 \uc785\uace0 \uc720\ud76c","\uc644\ubcbd\ud588\ub358 \ud0dc\uc774\uac00 \ud750\ud2b8\ub7ec\uc9c8 \ub54c","\ubcf8\uc778\uc5d0\uac8c \uc758\uc874"],avoidedActions:["\ud0dc\uc774\uac00 \ud544\uc0ac\uc801\uc73c\ub85c \uac70\ubd80\ud558\ub294 \uac83","\uac10\uc815\uc801\uc778 \ud638\uc18c","\ud1b5\uc81c\uac00 \uc548\ub428","\uc724\ud0dc\uc774\uac00 \ubc18\uc751\uc744 \uc548\ud568","\ub300\ub2f5\uc744 \uc548\ud558\uac70\ub098 \ud53c\ud568","\uc724\ud0dc\uc774\uac00 \ud765\ubd84\uc744 \ucc38\uc74c"],visibility:{basicInfo:!0,sexualDetails:!1,tags:!0,actions:!1}},Ge={name:"\uc724\ud0dc\uc774",age:"24",role:"\uc218",personality:"\uacbd\uacc4\uc2ec \uac15\ud568, \uc644\ubcbd\uc8fc\uc758/\uac15\ubc15\uc801, \ub0b4\ud5a5\uc801/\uc0ac\ud68c\uc131 \uacb0\uc5ec",occupation:"\uc2e0\uc785 \uac04\ud638\uc0ac",appearance:"\uc815\ub3c8\ub41c \uae08\ubc1c\uacfc \uae68\ub057\ud55c \ud53c\ubd80, \uc778\ud615 \uac19\uc740 \uc5bc\uad74. \uc9d9\uc740 \uc30d\uaebc\ud480\uacfc \ub465\uadfc \ub208\ub9e4\uc9c0\ub9cc \uac10\uc815\uc744 \uc228\uae34 \uac00\ub294 \ub208\ub9e4. \ud558\uc580 \ud53c\ubd80\ub294 \uc27d\uac8c \ubd89\uc5b4\uc9c0\ub294 \ubbfc\uac10 \uccb4\uc9c8",bodyDetails:{height:"178cm",build:"\uc2ac\ub9bc\ud0c4\ud0c4 \uccb4\ud615, \uc587\uc9c0\ub9cc \ud0c4\ud0c4\ud55c \ud5c8\ub9ac\uc640 \uc798\ub85d\ud55c \ud5c8\ub9ac. ",features:"\uc798\ub85d\ud55c \ud5c8\ub9ac, \ubc00\ud06c\ube5b \ud558\uc580 \ud53c\ubd80, \uc27d\uac8c \ubd89\uc5b4\uc9c0\ub294 \ubbfc\uac10 \uccb4\uc9c8"},speech:"\uc0ac\ubb34\uc801\uc774\uace0 \uacf5\uc190\ud55c \uc874\ub313\ub9d0. \uac10\uc815\uc744 \ub4dc\ub7ec\ub0b4\uc9c0 \uc54a\uae30 \uc704\ud574 \uc808\uc81c\ub418\uace0 \ub531\ub531\ud568",callingSystem:{affection_0_20:"\uacfc\uc7a5\ub2d8",affection_21_40:"\uacfc\uc7a5\ub2d8",affection_41_60:"\uacfc\uc7a5\ub2d8",affection_61_80:"\uacfc\uc7a5\ub2d8",affection_81_100:"\ud615,\uacfc\uc7a5\ub2d8,\uc8fc\uc778\ub2d8"},avatar:null,avatarPreview:null,sexualDetails:{hole:"\ucabc\uc774\ub294 \ud798 \ub9e4\uc6b0 \uac15\ud568, \uc2ac\ub9ad \uacfc\ub2e4 \ubd84\ube44, \uae4a\uc740 \uacf3\ub9cc \ubbfc\uac10,\uc27d\uac8c \uc816\uc74c.",reactions:"\uc218\uce58\uc2ec=\ud765\ubd84, \uc27d\uac8c \ubd89\uc5b4\uc9c0\ub294 \ud53c\ubd80, \ubc1c\uc791\uc801 \uacbd\ub828, \ub208\ubb3c \ud758\ub9bc",nipple:"\ub3c4\ub4dc\ub77c\uc9c0\ub294 \uc720\ub450 \uadf9\ub3c4 \ubbfc\uac10 (\uc637\uc5d0 \uc4f8\ub824\ub3c4 \ubc18\uc751)",genital:"\ud3c9\uade0 \ud06c\uae30",scent:"\ub2ec\ucf64\ud55c \ucf54\ucf54\ub11b/\ubcf5\uc22d\uc544",body:"",special:"\uc624\uba54\uac00 \ubc1c\uc815\uae30, \uc2ac\ub9ad \uacfc\ub2e4 \ubd84\ube44, \ub2ec\ucf64\ud55c \uc624\uba54\uac00 \ud398\ub85c\ubaac (\ucf54\ucf54\ub11b/\ubcf5\uc22d\uc544 \ud5a5), \uc784\uc2e0 \uac00\ub2a5"},tags:["#\uc624\uba54\uac00\uc218","#\uae4c\uce60\uc218","#\ubbf8\uc778\uc218","#\ub3d9\uc815\uc218","#\uac15\uc218"],preferredActions:["\uc790\uc2e0\uc774 \ud1b5\uc81c\ud560 \uc218 \uc5c6\ub294 \ucf8c\uac10","\uc5b5\uc81c\uc81c \ud480\ub9ac\uace0 \ud398\ub85c\ubaac \ucda9\uc871","\uc740\ubc00\ud55c \ubd80\uc704 \ub178\ucd9c","\ud2b9\uc815 \ubd80\uc704 \uc12c\uc138\ud55c \uc790\uadf9","\ubcf8\uc778\uc744 \uc555\ub3c4\uc801\uc73c\ub85c \ud1b5\uc81c \ubc0f \uc9c0\ubc30\ud568","\uc800\ud56d\ud558\ub2e4 \uad74\ubcf5",""],avoidedActions:["\uacf5\uc801\uc778 \ubd80\ubd84 \uce68\ud574 \ube5b \ubc29\ud5e4","\ubcd1\uc6d0 \ub0b4 \uc0ac\uc801 \uc811\ucd09","\uacfc\uac70 \uc0c1\ucc98 \ub4e4\ucd94\uae30","\uc758\uc9c0\uc640 \ubb34\uad00\ud55c \uc2e0\uccb4 \ubc18\uc751 \ub178\ucd9c","\ubcf8\uc778\uc744 \ud611\ubc15","\ube44\ubc00\uc744 \ub4e4\ud0a4\uac70\ub098 \ub2e4\ub978 \uc0ac\ub78c\uc5d0\uac8c \ub204\ucd9c"],visibility:{basicInfo:!0,sexualDetails:!1,tags:!0,actions:!1}},$e={relationship:"\uc0c1\uc0ac\uc640 \ubd80\ud558",location:"\uc9c1\uc7a5(\ubcd1\uc6d0)",situation:"\ubcf5\ub3c4\uc5d0\uc11c \ub9c8\uc8fc\uce68",time:"\uc624\ud6c4 3\uc2dc"};const Xe=function(e){var t,r,s,a,o,l,c,u,h,d,f,p,m,g,v,y,b,w,x,S,E,k,_,C,N,A,T,I,j,D,P,R,O,L,M,F,V,U,z,B,q,H,K,W,Q,G,$,X,Y,J,Z,ee,te,ne,re,ie,se,ae,oe,le,ce;let{onSaveConfig:ue}=e;const[he,de]=(0,i.useState)(""),[fe,pe]=(0,i.useState)(!1),[me,ge]=(0,i.useState)({primaryColor:"#FF69B4",fontFamily:"Noto Sans KR",fontSize:16}),[ve,ye]=(0,i.useState)((0,Oe.A)((0,Oe.A)({},Qe),{},{tags:(null===(t=Qe)||void 0===t?void 0:t.tags)||[],preferredActions:(null===(r=Qe)||void 0===r?void 0:r.preferredActions)||[],avoidedActions:(null===(s=Qe)||void 0===s?void 0:s.avoidedActions)||[],callingSystem:(null===(a=Qe)||void 0===a?void 0:a.callingSystem)||{},bodyDetails:(null===(o=Qe)||void 0===o?void 0:o.bodyDetails)||{},sexualDetails:(null===(l=Qe)||void 0===l?void 0:l.sexualDetails)||{},visibility:(null===(c=Qe)||void 0===c?void 0:c.visibility)||{basicInfo:!0,sexualDetails:!1,tags:!0,actions:!1}})),[be,we]=(0,i.useState)((0,Oe.A)((0,Oe.A)({},Ge),{},{tags:(null===(u=Ge)||void 0===u?void 0:u.tags)||[],preferredActions:(null===(h=Ge)||void 0===h?void 0:h.preferredActions)||[],avoidedActions:(null===(d=Ge)||void 0===d?void 0:d.avoidedActions)||[],callingSystem:(null===(f=Ge)||void 0===f?void 0:f.callingSystem)||{},bodyDetails:(null===(p=Ge)||void 0===p?void 0:p.bodyDetails)||{},sexualDetails:(null===(m=Ge)||void 0===m?void 0:m.sexualDetails)||{},visibility:(null===(g=Ge)||void 0===g?void 0:g.visibility)||{basicInfo:!0,sexualDetails:!1,tags:!0,actions:!1}})),[xe,Se]=(0,i.useState)({title:Ke||"\uc724\uac04\ud638\uc0ac \uc6b8\ub9ac\uae30",description:We||"\uc724\uac04\ud638\uc0ac\uc758 \uc57d\uc810\uc744 \ucc3e\uc544\uc11c \uc6b8\ub824\ubcf4\uc138\uc694",relationship:(null===(v=$e)||void 0===v?void 0:v.relationship)||"\uc0c1\uc0ac\uc640 \ubd80\ud558",location:(null===(y=$e)||void 0===y?void 0:y.location)||"\uc9c1\uc7a5(\ubcd1\uc6d0)",situation:(null===(b=$e)||void 0===b?void 0:b.situation)||"\ubcf5\ub3c4\uc5d0\uc11c \ub9c8\uc8fc\uce68",time:(null===(w=$e)||void 0===w?void 0:w.time)||"\uc624\ud6c4 3\uc2dc",narrativePattern:"A",storyTags:{genre:["#\ub85c\ub9e8\uc2a4","#\uc624\ud53c\uc2a4"],mood:["#\ub2ec\ub2ec","#\uae34\uc7a5\uac10"],situation:["#\uccab\ub9cc\ub0a8","#\uc9dd\uc0ac\ub791"]}}),[Ee,ke]=(0,i.useState)([{id:1,threshold:20,name:"\uccab \ub9cc\ub0a8",file:null,preview:null},{id:2,threshold:40,name:"\uce5c\ubc00\ud574\uc9d0",file:null,preview:null},{id:3,threshold:60,name:"\uc124\ub808\ub294 \uc21c\uac04",file:null,preview:null},{id:4,threshold:80,name:"\uae4a\uc5b4\uc9c0\ub294 \uad00\uacc4",file:null,preview:null},{id:5,threshold:100,name:"\uc644\uc804\ud55c \uc2e0\ub8b0",file:null,preview:null}]),[_e,Ce]=(0,i.useState)({0:[],20:[],40:[],60:[],80:[]}),[Ne,Ae]=(0,i.useState)([]),[Te,Ie]=(0,i.useState)([]),je=["#\ub0c9\ud608\uacf5","#\uc7ac\ubc8c\uacf5","#\uac15\uacf5","#\uad11\uacf5","#\uc9d1\ucc29\uacf5","#\uc808\ub95c\uacf5","#\ub2a5\uae00\uacf5","#\ub2e4\uc815\uacf5","#\ud5cc\uc2e0\uacf5","#\uc5f0\uc0c1\uacf5"],De=["#\uae4c\uce60\uc218","#\uc21c\uc218\uc218","#\ub2e4\uc815\uc218","#\ud5cc\uc2e0\uc218","#\uc720\ud639\uc218","#\uc0c1\ucc98\uc218","#\uc790\ub0ae\uc218","#\uacf5\uc774\uc5c8\uc218","#\uce24\ub370\ub808","#\uc5f0\uc0c1\uc218"],Pe={genre:["#\ub85c\ub9e8\uc2a4","#\uc624\ud53c\uc2a4","#\ud559\uc6d0","#\ud310\ud0c0\uc9c0","#\ud604\ub300\ubb3c","#\uc2dc\ub300\ubb3c","#SF","#\uc2a4\ub9b4\ub7ec","#\ucf54\ubbf8\ub514","#19\uae08"],mood:["#\ub2ec\ub2ec","#\uae34\uc7a5\uac10","#\uc560\uc808","#\uc720\ucf8c","#\uc5b4\ub461","#\ubabd\ud658\uc801","#\ud604\uc2e4\uc801","#\uc13c\uc288\uc5bc","#\uc21c\uc560","#\uc9d1\ucc29"],situation:["#\uccab\ub9cc\ub0a8","#\uc7ac\ud68c","#\uc9dd\uc0ac\ub791","#\uc591\ud3b8\uc0ac\ub791","#\uc0bc\uac01\uad00\uacc4","#\uae08\uc9c0\ub41c\uc0ac\ub791","#\uacc4\uc57d\uc5f0\uc560","#\ub3d9\uac70","#\ucd9c\uc7a5","#\ube44\ubc00\uc5f0\uc560"]},Re=e=>{e.preventDefault(),"admin1234"===he?pe(!0):alert("\ube44\ubc00\ubc88\ud638\uac00 \ud2c0\ub838\uc2b5\ub2c8\ub2e4!")},Me=e=>{const t=prompt("\uc774\ubbf8\uc9c0 \uacbd\ub85c \uc785\ub825 (\uc608: /images/stories/story-1/bg-0-1.jpg):");t&&t.trim()&&Ce((0,Oe.A)((0,Oe.A)({},_e),{},{[e]:[..._e[e],t.trim()]}))},Fe=(e,t,n)=>{const r=[..._e[e]];r[t]=n,Ce((0,Oe.A)((0,Oe.A)({},_e),{},{[e]:r}))},ze=(e,t)=>{Ce((0,Oe.A)((0,Oe.A)({},_e),{},{[e]:_e[e].filter((e,n)=>n!==t)}))},[Be,qe]=(0,i.useState)(""),[He,Xe]=(0,i.useState)(""),[Ye,Je]=(0,i.useState)([]),Ze=(e,t,n)=>{const r=[...Ye];r[e][t]=n,Je(r)},et=(e,t)=>{if("A"===e){const e=ve.tags.includes(t)?ve.tags.filter(e=>e!==t):[...ve.tags,t];ye((0,Oe.A)((0,Oe.A)({},ve),{},{tags:e}))}else{const e=be.tags.includes(t)?be.tags.filter(e=>e!==t):[...be.tags,t];we((0,Oe.A)((0,Oe.A)({},be),{},{tags:e}))}},tt=e=>{const t=prompt("\uc0c8 \ud0dc\uadf8 \uc785\ub825 (\uc608: #\uc9d1\ucc29\uacf5)");t&&t.startsWith("#")?"A"===e?ve.tags.includes(t)?alert("\uc774\ubbf8 \ucd94\uac00\ub41c \ud0dc\uadf8\uc785\ub2c8\ub2e4!"):ye((0,Oe.A)((0,Oe.A)({},ve),{},{tags:[...ve.tags,t]})):be.tags.includes(t)?alert("\uc774\ubbf8 \ucd94\uac00\ub41c \ud0dc\uadf8\uc785\ub2c8\ub2e4!"):we((0,Oe.A)((0,Oe.A)({},be),{},{tags:[...be.tags,t]})):t&&alert("\ud0dc\uadf8\ub294 #\uc73c\ub85c \uc2dc\uc791\ud574\uc57c \ud569\ub2c8\ub2e4!")},nt=(e,t)=>{const n=xe.storyTags[e],r=n.includes(t)?n.filter(e=>e!==t):[...n,t];Se((0,Oe.A)((0,Oe.A)({},xe),{},{storyTags:(0,Oe.A)((0,Oe.A)({},xe.storyTags),{},{[e]:r})}))},rt=e=>{const t=prompt("\uc0c8 ".concat("genre"===e?"\uc7a5\ub974":"mood"===e?"\ubd84\uc704\uae30":"\uc0c1\ud669"," \ud0dc\uadf8 \uc785\ub825 (\uc608: #\ud310\ud0c0\uc9c0)"));t&&t.startsWith("#")?xe.storyTags[e].includes(t)?alert("\uc774\ubbf8 \ucd94\uac00\ub41c \ud0dc\uadf8\uc785\ub2c8\ub2e4!"):Se((0,Oe.A)((0,Oe.A)({},xe),{},{storyTags:(0,Oe.A)((0,Oe.A)({},xe.storyTags),{},{[e]:[...xe.storyTags[e],t]})})):t&&alert("\ud0dc\uadf8\ub294 #\uc73c\ub85c \uc2dc\uc791\ud574\uc57c \ud569\ub2c8\ub2e4!")},it=(e,t,n,r)=>{if("A"===e){const e=[...ve[t]];""===r?e.splice(n,1):e[n]=r,ye((0,Oe.A)((0,Oe.A)({},ve),{},{[t]:e}))}else{const e=[...be[t]];""===r?e.splice(n,1):e[n]=r,we((0,Oe.A)((0,Oe.A)({},be),{},{[t]:e}))}},st=(e,t)=>{"A"===e?ye((0,Oe.A)((0,Oe.A)({},ve),{},{[t]:[...ve[t],""]})):we((0,Oe.A)((0,Oe.A)({},be),{},{[t]:[...be[t],""]}))},[at,ot]=(0,i.useState)([]),[lt,ct]=(0,i.useState)(null),[ut,ht]=(0,i.useState)("\uc724\uac04\ud638\uc0ac \uc6b8\ub9ac\uae30"),[dt,ft]=(0,i.useState)(null),[pt,mt]=(0,i.useState)({thumbnail:"",profileA:"",profileB:"",backgrounds:{0:"",20:"",40:"",60:"",80:""},keywordImages:[]});return(0,i.useEffect)(()=>{(async()=>{const e=JSON.parse(localStorage.getItem("kind_cat_stories")||"[]");try{const{collection:t,onSnapshot:r}=await Promise.resolve().then(n.bind(n,306)),i=r(t(Ve,"stories"),t=>{if(t.empty)console.log("\ud83d\udce6 \ub85c\uceec \uc2a4\ud1a0\ub9ac\ub9cc \uc0ac\uc6a9"),ot(e);else{const n=t.docs.map(e=>(0,Oe.A)({id:e.id},e.data())),r=[...n];e.forEach(e=>{n.find(t=>t.id===e.id)||r.push(e)}),console.log("\ud83d\udcda \ubd88\ub7ec\uc628 \uc2a4\ud1a0\ub9ac:",r),ot(r)}},t=>{console.error("\u274c Firestore \uc77d\uae30 \uc624\ub958, \ub85c\uceec\ub9cc \uc0ac\uc6a9:",t),ot(e)});return()=>i()}catch(t){console.error("\u274c Firestore \uc5f0\uacb0 \uc2e4\ud328, \ub85c\uceec\ub9cc \uc0ac\uc6a9:",t),ot(e)}})()},[]),fe?(0,Ue.jsxs)("div",{className:"admin-page",children:[(0,Ue.jsxs)("div",{className:"admin-header",children:[(0,Ue.jsxs)("div",{className:"admin-logo-section",children:[(0,Ue.jsx)("img",{src:"".concat("/kind-cat","/cat-icon.png"),alt:"CAT",className:"admin-cat-icon"}),(0,Ue.jsx)("h1",{children:"\ud83c\udfa8 KIND CAT \uad00\ub9ac\uc790"})]}),(0,Ue.jsx)("button",{className:"logout-btn",onClick:()=>pe(!1),children:"\ub85c\uadf8\uc544\uc6c3"})]}),(0,Ue.jsxs)("div",{className:"admin-content",children:[at.length>0&&(0,Ue.jsxs)("div",{className:"admin-section",children:[(0,Ue.jsxs)("h2",{className:"section-title",children:["\ud83d\udcbe \uc800\uc7a5\ub41c \uc2a4\ud1a0\ub9ac \ubaa9\ub85d (",at.length,"\uac1c)"]}),(0,Ue.jsx)("div",{className:"stories-grid",children:[...at].sort((e,t)=>new Date(t.savedAt)-new Date(e.savedAt)).map(e=>(0,Ue.jsxs)("div",{className:"story-card ".concat(lt===e.id?"active":""),children:[(0,Ue.jsxs)("div",{className:"story-card-header",children:[(0,Ue.jsx)("h4",{children:e.storyTitle}),lt===e.id&&(0,Ue.jsx)("span",{className:"current-badge",children:"\ud604\uc7ac"}),e.published&&(0,Ue.jsx)("span",{className:"published-badge",children:"\ubc1c\ud589\ub428"})]}),(0,Ue.jsx)("p",{className:"story-desc",children:e.description}),(0,Ue.jsx)("p",{className:"story-meta",children:new Date(e.savedAt).toLocaleString("ko-KR")}),(0,Ue.jsxs)("div",{className:"story-card-actions",children:[(0,Ue.jsx)("button",{className:"btn-load",onClick:()=>(e=>{const t=at.find(t=>t.id===e);if(!t)return;ct(t.id),ht(t.storyTitle),ft(t.thumbnail||null),ge(t.appSettings||{primaryColor:"#FF69B4",fontFamily:"Noto Sans KR",fontSize:16}),Se({title:t.title,description:t.description,storyTags:t.storyTags,relationship:t.scenario.relationship,location:t.scenario.location,situation:t.scenario.situation,time:t.scenario.time,narrativePattern:t.scenario.narrativePattern||"A"}),ye(t.characterA),we(t.characterB),ke(t.images);const n=t.backgroundImages||{};Ce({0:Array.isArray(n[0])?n[0]:[],20:Array.isArray(n[20])?n[20]:[],40:Array.isArray(n[40])?n[40]:[],60:Array.isArray(n[60])?n[60]:[],80:Array.isArray(n[80])?n[80]:[]}),Ae(t.characterA.profileImages||[]),Ie(t.characterB.profileImages||[]),Je(t.keywordImages||[]),localStorage.setItem("kind_cat_active_story",e),alert('\u2705 "'.concat(t.storyTitle,'" \uc2a4\ud1a0\ub9ac\ub97c \ubd88\ub7ec\uc654\uc2b5\ub2c8\ub2e4!'))})(e.id),disabled:lt===e.id,children:"\ud83d\udcc2 \ubd88\ub7ec\uc624\uae30"}),(0,Ue.jsx)("button",{className:"btn-delete",onClick:()=>(async e=>{const t=at.find(t=>t.id===e);if(window.confirm('"'.concat(null===t||void 0===t?void 0:t.storyTitle,'" \uc2a4\ud1a0\ub9ac\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?')))try{await(0,Le.kd)((0,Le.H9)(Ve,"stories",e));const t=at.filter(t=>t.id!==e);localStorage.setItem("kind_cat_stories",JSON.stringify(t)),ot(t),lt===e&&(ct(null),localStorage.removeItem("kind_cat_active_story")),alert("\u2705 \uc2a4\ud1a0\ub9ac\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4!")}catch(n){console.error("\u274c \uc0ad\uc81c \uc2e4\ud328:",n),alert("\uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+n.message)}})(e.id),children:"\ud83d\uddd1\ufe0f \uc0ad\uc81c"})]})]},e.id))})]}),(0,Ue.jsxs)("div",{className:"admin-section",children:[(0,Ue.jsx)("h2",{className:"section-title",children:"\ud83d\udcda \uc2a4\ud1a0\ub9ac \uad00\ub9ac"}),(0,Ue.jsxs)("div",{className:"story-manager",children:[(0,Ue.jsxs)("div",{className:"current-story-info",children:[(0,Ue.jsx)("label",{children:"\ud604\uc7ac \uc791\uc5c5 \uc911\uc778 \uc2a4\ud1a0\ub9ac"}),(0,Ue.jsx)("input",{type:"text",value:ut,onChange:e=>ht(e.target.value),placeholder:"\uc2a4\ud1a0\ub9ac \uc81c\ubaa9\uc744 \uc785\ub825\ud558\uc138\uc694",className:"story-title-input"}),lt&&(0,Ue.jsxs)("span",{className:"story-id-badge",children:["ID: ",lt.slice(0,8)]})]}),(0,Ue.jsxs)("div",{className:"story-actions",children:[(0,Ue.jsx)("button",{className:"btn-new-story",onClick:()=>{window.confirm("\ud604\uc7ac \uc791\uc5c5 \uc911\uc778 \ub0b4\uc6a9\uc774 \uc800\uc7a5\ub418\uc9c0 \uc54a\uc558\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc0c8 \uc2a4\ud1a0\ub9ac\ub97c \ub9cc\ub4dc\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(ct(null),ht("\uc0c8 \uc2a4\ud1a0\ub9ac"),alert("\u2705 \uc0c8 \uc2a4\ud1a0\ub9ac\uac00 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"))},children:"\u2795 \uc0c8 \uc2a4\ud1a0\ub9ac \ub9cc\ub4e4\uae30"}),(0,Ue.jsx)("button",{className:"btn-import-json",onClick:()=>{const e=document.createElement("input");e.type="file",e.accept=".json,.mjs,.js",e.onchange=e=>{const t=e.target.files[0];if(!t)return;const n=new FileReader;n.onload=e=>{try{var n,r,i,s,a,o,l;let c=e.target.result;if(t.name.endsWith(".mjs")||t.name.endsWith(".js")){const e=c.match(/const STORY_CONFIG = ({[\s\S]*?});/);e&&(c=e[1])}const u=JSON.parse(c),h=Date.now().toString();ct(h),ht(u.title||"\uac00\uc838\uc628 \uc2a4\ud1a0\ub9ac"),ft(u.thumbnail||null),Se({title:u.title,description:u.description,storyTags:u.storyTags||{genre:["#\ub85c\ub9e8\uc2a4"],mood:["#\ub2ec\ub2ec"],situation:["#\uccab\ub9cc\ub0a8"]},relationship:(null===(n=u.scenario)||void 0===n?void 0:n.relationship)||"",location:(null===(r=u.scenario)||void 0===r?void 0:r.location)||"",situation:(null===(i=u.scenario)||void 0===i?void 0:i.situation)||"",time:(null===(s=u.scenario)||void 0===s?void 0:s.time)||"",narrativePattern:(null===(a=u.scenario)||void 0===a?void 0:a.narrativePattern)||"A"}),ye(u.characterA),we(u.characterB),ke(u.images||[]);const d=u.backgroundImages||{};Ce({0:Array.isArray(d[0])?d[0]:[],20:Array.isArray(d[20])?d[20]:[],40:Array.isArray(d[40])?d[40]:[],60:Array.isArray(d[60])?d[60]:[],80:Array.isArray(d[80])?d[80]:[]}),Ae((null===(o=u.characterA)||void 0===o?void 0:o.profileImages)||[]),Ie((null===(l=u.characterB)||void 0===l?void 0:l.profileImages)||[]),Je(u.keywordImages||[]),alert("\u2705 JSON \ud30c\uc77c\uc5d0\uc11c \uc2a4\ud1a0\ub9ac\ub97c \uc131\uacf5\uc801\uc73c\ub85c \ubd88\ub7ec\uc654\uc2b5\ub2c8\ub2e4!")}catch(c){console.error("JSON \ud30c\uc2f1 \uc624\ub958:",c),alert("\u274c \ud30c\uc77c\uc744 \uc77d\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+c.message)}},n.readAsText(t)},e.click()},children:"\ud83d\udce5 JSON\uc5d0\uc11c \uac00\uc838\uc624\uae30"})]}),(0,Ue.jsxs)("div",{className:"thumbnail-upload-section",children:[(0,Ue.jsx)("label",{children:"\ud83d\udcf8 \uc2a4\ud1a0\ub9ac \uc378\ub124\uc77c (\uba54\uc778 \ud654\uba74 \ub178\ucd9c)"}),(0,Ue.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{ft(e.target.result)},e.readAsDataURL(t)}},className:"file-input"}),dt&&(0,Ue.jsxs)("div",{className:"thumbnail-preview-container",children:[(0,Ue.jsx)("img",{src:dt,alt:"\uc378\ub124\uc77c \ubbf8\ub9ac\ubcf4\uae30",className:"thumbnail-preview"}),(0,Ue.jsx)("button",{className:"btn-remove-thumbnail",onClick:()=>ft(null),children:"\u2715 \uc81c\uac70"})]}),(0,Ue.jsx)("p",{className:"thumbnail-note",children:"\ud83d\udca1 \uad8c\uc7a5 \ud06c\uae30: 800x1000px (4:5 \ube44\uc728) | \uba54\uc778 \ud654\uba74 \uce74\ub4dc\uc5d0 \ud45c\uc2dc\ub429\ub2c8\ub2e4"}),(0,Ue.jsxs)("div",{className:"file-path-input-section",children:[(0,Ue.jsx)("label",{children:"\ud83d\uddc2\ufe0f \ub610\ub294 \ud30c\uc77c \uacbd\ub85c \uc9c1\uc811 \uc785\ub825 (\uad8c\uc7a5)"}),(0,Ue.jsx)("input",{type:"text",placeholder:"/images/stories/story-1/thumbnail.jpg",value:pt.thumbnail,onChange:e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;mt("background"===e&&null!==n?(0,Oe.A)((0,Oe.A)({},pt),{},{backgrounds:(0,Oe.A)((0,Oe.A)({},pt.backgrounds),{},{[n]:t})}):(0,Oe.A)((0,Oe.A)({},pt),{},{[e]:t}))}("thumbnail",e.target.value),className:"path-input"}),(0,Ue.jsxs)("p",{className:"path-note",children:["\ud83d\udcbe \ud30c\uc77c\uc744 ",(0,Ue.jsx)("code",{children:"public/images/stories/"})," \ud3f4\ub354\uc5d0 \uc5c5\ub85c\ub4dc\ud558\uace0 \uacbd\ub85c\ub97c \uc785\ub825\ud558\uc138\uc694",(0,Ue.jsx)("br",{}),"\u2705 \uc7a5\uc810: \ube60\ub978 \ub85c\ub529, \ubb34\uc81c\ud55c \uc6a9\ub7c9, \ube0c\ub77c\uc6b0\uc800 \uce90\uc2f1"]})]})]}),(0,Ue.jsxs)("div",{className:"background-images-section",children:[(0,Ue.jsx)("h3",{className:"subsection-title",children:"\ud83c\udfa8 \ubc30\uacbd \uc774\ubbf8\uc9c0 (\ud638\uac10\ub3c4\ubcc4)"}),(0,Ue.jsx)("p",{className:"section-description",children:"\ud638\uac10\ub3c4 \uc810\uc218\uc5d0 \ub530\ub77c \ub2e4\ub978 \ubc30\uacbd \uc774\ubbf8\uc9c0\uac00 \ud45c\uc2dc\ub429\ub2c8\ub2e4. \uc5ec\ub7ec \uc7a5 \ucd94\uac00 \uac00\ub2a5!"}),(0,Ue.jsxs)("div",{className:"affection-bg-group",children:[(0,Ue.jsx)("h4",{children:"0-20\uc810 (\ub0af\uc120 \ud638\uac10\ub3c4)"}),(0,Ue.jsx)("div",{className:"multi-image-list",children:_e[0].map((e,t)=>(0,Ue.jsxs)("div",{className:"image-item",children:[(0,Ue.jsxs)("span",{className:"image-number",children:[t+1,"."]}),(0,Ue.jsx)("input",{type:"text",value:e,onChange:e=>Fe(0,t,e.target.value),placeholder:"\uc57d ".concat(Math.floor(t*(20/Math.max(_e[0].length-1,1))),"\uc810\uc5d0 \ud45c\uc2dc"),className:"path-input"}),(0,Ue.jsx)("button",{className:"btn-remove-image",onClick:()=>ze(0,t),children:"\u2715"})]},t))}),(0,Ue.jsx)("button",{className:"btn-add-image",onClick:()=>Me(0),children:"\u2795 \uc774\ubbf8\uc9c0 \ucd94\uac00 (0-20\uc810)"})]}),(0,Ue.jsxs)("div",{className:"affection-bg-group",children:[(0,Ue.jsx)("h4",{children:"21-40\uc810 (\uce5c\ubc00\ud574\uc9d0)"}),(0,Ue.jsx)("div",{className:"multi-image-list",children:_e[20].map((e,t)=>(0,Ue.jsxs)("div",{className:"image-item",children:[(0,Ue.jsxs)("span",{className:"image-number",children:[t+1,"."]}),(0,Ue.jsx)("input",{type:"text",value:e,onChange:e=>Fe(20,t,e.target.value),placeholder:"\uc57d ".concat(21+Math.floor(t*(19/Math.max(_e[20].length-1,1))),"\uc810\uc5d0 \ud45c\uc2dc"),className:"path-input"}),(0,Ue.jsx)("button",{className:"btn-remove-image",onClick:()=>ze(20,t),children:"\u2715"})]},t))}),(0,Ue.jsx)("button",{className:"btn-add-image",onClick:()=>Me(20),children:"\u2795 \uc774\ubbf8\uc9c0 \ucd94\uac00 (21-40\uc810)"})]}),(0,Ue.jsxs)("div",{className:"affection-bg-group",children:[(0,Ue.jsx)("h4",{children:"41-60\uc810 (\uc911\uac04 \ud638\uac10\ub3c4)"}),(0,Ue.jsx)("div",{className:"multi-image-list",children:_e[40].map((e,t)=>(0,Ue.jsxs)("div",{className:"image-item",children:[(0,Ue.jsxs)("span",{className:"image-number",children:[t+1,"."]}),(0,Ue.jsx)("input",{type:"text",value:e,onChange:e=>Fe(40,t,e.target.value),placeholder:"\uc57d ".concat(41+Math.floor(t*(19/Math.max(_e[40].length-1,1))),"\uc810\uc5d0 \ud45c\uc2dc"),className:"path-input"}),(0,Ue.jsx)("button",{className:"btn-remove-image",onClick:()=>ze(40,t),children:"\u2715"})]},t))}),(0,Ue.jsx)("button",{className:"btn-add-image",onClick:()=>Me(40),children:"\u2795 \uc774\ubbf8\uc9c0 \ucd94\uac00 (41-60\uc810)"})]}),(0,Ue.jsxs)("div",{className:"affection-bg-group",children:[(0,Ue.jsx)("h4",{children:"61-80\uc810 (\uae4a\uc5b4\uc9c0\ub294 \uad00\uacc4)"}),(0,Ue.jsx)("div",{className:"multi-image-list",children:_e[60].map((e,t)=>(0,Ue.jsxs)("div",{className:"image-item",children:[(0,Ue.jsxs)("span",{className:"image-number",children:[t+1,"."]}),(0,Ue.jsx)("input",{type:"text",value:e,onChange:e=>Fe(60,t,e.target.value),placeholder:"\uc57d ".concat(61+Math.floor(t*(19/Math.max(_e[60].length-1,1))),"\uc810\uc5d0 \ud45c\uc2dc"),className:"path-input"}),(0,Ue.jsx)("button",{className:"btn-remove-image",onClick:()=>ze(60,t),children:"\u2715"})]},t))}),(0,Ue.jsx)("button",{className:"btn-add-image",onClick:()=>Me(60),children:"\u2795 \uc774\ubbf8\uc9c0 \ucd94\uac00 (61-80\uc810)"})]}),(0,Ue.jsxs)("div",{className:"affection-bg-group",children:[(0,Ue.jsx)("h4",{children:"81-100\uc810 (\ucd5c\uace0 \ud638\uac10\ub3c4)"}),(0,Ue.jsx)("div",{className:"multi-image-list",children:_e[80].map((e,t)=>(0,Ue.jsxs)("div",{className:"image-item",children:[(0,Ue.jsxs)("span",{className:"image-number",children:[t+1,"."]}),(0,Ue.jsx)("input",{type:"text",value:e,onChange:e=>Fe(80,t,e.target.value),placeholder:"\uc57d ".concat(81+Math.floor(t*(19/Math.max(_e[80].length-1,1))),"\uc810\uc5d0 \ud45c\uc2dc"),className:"path-input"}),(0,Ue.jsx)("button",{className:"btn-remove-image",onClick:()=>ze(80,t),children:"\u2715"})]},t))}),(0,Ue.jsx)("button",{className:"btn-add-image",onClick:()=>Me(80),children:"\u2795 \uc774\ubbf8\uc9c0 \ucd94\uac00 (81-100\uc810)"})]}),(0,Ue.jsxs)("p",{className:"bg-note",children:["\ud83d\udca1 \uc608\uc2dc: 0-20\uc810\uc5d0 3\uc7a5 \ucd94\uac00 \uc2dc \u2192 \uc57d 0\uc810, 10\uc810, 20\uc810\uc5d0 \uac01\uac01 \ub2e4\ub978 \uc774\ubbf8\uc9c0 \ud45c\uc2dc",(0,Ue.jsx)("br",{}),"\u2728 \ub9ce\uc774 \ub123\uc744\uc218\ub85d \ub354 \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \ubcc0\ud654!"]})]}),(0,Ue.jsxs)("div",{className:"keyword-images-section",children:[(0,Ue.jsx)("h3",{className:"subsection-title",children:"\ud83d\uddbc\ufe0f \ud0a4\uc6cc\ub4dc \uc774\ubbf8\uc9c0"}),(0,Ue.jsxs)("p",{className:"section-description",children:["\ud2b9\uc815 \ud0a4\uc6cc\ub4dc\uac00 \ub300\ud654\uc5d0 \ub098\ud0c0\ub098\uba74 \uc790\ub3d9\uc73c\ub85c \uc774\ubbf8\uc9c0\ub97c \uc804\uc1a1\ud569\ub2c8\ub2e4.",(0,Ue.jsx)("br",{}),'\uc608: "\ud0a4\uc2a4" \uc785\ub825 \uc2dc \u2192 \ud0a4\uc2a4 \uc7a5\uba74 \uc774\ubbf8\uc9c0 \ud45c\uc2dc']}),(0,Ue.jsx)("div",{className:"keyword-add-form",children:(0,Ue.jsxs)("div",{className:"keyword-input-row",children:[(0,Ue.jsxs)("div",{className:"keyword-input-col",children:[(0,Ue.jsx)("label",{children:"\ud0a4\uc6cc\ub4dc"}),(0,Ue.jsx)("input",{type:"text",placeholder:"\ud0a4\uc2a4, \ud3ec\uc639, \uc6b8\uc74c...",value:Be,onChange:e=>qe(e.target.value),className:"keyword-text-input"})]}),(0,Ue.jsxs)("div",{className:"keyword-input-col",children:[(0,Ue.jsx)("label",{children:"\uc774\ubbf8\uc9c0 \uacbd\ub85c"}),(0,Ue.jsx)("input",{type:"text",placeholder:"/images/stories/story-1/keywords/kiss.jpg",value:He,onChange:e=>Xe(e.target.value),className:"keyword-path-input"})]}),(0,Ue.jsx)("button",{className:"btn-add-keyword",onClick:()=>{Be.trim()&&He.trim()?(Je([...Ye,{keyword:Be.trim(),imagePath:He.trim()}]),qe(""),Xe("")):alert("\ud0a4\uc6cc\ub4dc\uc640 \uc774\ubbf8\uc9c0 \uacbd\ub85c\ub97c \ubaa8\ub450 \uc785\ub825\ud574\uc8fc\uc138\uc694!")},children:"\u2795 \ucd94\uac00"})]})}),Ye.length>0&&(0,Ue.jsx)("div",{className:"keyword-image-list",children:Ye.map((e,t)=>(0,Ue.jsxs)("div",{className:"keyword-image-item",children:[(0,Ue.jsxs)("div",{className:"keyword-item-content",children:[(0,Ue.jsxs)("div",{className:"keyword-item-inputs",children:[(0,Ue.jsxs)("div",{className:"keyword-edit-col",children:[(0,Ue.jsx)("label",{children:"\ud0a4\uc6cc\ub4dc"}),(0,Ue.jsx)("input",{type:"text",value:e.keyword,onChange:e=>Ze(t,"keyword",e.target.value),className:"keyword-edit-input"})]}),(0,Ue.jsxs)("div",{className:"keyword-edit-col",children:[(0,Ue.jsx)("label",{children:"\uc774\ubbf8\uc9c0 \uacbd\ub85c"}),(0,Ue.jsx)("input",{type:"text",value:e.imagePath,onChange:e=>Ze(t,"imagePath",e.target.value),className:"keyword-edit-input"})]})]}),e.imagePath&&(0,Ue.jsx)("div",{className:"keyword-preview-container",children:(0,Ue.jsx)("img",{src:"".concat("/kind-cat").concat(e.imagePath),alt:e.keyword,className:"keyword-preview",onError:e=>{e.target.style.display="none"}})})]}),(0,Ue.jsx)("button",{className:"btn-remove-keyword",onClick:()=>(e=>{Je(Ye.filter((t,n)=>n!==e))})(t),children:"\u2715"})]},t))}),(0,Ue.jsxs)("div",{className:"keyword-examples",children:[(0,Ue.jsx)("strong",{children:"\ud83d\udca1 \ud0a4\uc6cc\ub4dc \uc608\uc2dc:"}),(0,Ue.jsxs)("div",{className:"examples-grid",children:[(0,Ue.jsx)("span",{children:"\ud0a4\uc2a4, \ud3ec\uc639, \uc6b8\uc74c, \ubbf8\uc18c"}),(0,Ue.jsx)("span",{children:"\uce68\ub300, \uc18c\ud30c, \uc0ac\ubb34\uc2e4, \ubcd1\uc6d0"}),(0,Ue.jsx)("span",{children:"\uc120\ubb3c, \uaf43, \ubc18\uc9c0, \ubaa9\uac78\uc774"}),(0,Ue.jsx)("span",{children:"\ube44, \ub208, \uc11d\uc591, \ubc14\ub2e4"})]})]})]})]})]}),(0,Ue.jsxs)("div",{className:"admin-section",children:[(0,Ue.jsx)("h2",{className:"section-title",children:"\ud83d\udcd6 \uc2a4\ud1a0\ub9ac \uc815\ubcf4"}),(0,Ue.jsxs)("div",{className:"form-grid",children:[(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"\uc81c\ubaa9"}),(0,Ue.jsx)("input",{type:"text",value:xe.title,onChange:e=>Se((0,Oe.A)((0,Oe.A)({},xe),{},{title:e.target.value}))})]}),(0,Ue.jsxs)("div",{className:"form-group full-width",children:[(0,Ue.jsx)("label",{children:"\uc124\uba85"}),(0,Ue.jsx)("textarea",{value:xe.description,onChange:e=>Se((0,Oe.A)((0,Oe.A)({},xe),{},{description:e.target.value}))})]})]}),(0,Ue.jsx)("h3",{className:"subsection-title",style:{marginTop:"30px"},children:"\ud83c\udff7\ufe0f \uc791\ud488 \ud0dc\uadf8"}),(0,Ue.jsxs)("div",{className:"story-tags-section",children:[(0,Ue.jsx)("h4",{className:"tag-category-title",children:"\uc7a5\ub974"}),(0,Ue.jsxs)("div",{className:"tag-container",children:[Pe.genre.map(e=>(0,Ue.jsx)("button",{className:"tag-btn ".concat(xe.storyTags.genre.includes(e)?"active":""),onClick:()=>nt("genre",e),children:e},e)),xe.storyTags.genre.filter(e=>!Pe.genre.includes(e)).map(e=>(0,Ue.jsxs)("button",{className:"tag-btn active custom-tag",onClick:()=>nt("genre",e),title:"\ucee4\uc2a4\ud140 \ud0dc\uadf8 (\ud074\ub9ad\ud558\uc5ec \uc81c\uac70)",children:[e," \u2715"]},e)),(0,Ue.jsx)("button",{className:"tag-btn add-tag",onClick:()=>rt("genre"),children:"+ \ucd94\uac00"})]}),(0,Ue.jsx)("h4",{className:"tag-category-title",children:"\ubd84\uc704\uae30"}),(0,Ue.jsxs)("div",{className:"tag-container",children:[Pe.mood.map(e=>(0,Ue.jsx)("button",{className:"tag-btn ".concat(xe.storyTags.mood.includes(e)?"active":""),onClick:()=>nt("mood",e),children:e},e)),xe.storyTags.mood.filter(e=>!Pe.mood.includes(e)).map(e=>(0,Ue.jsxs)("button",{className:"tag-btn active custom-tag",onClick:()=>nt("mood",e),title:"\ucee4\uc2a4\ud140 \ud0dc\uadf8 (\ud074\ub9ad\ud558\uc5ec \uc81c\uac70)",children:[e," \u2715"]},e)),(0,Ue.jsx)("button",{className:"tag-btn add-tag",onClick:()=>rt("mood"),children:"+ \ucd94\uac00"})]}),(0,Ue.jsx)("h4",{className:"tag-category-title",children:"\uc0c1\ud669"}),(0,Ue.jsxs)("div",{className:"tag-container",children:[Pe.situation.map(e=>(0,Ue.jsx)("button",{className:"tag-btn ".concat(xe.storyTags.situation.includes(e)?"active":""),onClick:()=>nt("situation",e),children:e},e)),xe.storyTags.situation.filter(e=>!Pe.situation.includes(e)).map(e=>(0,Ue.jsxs)("button",{className:"tag-btn active custom-tag",onClick:()=>nt("situation",e),title:"\ucee4\uc2a4\ud140 \ud0dc\uadf8 (\ud074\ub9ad\ud558\uc5ec \uc81c\uac70)",children:[e," \u2715"]},e)),(0,Ue.jsx)("button",{className:"tag-btn add-tag",onClick:()=>rt("situation"),children:"+ \ucd94\uac00"})]})]})]}),(0,Ue.jsxs)("div",{className:"admin-section",children:[(0,Ue.jsx)("h2",{className:"section-title",children:"\ud83d\udd3a \uacf5(\u653b) \uce90\ub9ad\ud130"}),(0,Ue.jsxs)("div",{className:"avatar-upload-section",children:[(0,Ue.jsx)("label",{className:"avatar-label",children:"\ud83d\udcf8 \uce90\ub9ad\ud130 \ud504\ub85c\ud544 \uc0ac\uc9c4 (\uc5ec\ub7ec \uc7a5 \uac00\ub2a5)"}),(0,Ue.jsx)("div",{className:"multi-image-list",children:Ne.map((e,t)=>(0,Ue.jsxs)("div",{className:"image-item",children:[(0,Ue.jsxs)("span",{className:"image-number",children:[t+1,"."]}),(0,Ue.jsx)("input",{type:"text",value:e,onChange:e=>{const n=[...Ne];n[t]=e.target.value,Ae(n)},placeholder:"\ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \uacbd\ub85c",className:"path-input"}),(0,Ue.jsx)("button",{className:"btn-remove-image",onClick:()=>Ae(Ne.filter((e,n)=>n!==t)),children:"\u2715"})]},t))}),(0,Ue.jsx)("button",{className:"btn-add-image",onClick:()=>{const e=prompt("\ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \uacbd\ub85c \uc785\ub825:");e&&e.trim()&&Ae([...Ne,e.trim()])},children:"\u2795 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \ucd94\uac00"}),(0,Ue.jsx)("p",{className:"avatar-note",children:"\ud83d\udca1 \uad8c\uc7a5 \ud06c\uae30: \uc815\uc0ac\uac01\ud615 (500x500px) | \uc5ec\ub7ec \ud45c\uc815, \ud3ec\uc988 \ucd94\uac00 \uac00\ub2a5"})]}),(0,Ue.jsx)("h3",{className:"subsection-title",children:"\uae30\ubcf8 \uc815\ubcf4"}),(0,Ue.jsxs)("div",{className:"form-grid",children:[(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"\uc774\ub984 *"}),(0,Ue.jsx)("input",{type:"text",value:ve.name,onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{name:e.target.value}))})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"\ub098\uc774"}),(0,Ue.jsx)("input",{type:"text",value:ve.age,onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{age:e.target.value}))})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"\uc9c1\uc5c5"}),(0,Ue.jsx)("input",{type:"text",value:ve.occupation,onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{occupation:e.target.value}))})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"\uc131\uaca9"}),(0,Ue.jsx)("input",{type:"text",value:ve.personality,onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{personality:e.target.value}))})]}),(0,Ue.jsxs)("div",{className:"form-group full-width",children:[(0,Ue.jsx)("label",{children:"\uc678\ubaa8"}),(0,Ue.jsx)("textarea",{value:ve.appearance,onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{appearance:e.target.value})),rows:"3"})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"\ud0a4"}),(0,Ue.jsx)("input",{type:"text",value:(null===(x=ve.bodyDetails)||void 0===x?void 0:x.height)||"",onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{bodyDetails:(0,Oe.A)((0,Oe.A)({},ve.bodyDetails),{},{height:e.target.value})})),placeholder:"\uc608: 188cm"})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"\uccb4\ud615"}),(0,Ue.jsx)("input",{type:"text",value:(null===(S=ve.bodyDetails)||void 0===S?void 0:S.build)||"",onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{bodyDetails:(0,Oe.A)((0,Oe.A)({},ve.bodyDetails),{},{build:e.target.value})})),placeholder:"\uc608: \uac70\ub300\ud55c \uadfc\uc721\uc9c8"})]}),(0,Ue.jsxs)("div",{className:"form-group full-width",children:[(0,Ue.jsx)("label",{children:"\ubd80\uc704\ubcc4 \ud2b9\uc9d5"}),(0,Ue.jsx)("input",{type:"text",value:(null===(E=ve.bodyDetails)||void 0===E?void 0:E.features)||"",onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{bodyDetails:(0,Oe.A)((0,Oe.A)({},ve.bodyDetails),{},{features:e.target.value})})),placeholder:"\uc608: \ub5a1 \ubc8c\uc5b4\uc9c4 \uc5b4\uae68, \ud0c4\ud0c4\ud55c \uac00\uc2b4 \uadfc\uc721"})]}),(0,Ue.jsxs)("div",{className:"form-group full-width",children:[(0,Ue.jsx)("label",{children:"\ub9d0\ud22c"}),(0,Ue.jsx)("textarea",{value:ve.speech,onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{speech:e.target.value})),rows:"2"})]})]}),(0,Ue.jsx)("h3",{className:"subsection-title",children:"\ud83d\udc95 \ud638\uce6d \uc2dc\uc2a4\ud15c (\uacf5 \u2192 \uc218)"}),(0,Ue.jsx)("div",{className:"calling-system-note",children:(0,Ue.jsx)("p",{children:"\uad00\uacc4 \uc810\uc218(\ud638\uac10\ub3c4)\uc5d0 \ub530\ub77c \uacf5\uc774 \uc218\ub97c \ubd80\ub974\ub294 \ud638\uce6d\uc774 \ubcc0\ud654\ud569\ub2c8\ub2e4"})}),(0,Ue.jsxs)("div",{className:"form-grid",children:[(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"0-20\uc810 (\ud0c0\uc778)"}),(0,Ue.jsx)("input",{type:"text",value:(null===(k=ve.callingSystem)||void 0===k?void 0:k.affection_0_20)||"",onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{callingSystem:(0,Oe.A)((0,Oe.A)({},ve.callingSystem),{},{affection_0_20:e.target.value})})),placeholder:"\uc608: \uc724\ud0dc\uc774 \uc528"})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"21-40\uc810 (\uacbd\uacc4)"}),(0,Ue.jsx)("input",{type:"text",value:(null===(_=ve.callingSystem)||void 0===_?void 0:_.affection_21_40)||"",onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{callingSystem:(0,Oe.A)((0,Oe.A)({},ve.callingSystem),{},{affection_21_40:e.target.value})})),placeholder:"\uc608: \ud0dc\uc774 \uc528"})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"41-60\uc810 (\uad00\uc2ec)"}),(0,Ue.jsx)("input",{type:"text",value:(null===(C=ve.callingSystem)||void 0===C?void 0:C.affection_41_60)||"",onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{callingSystem:(0,Oe.A)((0,Oe.A)({},ve.callingSystem),{},{affection_41_60:e.target.value})})),placeholder:"\uc608: \ud0dc\uc774"})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"61-80\uc810 (\ud638\uac10)"}),(0,Ue.jsx)("input",{type:"text",value:(null===(N=ve.callingSystem)||void 0===N?void 0:N.affection_61_80)||"",onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{callingSystem:(0,Oe.A)((0,Oe.A)({},ve.callingSystem),{},{affection_61_80:e.target.value})})),placeholder:"\uc608: \ub108"})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"81-100\uc810 (\uc560\uc815/\uc2e0\ub8b0)"}),(0,Ue.jsx)("input",{type:"text",value:(null===(A=ve.callingSystem)||void 0===A?void 0:A.affection_81_100)||"",onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{callingSystem:(0,Oe.A)((0,Oe.A)({},ve.callingSystem),{},{affection_81_100:e.target.value})})),placeholder:"\uc608: \ub0b4 \uac70, \uc790\uae30"})]})]}),(0,Ue.jsx)("h3",{className:"subsection-title",children:"\ud83d\udd1e \uc131\uc801 \ub514\ud14c\uc77c"}),(0,Ue.jsx)("div",{className:"sexual-detail-guide",children:(0,Ue.jsxs)("p",{className:"guide-text",children:["\ud83d\udca1 ",(0,Ue.jsx)("strong",{children:"\uacf5(\u653b) \uc791\uc131 \uac00\uc774\ub4dc"}),": \uc131\uae30 \ud2b9\uc9d5 \u2192 \uc2e0\uccb4 \ud2b9\uc9d5 \u2192 \uccb4\ud5a5 \uc21c\uc11c\ub85c \uc791\uc131 \uad8c\uc7a5"]})}),(0,Ue.jsxs)("div",{className:"form-grid",children:[(0,Ue.jsxs)("div",{className:"form-group full-width",children:[(0,Ue.jsx)("label",{children:"\uc131\uae30 \ud2b9\uc9d5"}),(0,Ue.jsx)("textarea",{value:(null===(T=ve.sexualDetails)||void 0===T?void 0:T.genital)||"",onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{sexualDetails:(0,Oe.A)((0,Oe.A)({},ve.sexualDetails),{},{genital:e.target.value})})),placeholder:"\uc608: \uad75\uace0 \uc555\ub3c4\uc801\uc778 \ud615\ud0dc, \uc120\uba85\ud55c \ud54f\uc904",rows:"2"})]}),(0,Ue.jsxs)("div",{className:"form-group full-width",children:[(0,Ue.jsx)("label",{children:"\uc2e0\uccb4 \ud2b9\uc9d5"}),(0,Ue.jsx)("textarea",{value:(null===(I=ve.sexualDetails)||void 0===I?void 0:I.body)||"",onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{sexualDetails:(0,Oe.A)((0,Oe.A)({},ve.sexualDetails),{},{body:e.target.value})})),placeholder:"\uc608: \ud0c4\ud0c4\ud55c \uadfc\uc721, \ub728\uac70\uc6b4 \uccb4\uc628",rows:"2"})]}),(0,Ue.jsxs)("div",{className:"form-group full-width",children:[(0,Ue.jsx)("label",{children:"\uccb4\ud5a5"}),(0,Ue.jsx)("input",{type:"text",value:(null===(j=ve.sexualDetails)||void 0===j?void 0:j.scent)||"",onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{sexualDetails:(0,Oe.A)((0,Oe.A)({},ve.sexualDetails),{},{scent:e.target.value})})),placeholder:"\uc608: \uc9c4\ud55c \uc0ac\ud5a5/\uba38\uc2a4\ud06c"})]}),(0,Ue.jsxs)("div",{className:"form-group full-width",children:[(0,Ue.jsx)("label",{children:"\uae30\ud0c0 \ud2b9\uc218 \uc124\uc815"}),(0,Ue.jsx)("textarea",{value:(null===(D=ve.sexualDetails)||void 0===D?void 0:D.special)||"",onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{sexualDetails:(0,Oe.A)((0,Oe.A)({},ve.sexualDetails),{},{special:e.target.value})})),placeholder:"\uc608: \uc54c\ud30c \ud398\ub85c\ubaac \ubd84\ube44, \uad50\ubbf8 \ubcf8\ub2a5",rows:"2"})]})]}),(0,Ue.jsxs)("h3",{className:"subsection-title",children:["\ud83c\udff7\ufe0f \ud0dc\uadf8 (",(null===(P=ve.tags)||void 0===P?void 0:P.length)||0,"\uac1c \uc120\ud0dd)"]}),(0,Ue.jsxs)("div",{className:"tag-container",children:[je.map(e=>{var t;return(0,Ue.jsx)("button",{className:"tag-btn ".concat(null!==(t=ve.tags)&&void 0!==t&&t.includes(e)?"active":""),onClick:()=>et("A",e),children:e},e)}),null===(R=ve.tags)||void 0===R?void 0:R.filter(e=>!je.includes(e)).map(e=>(0,Ue.jsxs)("button",{className:"tag-btn active custom-tag",onClick:()=>et("A",e),title:"\ucee4\uc2a4\ud140 \ud0dc\uadf8 (\ud074\ub9ad\ud558\uc5ec \uc81c\uac70)",children:[e," \u2715"]},e)),(0,Ue.jsx)("button",{className:"tag-btn add-tag",onClick:()=>tt("A"),children:"+ \ucee4\uc2a4\ud140 \ud0dc\uadf8 \ucd94\uac00"})]}),(0,Ue.jsx)("h3",{className:"subsection-title",children:"\ud83d\udc41\ufe0f \uc720\uc800 \uacf5\uac1c \uc124\uc815"}),(0,Ue.jsxs)("div",{className:"visibility-controls",children:[(0,Ue.jsx)("div",{className:"visibility-item",children:(0,Ue.jsxs)("div",{className:"visibility-header",children:[(0,Ue.jsx)("label",{children:"\ud83d\udccb \uae30\ubcf8 \uc815\ubcf4 (\uc774\ub984, \ub098\uc774, \uc9c1\uc5c5, \uc678\ubaa8)"}),(0,Ue.jsxs)("label",{className:"toggle-switch",children:[(0,Ue.jsx)("input",{type:"checkbox",checked:!1!==(null===(O=ve.visibility)||void 0===O?void 0:O.basicInfo),onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{visibility:(0,Oe.A)((0,Oe.A)({},ve.visibility),{},{basicInfo:e.target.checked})}))}),(0,Ue.jsx)("span",{className:"toggle-slider"})]})]})}),(0,Ue.jsx)("div",{className:"visibility-item",children:(0,Ue.jsxs)("div",{className:"visibility-header",children:[(0,Ue.jsx)("label",{children:"\ud83c\udff7\ufe0f \ud0dc\uadf8"}),(0,Ue.jsxs)("label",{className:"toggle-switch",children:[(0,Ue.jsx)("input",{type:"checkbox",checked:!1!==(null===(L=ve.visibility)||void 0===L?void 0:L.tags),onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{visibility:(0,Oe.A)((0,Oe.A)({},ve.visibility),{},{tags:e.target.checked})}))}),(0,Ue.jsx)("span",{className:"toggle-slider"})]})]})}),(0,Ue.jsxs)("div",{className:"visibility-item",children:[(0,Ue.jsxs)("div",{className:"visibility-header",children:[(0,Ue.jsx)("label",{children:"\ud83d\udd1e \uc131\uc801 \ub514\ud14c\uc77c"}),(0,Ue.jsxs)("label",{className:"toggle-switch",children:[(0,Ue.jsx)("input",{type:"checkbox",checked:!0===(null===(M=ve.visibility)||void 0===M?void 0:M.sexualDetails),onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{visibility:(0,Oe.A)((0,Oe.A)({},ve.visibility),{},{sexualDetails:e.target.checked})}))}),(0,Ue.jsx)("span",{className:"toggle-slider"})]})]}),(0,Ue.jsx)("p",{className:"visibility-note",children:"\u26a0\ufe0f 19\uae08 \ucf58\ud150\uce20 - \uc2e0\uc911\ud558\uac8c \uacf5\uac1c\ud558\uc138\uc694"})]}),(0,Ue.jsx)("div",{className:"visibility-item",children:(0,Ue.jsxs)("div",{className:"visibility-header",children:[(0,Ue.jsx)("label",{children:"\u2705 \uc120\ud638/\ube44\uc120\ud638 \ud589\ub3d9"}),(0,Ue.jsxs)("label",{className:"toggle-switch",children:[(0,Ue.jsx)("input",{type:"checkbox",checked:!0===(null===(F=ve.visibility)||void 0===F?void 0:F.actions),onChange:e=>ye((0,Oe.A)((0,Oe.A)({},ve),{},{visibility:(0,Oe.A)((0,Oe.A)({},ve.visibility),{},{actions:e.target.checked})}))}),(0,Ue.jsx)("span",{className:"toggle-slider"})]})]})})]}),(0,Ue.jsx)("h3",{className:"subsection-title",children:"\u2705 \uc120\ud638 \ud589\ub3d9"}),(0,Ue.jsxs)("div",{className:"action-list",children:[null===(V=ve.preferredActions)||void 0===V?void 0:V.map((e,t)=>(0,Ue.jsx)("input",{type:"text",value:e,onChange:e=>it("A","preferredActions",t,e.target.value),placeholder:"\uc608: \ubaa9 \uc7a1\uae30",className:"action-input"},t)),(0,Ue.jsx)("button",{className:"btn-add-action",onClick:()=>st("A","preferredActions"),children:"+ \ud589\ub3d9 \ucd94\uac00"})]}),(0,Ue.jsx)("h3",{className:"subsection-title",children:"\u274c \ube44\uc120\ud638 \ud589\ub3d9"}),(0,Ue.jsxs)("div",{className:"action-list",children:[null===(U=ve.avoidedActions)||void 0===U?void 0:U.map((e,t)=>(0,Ue.jsx)("input",{type:"text",value:e,onChange:e=>it("A","avoidedActions",t,e.target.value),placeholder:"\uc608: \uc560\uad50",className:"action-input"},t)),(0,Ue.jsx)("button",{className:"btn-add-action",onClick:()=>st("A","avoidedActions"),children:"+ \ud589\ub3d9 \ucd94\uac00"})]})]}),(0,Ue.jsxs)("div",{className:"admin-section",children:[(0,Ue.jsx)("h2",{className:"section-title",children:"\ud83d\udd3b \uc218(\u53d7) \uce90\ub9ad\ud130"}),(0,Ue.jsxs)("div",{className:"avatar-upload-section",children:[(0,Ue.jsx)("label",{className:"avatar-label",children:"\ud83d\udcf8 \uce90\ub9ad\ud130 \ud504\ub85c\ud544 \uc0ac\uc9c4 (\uc5ec\ub7ec \uc7a5 \uac00\ub2a5)"}),(0,Ue.jsx)("div",{className:"multi-image-list",children:Te.map((e,t)=>(0,Ue.jsxs)("div",{className:"image-item",children:[(0,Ue.jsxs)("span",{className:"image-number",children:[t+1,"."]}),(0,Ue.jsx)("input",{type:"text",value:e,onChange:e=>{const n=[...Te];n[t]=e.target.value,Ie(n)},placeholder:"\ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \uacbd\ub85c",className:"path-input"}),(0,Ue.jsx)("button",{className:"btn-remove-image",onClick:()=>Ie(Te.filter((e,n)=>n!==t)),children:"\u2715"})]},t))}),(0,Ue.jsx)("button",{className:"btn-add-image",onClick:()=>{const e=prompt("\ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \uacbd\ub85c \uc785\ub825:");e&&e.trim()&&Ie([...Te,e.trim()])},children:"\u2795 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \ucd94\uac00"})]}),(0,Ue.jsx)("h3",{className:"subsection-title",children:"\uae30\ubcf8 \uc815\ubcf4"}),(0,Ue.jsxs)("div",{className:"form-grid",children:[(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"\uc774\ub984 *"}),(0,Ue.jsx)("input",{type:"text",value:be.name,onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{name:e.target.value}))})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"\ub098\uc774"}),(0,Ue.jsx)("input",{type:"text",value:be.age,onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{age:e.target.value}))})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"\uc9c1\uc5c5"}),(0,Ue.jsx)("input",{type:"text",value:be.occupation,onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{occupation:e.target.value}))})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"\uc131\uaca9"}),(0,Ue.jsx)("input",{type:"text",value:be.personality,onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{personality:e.target.value}))})]}),(0,Ue.jsxs)("div",{className:"form-group full-width",children:[(0,Ue.jsx)("label",{children:"\uc678\ubaa8"}),(0,Ue.jsx)("textarea",{value:be.appearance,onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{appearance:e.target.value})),rows:"3"})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"\ud0a4"}),(0,Ue.jsx)("input",{type:"text",value:(null===(z=be.bodyDetails)||void 0===z?void 0:z.height)||"",onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{bodyDetails:(0,Oe.A)((0,Oe.A)({},be.bodyDetails),{},{height:e.target.value})}))})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"\uccb4\ud615"}),(0,Ue.jsx)("input",{type:"text",value:(null===(B=be.bodyDetails)||void 0===B?void 0:B.build)||"",onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{bodyDetails:(0,Oe.A)((0,Oe.A)({},be.bodyDetails),{},{build:e.target.value})}))})]}),(0,Ue.jsxs)("div",{className:"form-group full-width",children:[(0,Ue.jsx)("label",{children:"\ubd80\uc704\ubcc4 \ud2b9\uc9d5"}),(0,Ue.jsx)("input",{type:"text",value:(null===(q=be.bodyDetails)||void 0===q?void 0:q.features)||"",onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{bodyDetails:(0,Oe.A)((0,Oe.A)({},be.bodyDetails),{},{features:e.target.value})}))})]}),(0,Ue.jsxs)("div",{className:"form-group full-width",children:[(0,Ue.jsx)("label",{children:"\ub9d0\ud22c"}),(0,Ue.jsx)("textarea",{value:be.speech,onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{speech:e.target.value})),rows:"2"})]})]}),(0,Ue.jsx)("h3",{className:"subsection-title",children:"\ud83d\udc95 \ud638\uce6d \uc2dc\uc2a4\ud15c (\uc218 \u2192 \uacf5)"}),(0,Ue.jsxs)("div",{className:"form-grid",children:[(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"0-20\uc810"}),(0,Ue.jsx)("input",{type:"text",value:(null===(H=be.callingSystem)||void 0===H?void 0:H.affection_0_20)||"",onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{callingSystem:(0,Oe.A)((0,Oe.A)({},be.callingSystem),{},{affection_0_20:e.target.value})}))})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"21-40\uc810"}),(0,Ue.jsx)("input",{type:"text",value:(null===(K=be.callingSystem)||void 0===K?void 0:K.affection_21_40)||"",onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{callingSystem:(0,Oe.A)((0,Oe.A)({},be.callingSystem),{},{affection_21_40:e.target.value})}))})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"41-60\uc810"}),(0,Ue.jsx)("input",{type:"text",value:(null===(W=be.callingSystem)||void 0===W?void 0:W.affection_41_60)||"",onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{callingSystem:(0,Oe.A)((0,Oe.A)({},be.callingSystem),{},{affection_41_60:e.target.value})}))})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"61-80\uc810"}),(0,Ue.jsx)("input",{type:"text",value:(null===(Q=be.callingSystem)||void 0===Q?void 0:Q.affection_61_80)||"",onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{callingSystem:(0,Oe.A)((0,Oe.A)({},be.callingSystem),{},{affection_61_80:e.target.value})}))})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"81-100\uc810"}),(0,Ue.jsx)("input",{type:"text",value:(null===(G=be.callingSystem)||void 0===G?void 0:G.affection_81_100)||"",onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{callingSystem:(0,Oe.A)((0,Oe.A)({},be.callingSystem),{},{affection_81_100:e.target.value})}))})]})]}),(0,Ue.jsx)("h3",{className:"subsection-title",children:"\ud83d\udd1e \uc131\uc801 \ub514\ud14c\uc77c"}),(0,Ue.jsxs)("div",{className:"form-grid",children:[(0,Ue.jsxs)("div",{className:"form-group full-width",children:[(0,Ue.jsx)("label",{children:"\uad6c\uba4d \ud2b9\uc9d5"}),(0,Ue.jsx)("textarea",{value:(null===($=be.sexualDetails)||void 0===$?void 0:$.hole)||"",onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{sexualDetails:(0,Oe.A)((0,Oe.A)({},be.sexualDetails),{},{hole:e.target.value})})),rows:"3"})]}),(0,Ue.jsxs)("div",{className:"form-group full-width",children:[(0,Ue.jsx)("label",{children:"\ud2b9\uc218 \ubc18\uc751"}),(0,Ue.jsx)("textarea",{value:(null===(X=be.sexualDetails)||void 0===X?void 0:X.reactions)||"",onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{sexualDetails:(0,Oe.A)((0,Oe.A)({},be.sexualDetails),{},{reactions:e.target.value})})),rows:"2"})]}),(0,Ue.jsxs)("div",{className:"form-group full-width",children:[(0,Ue.jsx)("label",{children:"\uc720\ub450"}),(0,Ue.jsx)("input",{type:"text",value:(null===(Y=be.sexualDetails)||void 0===Y?void 0:Y.nipple)||"",onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{sexualDetails:(0,Oe.A)((0,Oe.A)({},be.sexualDetails),{},{nipple:e.target.value})}))})]}),(0,Ue.jsxs)("div",{className:"form-group full-width",children:[(0,Ue.jsx)("label",{children:"\uc131\uae30"}),(0,Ue.jsx)("input",{type:"text",value:(null===(J=be.sexualDetails)||void 0===J?void 0:J.genital)||"",onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{sexualDetails:(0,Oe.A)((0,Oe.A)({},be.sexualDetails),{},{genital:e.target.value})}))})]}),(0,Ue.jsxs)("div",{className:"form-group full-width",children:[(0,Ue.jsx)("label",{children:"\uccb4\ud5a5"}),(0,Ue.jsx)("input",{type:"text",value:(null===(Z=be.sexualDetails)||void 0===Z?void 0:Z.scent)||"",onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{sexualDetails:(0,Oe.A)((0,Oe.A)({},be.sexualDetails),{},{scent:e.target.value})}))})]}),(0,Ue.jsxs)("div",{className:"form-group full-width",children:[(0,Ue.jsx)("label",{children:"\uae30\ud0c0 \ud2b9\uc218 \uc124\uc815"}),(0,Ue.jsx)("textarea",{value:(null===(ee=be.sexualDetails)||void 0===ee?void 0:ee.special)||"",onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{sexualDetails:(0,Oe.A)((0,Oe.A)({},be.sexualDetails),{},{special:e.target.value})})),rows:"2"})]})]}),(0,Ue.jsxs)("h3",{className:"subsection-title",children:["\ud83c\udff7\ufe0f \ud0dc\uadf8 (",(null===(te=be.tags)||void 0===te?void 0:te.length)||0,"\uac1c \uc120\ud0dd)"]}),(0,Ue.jsxs)("div",{className:"tag-container",children:[De.map(e=>{var t;return(0,Ue.jsx)("button",{className:"tag-btn ".concat(null!==(t=be.tags)&&void 0!==t&&t.includes(e)?"active":""),onClick:()=>et("B",e),children:e},e)}),null===(ne=be.tags)||void 0===ne?void 0:ne.filter(e=>!De.includes(e)).map(e=>(0,Ue.jsxs)("button",{className:"tag-btn active custom-tag",onClick:()=>et("B",e),title:"\ucee4\uc2a4\ud140 \ud0dc\uadf8 (\ud074\ub9ad\ud558\uc5ec \uc81c\uac70)",children:[e," \u2715"]},e)),(0,Ue.jsx)("button",{className:"tag-btn add-tag",onClick:()=>tt("B"),children:"+ \ucee4\uc2a4\ud140 \ud0dc\uadf8 \ucd94\uac00"})]}),(0,Ue.jsx)("h3",{className:"subsection-title",children:"\ud83d\udc41\ufe0f \uc720\uc800 \uacf5\uac1c \uc124\uc815"}),(0,Ue.jsxs)("div",{className:"visibility-controls",children:[(0,Ue.jsx)("div",{className:"visibility-item",children:(0,Ue.jsxs)("div",{className:"visibility-header",children:[(0,Ue.jsx)("label",{children:"\ud83d\udccb \uae30\ubcf8 \uc815\ubcf4"}),(0,Ue.jsxs)("label",{className:"toggle-switch",children:[(0,Ue.jsx)("input",{type:"checkbox",checked:!1!==(null===(re=be.visibility)||void 0===re?void 0:re.basicInfo),onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{visibility:(0,Oe.A)((0,Oe.A)({},be.visibility),{},{basicInfo:e.target.checked})}))}),(0,Ue.jsx)("span",{className:"toggle-slider"})]})]})}),(0,Ue.jsx)("div",{className:"visibility-item",children:(0,Ue.jsxs)("div",{className:"visibility-header",children:[(0,Ue.jsx)("label",{children:"\ud83c\udff7\ufe0f \ud0dc\uadf8"}),(0,Ue.jsxs)("label",{className:"toggle-switch",children:[(0,Ue.jsx)("input",{type:"checkbox",checked:!1!==(null===(ie=be.visibility)||void 0===ie?void 0:ie.tags),onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{visibility:(0,Oe.A)((0,Oe.A)({},be.visibility),{},{tags:e.target.checked})}))}),(0,Ue.jsx)("span",{className:"toggle-slider"})]})]})}),(0,Ue.jsxs)("div",{className:"visibility-item",children:[(0,Ue.jsxs)("div",{className:"visibility-header",children:[(0,Ue.jsx)("label",{children:"\ud83d\udd1e \uc131\uc801 \ub514\ud14c\uc77c"}),(0,Ue.jsxs)("label",{className:"toggle-switch",children:[(0,Ue.jsx)("input",{type:"checkbox",checked:!0===(null===(se=be.visibility)||void 0===se?void 0:se.sexualDetails),onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{visibility:(0,Oe.A)((0,Oe.A)({},be.visibility),{},{sexualDetails:e.target.checked})}))}),(0,Ue.jsx)("span",{className:"toggle-slider"})]})]}),(0,Ue.jsx)("p",{className:"visibility-note",children:"\u26a0\ufe0f 19\uae08 \ucf58\ud150\uce20"})]}),(0,Ue.jsx)("div",{className:"visibility-item",children:(0,Ue.jsxs)("div",{className:"visibility-header",children:[(0,Ue.jsx)("label",{children:"\u2705 \uc120\ud638/\ube44\uc120\ud638 \ud589\ub3d9"}),(0,Ue.jsxs)("label",{className:"toggle-switch",children:[(0,Ue.jsx)("input",{type:"checkbox",checked:!0===(null===(ae=be.visibility)||void 0===ae?void 0:ae.actions),onChange:e=>we((0,Oe.A)((0,Oe.A)({},be),{},{visibility:(0,Oe.A)((0,Oe.A)({},be.visibility),{},{actions:e.target.checked})}))}),(0,Ue.jsx)("span",{className:"toggle-slider"})]})]})})]}),(0,Ue.jsx)("h3",{className:"subsection-title",children:"\u2705 \uc120\ud638 \ud589\ub3d9"}),(0,Ue.jsxs)("div",{className:"action-list",children:[null===(oe=be.preferredActions)||void 0===oe?void 0:oe.map((e,t)=>(0,Ue.jsx)("input",{type:"text",value:e,onChange:e=>it("B","preferredActions",t,e.target.value),className:"action-input"},t)),(0,Ue.jsx)("button",{className:"btn-add-action",onClick:()=>st("B","preferredActions"),children:"+ \ud589\ub3d9 \ucd94\uac00"})]}),(0,Ue.jsx)("h3",{className:"subsection-title",children:"\u274c \ube44\uc120\ud638 \ud589\ub3d9"}),(0,Ue.jsxs)("div",{className:"action-list",children:[null===(le=be.avoidedActions)||void 0===le?void 0:le.map((e,t)=>(0,Ue.jsx)("input",{type:"text",value:e,onChange:e=>it("B","avoidedActions",t,e.target.value),className:"action-input"},t)),(0,Ue.jsx)("button",{className:"btn-add-action",onClick:()=>st("B","avoidedActions"),children:"+ \ud589\ub3d9 \ucd94\uac00"})]})]}),(0,Ue.jsxs)("div",{className:"admin-section",children:[(0,Ue.jsx)("h2",{className:"section-title",children:"\ud83c\udfac \uc2dc\ub098\ub9ac\uc624 \uc124\uc815"}),(0,Ue.jsxs)("div",{className:"form-grid",children:[(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"\ub450 \uc0ac\ub78c\uc758 \uad00\uacc4"}),(0,Ue.jsx)("input",{type:"text",value:xe.relationship,onChange:e=>Se((0,Oe.A)((0,Oe.A)({},xe),{},{relationship:e.target.value}))})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"\uc2dc\uc791 \uc2dc\uac04"}),(0,Ue.jsx)("input",{type:"text",value:xe.time,onChange:e=>Se((0,Oe.A)((0,Oe.A)({},xe),{},{time:e.target.value}))})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"\uccab \ub9cc\ub0a8 \uc7a5\uc18c"}),(0,Ue.jsx)("input",{type:"text",value:xe.location,onChange:e=>Se((0,Oe.A)((0,Oe.A)({},xe),{},{location:e.target.value}))})]}),(0,Ue.jsxs)("div",{className:"form-group",children:[(0,Ue.jsx)("label",{children:"\uccab \ub9cc\ub0a8 \uc0c1\ud669"}),(0,Ue.jsx)("textarea",{value:xe.situation,onChange:e=>Se((0,Oe.A)((0,Oe.A)({},xe),{},{situation:e.target.value}))})]})]})]}),(0,Ue.jsxs)("div",{className:"admin-actions",children:[(0,Ue.jsx)("button",{className:"btn-save-primary",onClick:async()=>{var e,t;const n=lt||Date.now().toString(),r={id:n,storyTitle:ut,savedAt:(new Date).toISOString(),published:(null===(e=at.find(e=>e.id===n))||void 0===e?void 0:e.published)||!1,publishedAt:(null===(t=at.find(e=>e.id===n))||void 0===t?void 0:t.publishedAt)||null,thumbnail:pt.thumbnail||dt,backgroundImages:_e,keywordImages:Ye,appSettings:me,title:xe.title,description:xe.description,storyTags:xe.storyTags,characterA:(0,Oe.A)((0,Oe.A)({},ve),{},{avatar:null,avatarPreview:pt.profileA||ve.avatarPreview,profileImages:Ne}),characterB:(0,Oe.A)((0,Oe.A)({},be),{},{avatar:null,avatarPreview:pt.profileB||be.avatarPreview,profileImages:Te}),scenario:{relationship:xe.relationship,location:xe.location,situation:xe.situation,time:xe.time,narrativePattern:xe.narrativePattern||"A"},images:Ee.map(e=>({id:e.id,threshold:e.threshold,name:e.name}))};try{await(0,Le.BN)((0,Le.H9)(Ve,"stories",n),r),console.log("\u2705 Firebase \uc800\uc7a5 \uc131\uacf5:",n);const e=at.findIndex(e=>e.id===n);let t;e>=0?(t=[...at],t[e]=(0,Oe.A)((0,Oe.A)({},r),{},{published:t[e].published,publishedAt:t[e].publishedAt})):t=[...at,r],localStorage.setItem("kind_cat_stories",JSON.stringify(t)),ot(t),ct(n),localStorage.setItem("kind_cat_active_story",n),alert('\u2705 "'.concat(ut,'" \uc2a4\ud1a0\ub9ac\uac00 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4! (Firebase + \ub85c\uceec)'))}catch(i){console.error("\u274c Firebase \uc800\uc7a5 \uc2e4\ud328:",i),alert("\uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+i.message)}},children:"\ud83d\udcbe \uc800\uc7a5 (\uc784\uc2dc \uc800\uc7a5)"}),lt&&(null!==(ce=at.find(e=>e.id===lt))&&void 0!==ce&&ce.published?(0,Ue.jsx)("button",{className:"btn-unpublish",onClick:async()=>{if(lt&&window.confirm('"'.concat(ut,'" \uc2a4\ud1a0\ub9ac\uc758 \ubc1c\ud589\uc744 \ucde8\uc18c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\n\uba54\uc778 \ud654\uba74\uc5d0\uc11c \uc228\uaca8\uc9d1\ub2c8\ub2e4.')))try{await(0,Le.BN)((0,Le.H9)(Ve,"stories",lt),{published:!1,publishedAt:null},{merge:!0});const e=at.map(e=>e.id===lt?(0,Oe.A)((0,Oe.A)({},e),{},{published:!1,publishedAt:null}):e);localStorage.setItem("kind_cat_stories",JSON.stringify(e)),ot(e),alert('\u2705 "'.concat(ut,'" \uc2a4\ud1a0\ub9ac\uc758 \ubc1c\ud589\uc774 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4!'))}catch(e){console.error("\u274c \ubc1c\ud589 \ucde8\uc18c \uc2e4\ud328:",e),alert("\ubc1c\ud589 \ucde8\uc18c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+e.message)}},children:"\ud83d\udcf4 \ubc1c\ud589 \ucde8\uc18c"}):(0,Ue.jsx)("button",{className:"btn-publish",onClick:async()=>{if(!lt)return void alert("\u26a0\ufe0f \uba3c\uc800 \uc2a4\ud1a0\ub9ac\ub97c \uc800\uc7a5\ud574\uc8fc\uc138\uc694!");if(at.find(e=>e.id===lt)){if(window.confirm('\ud83d\udce2 "'.concat(ut,'" \uc2a4\ud1a0\ub9ac\ub97c \ubc1c\ud589\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\n\ubc1c\ud589\ud558\uba74 \uba54\uc778 \ud654\uba74\uc5d0 \uacf5\uac1c\ub429\ub2c8\ub2e4!')))try{await(0,Le.BN)((0,Le.H9)(Ve,"stories",lt),{published:!0,publishedAt:(new Date).toISOString()},{merge:!0});const e=at.map(e=>e.id===lt?(0,Oe.A)((0,Oe.A)({},e),{},{published:!0,publishedAt:(new Date).toISOString()}):e);localStorage.setItem("kind_cat_stories",JSON.stringify(e)),ot(e),alert('\u2705 "'.concat(ut,'" \uc2a4\ud1a0\ub9ac\uac00 \ubc1c\ud589\ub418\uc5c8\uc2b5\ub2c8\ub2e4!\n\n\uba54\uc778 \ud654\uba74\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.'))}catch(e){console.error("\u274c \ubc1c\ud589 \uc2e4\ud328:",e),alert("\ubc1c\ud589 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+e.message)}}else alert("\u26a0\ufe0f \uc2a4\ud1a0\ub9ac\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4!")},children:"\ud83d\ude80 \ubc1c\ud589\ud558\uae30 (\uba54\uc778 \uacf5\uac1c)"})),(0,Ue.jsx)("button",{className:"btn-download",onClick:()=>{const e={appSettings:me,title:xe.title,description:xe.description,characterA:ve,characterB:be,scenario:{relationship:xe.relationship,location:xe.location,situation:xe.situation,time:xe.time},images:Ee.map(e=>({id:e.id,threshold:e.threshold,name:e.name,preview:e.preview})),backgroundImages:_e,keywordImages:Ye},t="export const STORY_CONFIG = ".concat(JSON.stringify(e,null,2),";\n\nexport const SYSTEM_PROMPT = `\ub2f9\uc2e0\uc740 \ud55c\uad6d BL \uc778\ud130\ub799\ud2f0\ube0c \ud53d\uc158\uc758 AI\uc785\ub2c8\ub2e4.\n\n[\uce90\ub9ad\ud130 \ud0dc\uadf8]\n\uacf5: ").concat(ve.tags.join(", "),"\n\uc218: ").concat(be.tags.join(", "),"\n\n[\uc120\ud638 \ud589\ub3d9]\n\uacf5: ").concat(ve.preferredActions.join(", "),"\n\uc218: ").concat(be.preferredActions.join(", "),"\n\n[\ube44\uc120\ud638 \ud589\ub3d9 - \uc808\ub300 \uc0ac\uc6a9 \uae08\uc9c0]\n\uacf5: ").concat(ve.avoidedActions.join(", "),"\n\uc218: ").concat(be.avoidedActions.join(", "),'\n\n[\ud575\uc2ec \uaddc\uce59]\n1. \uc751\ub2f5\uc740 \ubc18\ub4dc\uc2dc JSON \ud615\uc2dd\n2. \uc9c0\ubb38\uacfc \ub300\uc0ac \uba85\ud655\ud788 \uad6c\ubd84\n3. \uce90\ub9ad\ud130 \uc131\uaca9\uacfc \ud0dc\uadf8 \ubc18\uc601\n4. \ud638\uac10\ub3c4 \uc810\uc9c4\uc801 \uc99d\uac00\n5. \uc120\ud638 \ud589\ub3d9 \uc6b0\uc120, \ube44\uc120\ud638 \ud589\ub3d9 \ud68c\ud53c\n\n[\uc751\ub2f5 \ud615\uc2dd]\n{\n  "narration": "\uc9c0\ubb38 (200-300\uc790)",\n  "dialogues": [\n    {"character": "').concat(ve.name,'", "text": "\ub300\uc0ac"},\n    {"character": "').concat(be.name,'", "text": "\ub300\uc0ac"}\n  ],\n  "affection_change": -10~+15,\n  "excitement_change": 0~+10,\n  "choices": ["\uc120\ud0dd1", "\uc120\ud0dd2", "\uc120\ud0dd3", "\uc120\ud0dd4"]\n}`;'),n=new Blob([t],{type:"text/javascript"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="storyConfig.js",i.click(),URL.revokeObjectURL(r),alert("\u2705 \uc124\uc815 \ud30c\uc77c \ub2e4\uc6b4\ub85c\ub4dc \uc644\ub8cc!")},children:"\ud83d\udce5 \ubc31\uc5c5 \ud30c\uc77c \ub2e4\uc6b4\ub85c\ub4dc"})]})]})]}):(0,Ue.jsx)("div",{className:"admin-login",children:(0,Ue.jsxs)("div",{className:"login-container",children:[(0,Ue.jsxs)("div",{className:"admin-logo-section",children:[(0,Ue.jsx)("img",{src:"".concat("/kind-cat","/cat-icon.png"),alt:"CAT",className:"admin-cat-icon"}),(0,Ue.jsx)("h1",{className:"admin-title",children:"\ud83d\udd10 \uad00\ub9ac\uc790 \ub85c\uadf8\uc778"})]}),(0,Ue.jsxs)("form",{onSubmit:Re,children:[(0,Ue.jsx)("input",{type:"password",className:"login-input",placeholder:"\ube44\ubc00\ubc88\ud638 \uc785\ub825",value:he,onChange:e=>de(e.target.value)}),(0,Ue.jsx)("button",{type:"submit",className:"login-btn",children:"\ub85c\uadf8\uc778"})]}),(0,Ue.jsx)("p",{className:"login-hint",children:"\ud78c\ud2b8: admin1234"})]})})};const Ye=function(){return(0,Ue.jsx)(Te,{children:(0,Ue.jsxs)(Ee,{children:[(0,Ue.jsx)(xe,{path:"/",element:(0,Ue.jsx)(ze,{})}),(0,Ue.jsx)(xe,{path:"/story/:storyId",element:(0,Ue.jsx)(Be,{})}),(0,Ue.jsx)(xe,{path:"/apikey/:storyId",element:(0,Ue.jsx)(qe,{})}),(0,Ue.jsx)(xe,{path:"/chat/:storyId",element:(0,Ue.jsx)(He,{})}),(0,Ue.jsx)(xe,{path:"/admin",element:(0,Ue.jsx)(Xe,{})})]})})};a.createRoot(document.getElementById("root")).render((0,Ue.jsx)(i.StrictMode,{children:(0,Ue.jsx)(Ye,{})}))})();