{"ast":null,"code":"var _jsxFileName = \"/Users/a1/kind-cat-complete/src/components/StoryFlow.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport ApiKeyScreen from './ApiKeyScreen';\nimport StoryScreen from './StoryScreen';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction StoryFlow() {\n  _s();\n  const {\n    storyId\n  } = useParams();\n  const navigate = useNavigate();\n  const [story, setStory] = useState(null);\n  const [apiKey, setApiKey] = useState('');\n  const [started, setStarted] = useState(false);\n\n  // 스토리 로드\n  useEffect(() => {\n    const stories = JSON.parse(localStorage.getItem('kind_cat_stories') || '[]');\n    const foundStory = stories.find(s => s.id === storyId);\n    if (!foundStory) {\n      alert('스토리를 찾을 수 없습니다!');\n      navigate('/');\n      return;\n    }\n    if (!foundStory.published) {\n      alert('이 스토리는 아직 발행되지 않았습니다!');\n      navigate('/');\n      return;\n    }\n    setStory(foundStory);\n  }, [storyId, navigate]);\n  const handleStart = key => {\n    setApiKey(key);\n    setStarted(true);\n  };\n\n  // 로딩 중\n  if (!story) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        minHeight: '100vh',\n        background: '#1A1A1A',\n        color: '#FFF',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        fontSize: '1.2em'\n      },\n      children: \"\\uC2A4\\uD1A0\\uB9AC\\uB97C \\uBD88\\uB7EC\\uC624\\uB294 \\uC911...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this);\n  }\n\n  // API 키 입력 화면\n  if (!started) {\n    return /*#__PURE__*/_jsxDEV(ApiKeyScreen, {\n      story: story,\n      onStart: handleStart\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 12\n    }, this);\n  }\n\n  // 채팅 화면\n  return /*#__PURE__*/_jsxDEV(StoryScreen, {\n    story: story,\n    apiKey: apiKey\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 10\n  }, this);\n}\n_s(StoryFlow, \"A9XzQ3BAwQUKgHoEV7+oqacNLr4=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = StoryFlow;\nexport default StoryFlow;\nvar _c;\n$RefreshReg$(_c, \"StoryFlow\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","ApiKeyScreen","StoryScreen","jsxDEV","_jsxDEV","StoryFlow","_s","storyId","navigate","story","setStory","apiKey","setApiKey","started","setStarted","stories","JSON","parse","localStorage","getItem","foundStory","find","s","id","alert","published","handleStart","key","style","minHeight","background","color","display","alignItems","justifyContent","fontSize","children","fileName","_jsxFileName","lineNumber","columnNumber","onStart","_c","$RefreshReg$"],"sources":["/Users/a1/kind-cat-complete/src/components/StoryFlow.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport ApiKeyScreen from './ApiKeyScreen';\nimport StoryScreen from './StoryScreen';\n\nfunction StoryFlow() {\n  const { storyId } = useParams();\n  const navigate = useNavigate();\n  const [story, setStory] = useState(null);\n  const [apiKey, setApiKey] = useState('');\n  const [started, setStarted] = useState(false);\n\n  // 스토리 로드\n  useEffect(() => {\n    const stories = JSON.parse(localStorage.getItem('kind_cat_stories') || '[]');\n    const foundStory = stories.find(s => s.id === storyId);\n    \n    if (!foundStory) {\n      alert('스토리를 찾을 수 없습니다!');\n      navigate('/');\n      return;\n    }\n\n    if (!foundStory.published) {\n      alert('이 스토리는 아직 발행되지 않았습니다!');\n      navigate('/');\n      return;\n    }\n\n    setStory(foundStory);\n  }, [storyId, navigate]);\n\n  const handleStart = (key) => {\n    setApiKey(key);\n    setStarted(true);\n  };\n\n  // 로딩 중\n  if (!story) {\n    return (\n      <div style={{ \n        minHeight: '100vh', \n        background: '#1A1A1A', \n        color: '#FFF', \n        display: 'flex', \n        alignItems: 'center', \n        justifyContent: 'center',\n        fontSize: '1.2em'\n      }}>\n        스토리를 불러오는 중...\n      </div>\n    );\n  }\n\n  // API 키 입력 화면\n  if (!started) {\n    return <ApiKeyScreen story={story} onStart={handleStart} />;\n  }\n\n  // 채팅 화면\n  return <StoryScreen story={story} apiKey={apiKey} />;\n}\n\nexport default StoryFlow;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AACzD,OAAOC,YAAY,MAAM,gBAAgB;AACzC,OAAOC,WAAW,MAAM,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,SAASC,SAASA,CAAA,EAAG;EAAAC,EAAA;EACnB,MAAM;IAAEC;EAAQ,CAAC,GAAGR,SAAS,CAAC,CAAC;EAC/B,MAAMS,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACS,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACc,MAAM,EAAEC,SAAS,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACgB,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;;EAE7C;EACAC,SAAS,CAAC,MAAM;IACd,MAAMiB,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,kBAAkB,CAAC,IAAI,IAAI,CAAC;IAC5E,MAAMC,UAAU,GAAGL,OAAO,CAACM,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKhB,OAAO,CAAC;IAEtD,IAAI,CAACa,UAAU,EAAE;MACfI,KAAK,CAAC,iBAAiB,CAAC;MACxBhB,QAAQ,CAAC,GAAG,CAAC;MACb;IACF;IAEA,IAAI,CAACY,UAAU,CAACK,SAAS,EAAE;MACzBD,KAAK,CAAC,uBAAuB,CAAC;MAC9BhB,QAAQ,CAAC,GAAG,CAAC;MACb;IACF;IAEAE,QAAQ,CAACU,UAAU,CAAC;EACtB,CAAC,EAAE,CAACb,OAAO,EAAEC,QAAQ,CAAC,CAAC;EAEvB,MAAMkB,WAAW,GAAIC,GAAG,IAAK;IAC3Bf,SAAS,CAACe,GAAG,CAAC;IACdb,UAAU,CAAC,IAAI,CAAC;EAClB,CAAC;;EAED;EACA,IAAI,CAACL,KAAK,EAAE;IACV,oBACEL,OAAA;MAAKwB,KAAK,EAAE;QACVC,SAAS,EAAE,OAAO;QAClBC,UAAU,EAAE,SAAS;QACrBC,KAAK,EAAE,MAAM;QACbC,OAAO,EAAE,MAAM;QACfC,UAAU,EAAE,QAAQ;QACpBC,cAAc,EAAE,QAAQ;QACxBC,QAAQ,EAAE;MACZ,CAAE;MAAAC,QAAA,EAAC;IAEH;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAEV;;EAEA;EACA,IAAI,CAAC3B,OAAO,EAAE;IACZ,oBAAOT,OAAA,CAACH,YAAY;MAACQ,KAAK,EAAEA,KAAM;MAACgC,OAAO,EAAEf;IAAY;MAAAW,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC7D;;EAEA;EACA,oBAAOpC,OAAA,CAACF,WAAW;IAACO,KAAK,EAAEA,KAAM;IAACE,MAAM,EAAEA;EAAO;IAAA0B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AACtD;AAAClC,EAAA,CAxDQD,SAAS;EAAA,QACIN,SAAS,EACZC,WAAW;AAAA;AAAA0C,EAAA,GAFrBrC,SAAS;AA0DlB,eAAeA,SAAS;AAAC,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}